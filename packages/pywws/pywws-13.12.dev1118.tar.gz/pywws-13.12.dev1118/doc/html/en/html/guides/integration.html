

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to integrate pywws with various weather services &mdash; pywws 13.12.dev1117 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '13.12.dev1117',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
    <link rel="top" title="pywws 13.12.dev1117 documentation" href="../index.html" />
    <link rel="up" title="User guides" href="index.html" />
    <link rel="next" title="How to configure pywws to post messages to Twitter" href="twitter.html" />
    <link rel="prev" title="How to set up ‘live’ logging with pywws" href="livelogging.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="livelogging.html" title="How to set up ‘live’ logging with pywws"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pywws 13.12.dev1117 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">User guides</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-integrate-pywws-with-various-weather-services">
<h1>How to integrate pywws with various weather services<a class="headerlink" href="#how-to-integrate-pywws-with-various-weather-services" title="Permalink to this headline">¶</a></h1>
<p>This guide gives brief instructions on how to use pywws with some other weather services and software.
It is not comprehensive, and some services (such as Twitter) are covered in more detail elsewhere.</p>
<div class="section" id="yowindow">
<h2>YoWindow<a class="headerlink" href="#yowindow" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://yowindow.com/">YoWindow</a> is a weather display widget that can display data from an internet source, or from your weather station.
To display data from your station pywws needs to write to a local file, typically every 48 seconds when new data is received.
This is easy to do:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Stop all pywws software</p>
</li>
<li><p class="first">Copy the <tt class="docutils literal"><span class="pre">yowindow.xml</span></tt> example template to your text template directory.</p>
</li>
<li><p class="first">If you haven&#8217;t already done so, edit <tt class="docutils literal"><span class="pre">weather.ini</span></tt> and set the <tt class="docutils literal"><span class="pre">local_files</span></tt> entry in the <tt class="docutils literal"><span class="pre">[paths]</span></tt> section to a suitable directory for your yowindow file.</p>
</li>
<li><p class="first">Add the yowindow template to the <tt class="docutils literal"><span class="pre">[live]</span></tt> tasks in <tt class="docutils literal"><span class="pre">weather.ini</span></tt>. Set its flags to <tt class="docutils literal"><span class="pre">'L'</span></tt> so the result is copied to your local directory instead of being uploaded to an ftp site:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;yowindow.xml&#39;</span><span class="p">,</span> <span class="s">&#39;L&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart pywws live logging.</p>
</li>
</ol>
</div></blockquote>
<p>You can check the file is being updated every 48 seconds by using <tt class="docutils literal"><span class="pre">more</span></tt> or <tt class="docutils literal"><span class="pre">cat</span></tt> to dump it to the screen.</p>
<p>Finally configure yowindow to use this file.
See <a class="reference external" href="http://yowindow.com/pws_setup.php">http://yowindow.com/pws_setup.php</a> for instructions on how to do this.</p>
</div>
<div class="section" id="twitter">
<h2>Twitter<a class="headerlink" href="#twitter" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="twitter.html"><em>How to configure pywws to post messages to Twitter</em></a> for full instructions.</p>
</div>
<div class="section" id="uk-met-office">
<h2>UK Met Office<a class="headerlink" href="#uk-met-office" title="Permalink to this headline">¶</a></h2>
<p>Handled by the <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> module.
See <a class="reference internal" href="#weather-underground"><em>Weather Underground</em></a> for general setup instructions.</p>
<ul>
<li><div class="first line-block">
<div class="line">Create account:</div>
<div class="line"><a class="reference external" href="https://register.metoffice.gov.uk/WaveRegistrationClient/public/register.do?service=weatherobservations">https://register.metoffice.gov.uk/WaveRegistrationClient/public/register.do?service=weatherobservations</a></div>
</div>
</li>
<li><p class="first">API: <a class="reference external" href="http://wow.metoffice.gov.uk/support/dataformats#automatic">http://wow.metoffice.gov.uk/support/dataformats#automatic</a></p>
</li>
<li><p class="first">Example <tt class="docutils literal"><span class="pre">weather.ini</span></tt> section:</p>
<div class="highlight-python"><pre>[metoffice]
site id = 12345678
aws pin = 987654</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="open-weather-map">
<h2>Open Weather Map<a class="headerlink" href="#open-weather-map" title="Permalink to this headline">¶</a></h2>
<p>Handled by the <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> module.
See <a class="reference internal" href="#weather-underground"><em>Weather Underground</em></a> for general setup instructions.</p>
<ul>
<li><p class="first">Create account: <a class="reference external" href="http://openweathermap.org/login">http://openweathermap.org/login</a></p>
</li>
<li><p class="first">API: <a class="reference external" href="http://openweathermap.org/API">http://openweathermap.org/API</a></p>
</li>
<li><p class="first">Example <tt class="docutils literal"><span class="pre">weather.ini</span></tt> section:</p>
<div class="highlight-python"><pre>[openweathermap]
lat = 51.501
long = -0.142
alt = 10
user = Elizabeth Windsor
password = corgi
id = Buck House</pre>
</div>
</li>
</ul>
<p>The default behaviour is to use your user name to identify the weather station.
However, it&#8217;s possible for a user to have more than one weather station, so there is an undocumented <tt class="docutils literal"><span class="pre">name</span></tt> parameter in the API that can be used to identify the station.
This appears as <tt class="docutils literal"><span class="pre">id</span></tt> in <tt class="docutils literal"><span class="pre">weather.ini</span></tt>.
Make sure you don&#8217;t choose a name that is already in use.</p>
</div>
<div class="section" id="pws-weather">
<h2>PWS Weather<a class="headerlink" href="#pws-weather" title="Permalink to this headline">¶</a></h2>
<p>Handled by the <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> module.
See <a class="reference internal" href="#weather-underground"><em>Weather Underground</em></a> for general setup instructions.</p>
<ul>
<li><p class="first">Create account: <a class="reference external" href="http://www.pwsweather.com/register.php">http://www.pwsweather.com/register.php</a></p>
</li>
<li><p class="first">API based on WU protocol: <a class="reference external" href="http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol">http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol</a></p>
</li>
<li><p class="first">Example <tt class="docutils literal"><span class="pre">weather.ini</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">pwsweather</span><span class="p">]</span>
<span class="n">station</span> <span class="o">=</span> <span class="n">ABCDEFGH1</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">xxxxxxx</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="weather-underground">
<span id="id2"></span><h2>Weather Underground<a class="headerlink" href="#weather-underground" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Create account: <a class="reference external" href="http://www.wunderground.com/members/signup.asp">http://www.wunderground.com/members/signup.asp</a></p>
</li>
<li><p class="first">API: <a class="reference external" href="http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol">http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol</a></p>
</li>
<li><p class="first">Example <tt class="docutils literal"><span class="pre">weather.ini</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">underground</span><span class="p">]</span>
<span class="n">station</span> <span class="o">=</span> <span class="n">ABCDEFGH1</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">xxxxxxx</span>
</pre></div>
</div>
</li>
</ul>
<p><a class="reference external" href="http://www.wunderground.com/">Weather Underground</a> (or Wunderground) is one of the longest established weather websites in the world.
The <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> module handles this communication for a range of online services.</p>
<p>The first step is to set up a Weather Underground account, then use the &#8220;Add A Station&#8221; form to provide details of your station such as its location and type.
You should then get a station ID and password &#8211; make a note of these.</p>
<p>Now stop any pywws software that&#8217;s running, then try using <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> directly:</p>
<div class="highlight-python"><pre>python -m pywws.toservice ~/weather/data underground</pre>
</div>
<p>This should fail, as you haven&#8217;t set the station ID or password yet, but it creates entries in <tt class="docutils literal"><span class="pre">weather.ini</span></tt> for you to edit.
Edit <tt class="docutils literal"><span class="pre">weather.ini</span></tt> and find the <tt class="docutils literal"><span class="pre">[underground]</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">underground</span><span class="p">]</span>
<span class="n">station</span> <span class="o">=</span> <span class="n">unknown</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">unknown</span>
</pre></div>
</div>
<p>Replace the <tt class="docutils literal"><span class="pre">unknown</span></tt> values with your station ID and password.</p>
<p>Now try <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> again:</p>
<div class="highlight-python"><pre>python -m pywws.toservice ~/weather/data underground</pre>
</div>
<p>If this worked then you can upload your last 7 days worth of data.
Note that this might take quite a long time, especially if you have a short &#8216;logging interval&#8217;.
First edit <tt class="docutils literal"><span class="pre">status.ini</span></tt> and remove the <tt class="docutils literal"><span class="pre">underground</span></tt> entry from the <tt class="docutils literal"><span class="pre">[last</span> <span class="pre">update]</span></tt> section.
Then run <a class="reference internal" href="../api/pywws.toservice.html#module-pywws.toservice" title="pywws.toservice"><tt class="xref py py-mod docutils literal"><span class="pre">pywws.toservice</span></tt></a> with the &#8216;catchup&#8217; option, and high verbosity so you can see it working:</p>
<div class="highlight-python"><pre>python -m pywws.toservice -vvc ~/weather/data underground</pre>
</div>
<p>Once everything is working, you can add &#8216;underground&#8217; to the <tt class="docutils literal"><span class="pre">[logged]</span></tt> tasks section in <tt class="docutils literal"><span class="pre">weather.ini</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">logged</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="rapidfire-updates">
<h3>&#8220;RapidFire&#8221; updates<a class="headerlink" href="#rapidfire-updates" title="Permalink to this headline">¶</a></h3>
<p>Weather Underground has a second upload URL for real time updates as little as 2.5 seconds apart.
If you run pywws in &#8216;live logging&#8217; mode (see <a class="reference internal" href="livelogging.html"><em>How to set up &#8216;live&#8217; logging with pywws</em></a>) you can use this to send updates every 48 seconds, by adding &#8216;underground_rf&#8217; to the <tt class="docutils literal"><span class="pre">[live]</span></tt> tasks section in <tt class="docutils literal"><span class="pre">weather.ini</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground_rf&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">logged</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Make sure you still have an &#8216;underground&#8217; service in <tt class="docutils literal"><span class="pre">[logged]</span></tt> or <tt class="docutils literal"><span class="pre">[hourly]</span></tt>.
This will ensure that &#8216;catchup&#8217; records are sent to fill in any gaps if your station goes offline for some reason.</p>
<hr class="docutils" />
<p>Comments or questions? Please subscribe to the pywws mailing list <a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pywws_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to integrate pywws with various weather services</a><ul>
<li><a class="reference internal" href="#yowindow">YoWindow</a></li>
<li><a class="reference internal" href="#twitter">Twitter</a></li>
<li><a class="reference internal" href="#uk-met-office">UK Met Office</a></li>
<li><a class="reference internal" href="#open-weather-map">Open Weather Map</a></li>
<li><a class="reference internal" href="#pws-weather">PWS Weather</a></li>
<li><a class="reference internal" href="#weather-underground">Weather Underground</a><ul>
<li><a class="reference internal" href="#rapidfire-updates">&#8220;RapidFire&#8221; updates</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="livelogging.html"
                        title="previous chapter">How to set up &#8216;live&#8217; logging with pywws</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="twitter.html"
                        title="next chapter">How to configure pywws to post messages to Twitter</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="twitter.html" title="How to configure pywws to post messages to Twitter"
             >next</a> |</li>
        <li class="right" >
          <a href="livelogging.html" title="How to set up ‘live’ logging with pywws"
             >previous</a> |</li>
        <li><a href="../index.html">pywws 13.12.dev1117 documentation</a> &raquo;</li>
          <li><a href="index.html" >User guides</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-13, Jim Easterbrook.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>