<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OAUTH2 Fantastico Tokens</title>
    
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tokens_storage.html" title="OAUTH2 Fantastico Tokens Storage"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="simple_api_example.html" title="Example (Simple Menu API)"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">fantastico 0.5.1-b131 documentation</a> &raquo;</li>
          <li><a href="../features.html" >Fantastico features</a> &raquo;</li>
          <li><a href="../oauth2.html" accesskey="U">OAUTH2</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="oauth2-fantastico-tokens">
<h1>OAUTH2 Fantastico Tokens</h1>
<p>In Fantastico, authorization codes and access tokens are opaque values for all humans (encrypted). They contain information into
them used for easily invalidating them and expiring them. In addition, they do not require a persistent store and allows
endpoint authorization without storage calls (increased performance and response time).</p>
<div class="section" id="authorization-code-structure">
<h2>Authorization code structure</h2>
<p>Authorization codes are opaque values for humans with the following structure (encrypted):</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;scopes&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;simple_menus.create&quot;</span><span class="p">,</span> <span class="s2">&quot;simple_menus.update&quot;</span><span class="p">,</span> <span class="s2">&quot;simple_menus.delete&quot;</span><span class="p">],</span>
   <span class="s2">&quot;userid&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="s2">&quot;unique generated value&quot;</span><span class="p">,</span>
   <span class="s2">&quot;creation_time&quot;</span><span class="o">:</span> <span class="s2">&quot;1380137542&quot;</span><span class="p">,</span>
   <span class="s2">&quot;expiration_time&quot;</span><span class="o">:</span> <span class="s2">&quot;1380137651&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Each authorization code from Fantastico OAUTH2 implementation contains the following fields:</p>
<blockquote>
<div><ol class="arabic simple">
<li>scopes<ul>
<li>A JSON list of scopes for which this token was generated. (this will be transmitted to the access token)</li>
</ul>
</li>
<li>user id<ul>
<li>user unique identifier (possibly email address) which can be used to obtain additional information about the user.</li>
</ul>
</li>
<li>state<ul>
<li>A key uniquely generated and hard to guess.</li>
<li>It is used to protect against <strong>Cross Site Request Forgery (CSRF)</strong>.</li>
</ul>
</li>
<li>creation_time<ul>
<li>The timestamp when this token was generated.</li>
</ul>
</li>
<li>expiration_time<ul>
<li>The timestamp when this token expires (must be a really short period - 1min).</li>
</ul>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="access-token-structure">
<h2>Access token structure</h2>
<div class="highlight-javascript"><pre>{
   &quot;code&quot;: &quot;&lt;authorization code used for obtaining the token&gt;&quot;,
   &quot;scopes&quot;: [&quot;simple_menus.create&quot;, &quot;simple_menus.update&quot;, &quot;simple_menus.delete&quot;],
   &quot;user&quot;: {
      &quot;id&quot;: 1,
      &quot;email: &quot;john.doe@gmail.com&quot;,
      &quot;first_name&quot;: &quot;John&quot;,
      &quot;last_name&quot;: &quot;Doe&quot;
   },
   &quot;state&quot;: &quot;unique generated value&quot;,
   &quot;creation_time&quot;: &quot;1380137651&quot;,
   &quot;expiration_time&quot;: &quot;1380163800&quot;
}</pre>
</div>
<p>Each access token from Fantastico OAUTH2 implementation contains the following fields:</p>
<blockquote>
<div><ol class="arabic simple">
<li>code<ul>
<li>The authorization code used for obtaining this access token. It only applies for authorization code grant type.</li>
</ul>
</li>
<li>scopes<ul>
<li>A JSON list of scopes for which this token was generated. (used for endpoint authorization).</li>
</ul>
</li>
<li>user id<ul>
<li>User unique identifier (used for obtaining additional information about an user).</li>
</ul>
</li>
<li>user email address<ul>
<li>User email address (as stored in his profile).</li>
</ul>
</li>
<li>user first name<ul>
<li>Might be used in certain secure components.</li>
</ul>
</li>
<li>user last name<ul>
<li>Might be used in certain secure components.</li>
</ul>
</li>
<li>state<ul>
<li>A key uniquely generated and hard to guess.</li>
<li>It is used to protect against <strong>Cross Site Request Forgery (CSRF)</strong>.</li>
</ul>
</li>
<li>creation_time<ul>
<li>A timestamp indicating the date when this token was generated.</li>
</ul>
</li>
<li>expiration_time<ul>
<li>A timestamp indicating the date when this token is going to expire.</li>
</ul>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="obtaining-access-tokens">
<h2>Obtaining access tokens</h2>
<p>In order to obtain an access token which can be used for calling <strong>Fantastico</strong> APIs requires the following:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Obtain an authorization code</p>
<div class="highlight-html"><pre>GET /authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;state=xyz&amp;redirect_uri=https%3A%2F%2Fclient%2fantasticoproject%2Ecom%2Fcb&amp;scopes=simple_menus.create%20simple_menus.update%20simple_menus.delete HTTP/1.1
Host: oauth2.fantasticoproject.com</pre>
</div>
</li>
<li><p class="first">client.fantasticoproject.com/cb?code=&lt;unique one time only code&gt;&amp;state=&lt;unique generated state&gt;</p>
<ul>
<li><p class="first">Automatically obtain an access token starting from the given autorization code.</p>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre>POST /token HTTP/1.1
Host: client.fantasticoproject.com
Content-Type: application/json

{
    &quot;grant_type&quot;: &quot;authorization_code&quot;,
    &quot;code&quot;: <span class="nt">&lt;unique</span> <span class="na">one</span> <span class="na">time</span> <span class="na">only</span> <span class="na">code</span><span class="nt">&gt;</span>,
    &quot;redirect_uri&quot;: &quot;https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb&quot;,
    &quot;state&quot;: &quot;unique generated value&quot;
}
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
<li><p class="first">provide access token for client usage</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;access_token&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;encrypted token containing all specified information&quot;</span><span class="p">,</span>
   <span class="s2">&quot;token_type&quot;</span><span class="o">:</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
   <span class="s2">&quot;expires_in&quot;</span><span class="o">:</span> <span class="mi">900</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer">
        &copy; Copyright 2013, Radu Viorel Cosnita.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42788125-1', 'rcosnita.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>