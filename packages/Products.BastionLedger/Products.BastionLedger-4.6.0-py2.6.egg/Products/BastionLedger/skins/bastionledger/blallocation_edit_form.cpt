<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>
 
<body>
  <div metal:fill-slot="main" 
       tal:define="allocations context/allocationValues;
                   utool context/@@plone_portal_state/portal_url;
                   shareholders context/thisLedger;
                   definitions shareholders/shareDefinitionValues">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
                      tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/> Allocations</h1>

      <form action="" name="edit_form"
            tal:attributes="action string:${context/getId}/${template/getId}" method="post">

          <input type="hidden"
                 name="id"
                 tal:attributes="value python:request.get('id', here.getId())"
                 />

             <div tal:define="error errors/title|nothing;
                  Title request/title | context/Title"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="title" i18n:translate="label_title">Title</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="title title_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="title" name="title" value="" size="50"
                         tal:attributes="value Title;"/>
             </div>

          <div tal:define="error errors/type|nothing;
                           Type request/type | context/getId"
                           tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Share</div>

                 <div tal:content="error">Validation error output</div>

                 <select name="definition">
                   <option tal:repeat="a definitions"
                           tal:content="a/title"
                           tal:attributes="value a/getId; 
                                           selected python: context.definition == a.getId() and 1 or 0"/>
                 </select>
          </div>

          <div tal:define="error errors/quantity|nothing;
                           Quantity request/quantity | context/quantity"
                           tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Quantity</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" name="quantity:int" value="1" size="10"
                        tal:attributes="value Quantity"/>
           </div>

          <div tal:define="error errors/percentage_paid|nothing;
                           PercentagePaid request/percentage_paid | context/percentage_paid"
                           tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Percentage Paid</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" name="percentage_paid:float" value="100" size="7"
                        tal:attributes="value PercentagePaid"/>
           </div>

          <div tal:define="error errors/issue_date|nothing;
                           Issued request/issue_date | context/issue_date;
                           inputvalue Issued;
                           formname string:edit_form;
                           show_hm python: False;
                           inputname string:issue_date;"
               tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Issue Date</div>

                 <div tal:content="error">Validation error output</div>

                 <span metal:use-macro="here/calendar_macros/macros/calendarDatePickerBox"/>
           </div>

           <input type="submit" class="context" name="form.button.Edit" value=" Edit "/>

     <input type="hidden" name="form.submitted" value="1"/>
    </form>

  </div>
 
</body>
</html>
