#!/bin/bash
# Linux Python package proxy script
make() {
	if [ ! -d "$HOME/.diwnotifier" ]; then
		cat /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/data/ascii.txt
		mkdir $HOME/.diwnotifier
		mkdir $HOME/.diwnotifier/etc
		cp -r /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/data/var/ $HOME/.diwnotifier/
	fi
}
if [ $1 = "-e" ] 2> /dev/null
then
	make
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py -e
elif [ $1 = "-h" ] 2> /dev/null
then
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py -h
elif [ $1 = "-v" ] 2> /dev/null
then
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py -v
elif [ $1 = "-a" ] 2> /dev/null
then
	make
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py -a
elif [ $1 = "--remove" ] 2> /dev/null
then
	if [ "$(id -u)" == "0" ]; then
		kill -9 $( pgrep -f "/usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py" ) 2> /dev/null

		sed -i /DIWNotifier-0.9.2/d /usr/local/lib/python2.7/dist-packages/easy-install.pth
		echo "entry removed from /usr/local/lib/python2.7/dist-packages/easy-install.pth"

		rm -rf /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/
		echo "rm -rf /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/"

		rm /usr/local/bin/diwnotifier
		echo "rm /usr/local/bin/diwnotifier" 
	else
		 echo "--remove option must be run as root"
	fi
	
elif [ $# -eq 0 ]
  then
	make
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py
else
	python /usr/local/lib/python2.7/dist-packages/DIWNotifier-0.9.2-py2.7.egg/diwnotifier/diwnotifier.py -h
fi
