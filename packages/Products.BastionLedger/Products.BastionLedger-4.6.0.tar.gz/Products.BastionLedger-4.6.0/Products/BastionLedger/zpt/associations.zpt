<html tal:replace="structure context/manage_page_header"/>

    <span tal:replace="structure context/manage_tabs"/>

    <p class="form-help">Tags allow you to make logical groupings of accounts.  It is truely up
                         to you as to what the exact semantic meaning of the grouping represents.</p>

    <p class="form-help">We also use tags to independently define important accounts across 
                         jurisdictions so that our generalised processes apply to all chart types.</p>

    <form action="" tal:attributes="action request/URL1" method="post"
          tal:define="associations context/associations">
      <table border="0" cellpadding="2" cellspacing="0">
         <tr class="list-header">
            <td width="16">&nbsp;</td>
            <td class="form-label">Tag</td>
            <td class="form-label">Associates</td>
         </tr>
         <tr tal:repeat="tag associations"
             tal:attributes="class python: repeat['tag'].odd() and 'row-hilite' or 'row-normal'" >
            <td valign="top">
               <input type="checkbox" name="ids:list" value=""
                      tal:attributes="value tag/tag" tal:condition="not: tag/global"/>
            </td>
            <td valign="top" class="form-element" tal:content="tag/tag"/>
            <td valign="top" class="form-element">
                <div tal:repeat="acct python: context.accountValues(accno=tag['accno'])">
                   <a href="" tal:attributes="href string:${acct/getId}/manage_workspace"
                      tal:content="acct/prettyTitle"/>
                </div>
            </td>
          </tr>
         <tr tal:repeat="assoc context/missingAssociations"
             tal:attributes="class python: repeat['assoc'].odd() and 'row-hilite' or 'row-normal'" >
            <td valign="top"/>
            <td valign="top" class="form-element" style="font-color: red;" tal:content="assoc/getId"/>
            <td valign="top" class="form-element">
                <div tal:repeat="acct assoc/accno" tal:content="acct"/>
            </td>
          </tr>
          <tr>
            <td colspan="3" valign="top" 
                tal:define="do_local python: filter(lambda x:not x['global'], associations)">
                <input  tal:condition="do_local" valign="top" type="submit" 
                        name="manage_delTags:method" value="Delete"/>
                <input  tal:condition="do_local" valign="top" type="submit" 
                        name="manage_renameTags:method" value="Rename"/>
                <input  valign="top" type="text" name="tag" size="15"/>
                <select valign="top" name="accnos:list" multiple size="2">
                    <option tal:repeat="account context/accountValues"
                            tal:attributes="value account/accno"
                            tal:content="account/prettyTitle"/>
                </select>
                <input valign="top" type="submit" name="manage_addTag:method" value=" Add "/>
            </td>
          </tr>
      </table>
    </form>
<html tal:replace="structure context/manage_page_footer"/>





