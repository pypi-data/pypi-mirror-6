{% extends "base.html" %}

{% block title %}{{ device_name }}{% endblock %}

{% block sub_title %}{% endblock %}

{% block content %}

    <div class="row">

        {% for device_name, series_list in device_readings.items() %}

            {% for series in series_list %}

                <div class="col-l-3 col-xs-6">

                    <div class="small-box bg-{{ loop.cycle('aqua', 'green', 'yellow', 'red', 'blue') }}">

                        <div class="inner">

                            <h3>
                                {{ series.value }}
                            </h3>

                            <p>
                                {{ series.name }}
                            </p>
                            <p>
                                <time datetime="{{ series.created_at }}">
                                        {{ series.created_at }}
                                </time>
                            </p>

                        </div>

                    </div>

                </div>

            {% endfor %}


        {% endfor %}

    </div>


    {% for device_name, series_list in device_readings.items() %}

        {% for series in series_list %}

            <div class="row">
                <div class="col-xs-12">
                    <div class="box box-primary">
                        <div class="box-header">
                            <i class="fa fa-bar-chart-o"></i>
                            <h3 class="box-title">{{ series.name }}</h3>
                        </div>
                        <div class="box-body">
                            <div id="graph_{{ device_name|replace(" ", "_") }}_{{ series.name }}" style="height: 300px;"></div>
                        </div>
                    </div>

                </div>
            </div>

        {% endfor %}

    {% endfor %}


{% endblock %}

{% block extra_js %}

    <script src="{{ url_for('static', filename='js/home.js') }}" type="text/javascript"></script>

    <script type="text/javascript">

        $(function(){

        {% for device_name, series_list in device_readings.items() %}
        {% for series in series_list %}
        device_series_graph('{{ series.device_id }}', '{{ series.series_id }}', '#graph_{{ device_name|replace(" ", "_") }}_{{ series.name }}');
        {% endfor %}
        {% endfor %}

        });

    </script>

{% endblock %}
