<dl class="portlet portlet-yearlist"
    i18n:domain="plone"
    tal:define="showall python:request.get('showallyears', False)">

    <dt class="portletHeader" tal:condition="nothing">
        <span class="portletTopLeft"></span>
        Years:
        <span class="portletTopRight"></span>
    </dt>
    
    <tal:buttons>
            <a class="portletButton" href="?showallyears=true" tal:condition="not: showall">All events</a>
            <a class="portletButton" href="./" tal:condition="showall">Documented only</a>
    </tal:buttons>
    
    <a class="portletButton visible" href="" tal:condition="not: showall" tal:attributes="href python:here.restrictedTraverse('archive').absolute_url()">Archive</a>

    <tal:block define="years view/getYears">
        <dd class="portletItem" tal:repeat="year years">
            <ul tal:attributes="class python:view.isCurrentYear(year) and 'currentYear' or ''">
                <li class="yearItem" tal:attributes="class python: view.yearIsDocumented(year) and 'yearItem' or 'yearItem undocYear'"><a href="" tal:content="year" tal:attributes="href python: '../../archive/%s'%year">2012</a></li>
                <li class="eventListingItem" tal:condition="python:view.isCurrentYear(year)">
                    <ul>
                        <li class="eventItem" tal:repeat="event python:showall and view.getEventsForYear(year) or view.getEventsForYear(year, only_documented=True)">
                            <a href="" tal:content="python:view.clip(event.Title, 30)" tal:attributes="href python:event.getURL();
                                                                                                                                    class python:here.id == event.id and 'currentEvent' or ''">Name of the event...</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </dd>
    </tal:block>
</dl>
