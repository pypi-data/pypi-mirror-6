(function(){var b={}.hasOwnProperty,c=function(g,e){for(var d in e){if(b.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g},a=function(d,e){return function(){return d.apply(e,arguments)}};window.Controls.textbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){return'<input class="control textbox '+(this.s(this.properties.style))+'" \n        '+(this.properties.readonly?"readonly":"")+'\n        type="text" />'};d.prototype.setupDom=function(f){d.__super__.setupDom.call(this,f);this.input=this.dom;this.input.value=this.properties.value;this.input.addEventListener("change",(function(g){return function(){return g.markChanged()}})(this),false);return this};d.prototype.getValue=function(){return $(this.input).val()};d.prototype.detectUpdates=function(){var h,f,g;f={};g=this.getValue();h=this.properties.value||"";if(this.properties.type==="integer"){g=parseInt(g)}if(g!==h){f.value=g}this.properties.value=g;return f};return d})(window.Control);window.Controls.passwordbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){return'<input class="control textbox '+this.properties.style+'" \n        type="password" />'};d.prototype.setupDom=function(f){d.__super__.setupDom.call(this,f);this.input=$(this.dom);this.input.val(this.properties.value);this.input.change((function(g){return function(){return g.markChanged()}})(this));return this};return d})(window.Controls.textbox);window.Controls.editable=(function(e){c(d,e);function d(){this.goEditMode=a(this.goEditMode,this);this.goViewMode=a(this.goViewMode,this);return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f,g;f=_make_icon(this.properties.icon);return'<div class="control editable">\n    <div class="control label">'+f+" <span>"+(this.s((g=this.properties.placeholder)!=null?g:this.properties.value))+'</span></div>\n    <input class="control textbox '+this.properties.style+'" type="text" />\n</div>'};d.prototype.setupDom=function(f){d.__super__.setupDom.call(this,f);this.label=$(this.dom).find(".label");this.input=$(this.dom).find("input");this.input.val(this.properties.value||"");this.input.hide();this.input.change((function(g){return function(){return g.markChanged()}})(this));this.editmode=false;this.label.click(this.goEditMode);this.input.blur(this.goViewMode);this.input.keyup((function(g){return function(h){if(h.which===13){g.goViewMode()}return g.cancel(h)}})(this));return this};d.prototype.goViewMode=function(){var f;this.editmode=false;this.label.find(">span").html((f=this.properties.placeholder)!=null?f:this.input.val());this.input.hide();return this.label.show()};d.prototype.goEditMode=function(f){this.editmode=true;this.label.hide();this.input.show();this.input.focus();f.stopPropagation();return f.preventDefault()};d.prototype.detectUpdates=function(){var f,g;f={};if(this.editmode){goViewMode()}g=this.input.val();if(this.properties.type==="integer"){g=parseInt(g)}if(g!==this.properties.value){f.value=g}return f};return d})(window.Control);window.Controls.checkbox=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){return'<div class="control checkbox">\n    <input \n        id="'+this.properties.uid+'"\n        type="checkbox" \n        '+(this.properties.value?'checked="checked"':"")+' \n    />\n    <label for="'+this.properties.uid+'">\n        <div class="tick">\n            <i class="icon-ok"></i>\n        </div>\n    </label>\n    <div class="control label">'+(this.s(this.properties.text))+"</div>\n</div>"};e.prototype.setupDom=function(f){e.__super__.setupDom.call(this,f);this.input=$(this.dom).find("input");this.input.change((function(g){return function(){return g.markChanged()}})(this));return this};e.prototype.detectUpdates=function(){var g,f;f={};g=this.input.is(":checked");if(g!==this.properties.value){f.value=g}this.properties.value=g;return f};return e})(window.Control);window.Controls.dropdown=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){return'<div><select class="control dropdown"></select></div>'};e.prototype.setupDom=function(j){var f,k,h,g;e.__super__.setupDom.call(this,j);this.input=$(this.dom).find("select");this.data=[];k=(function(i){return function(l){return i.input.append('<option value="'+l+'" '+(l===i.properties.index?"selected":"")+">"+(i.s(i.properties.labels[l]))+"</option>")}})(this);for(f=h=0,g=this.properties.labels.length;0<=g?h<g:h>g;f=0<=g?++h:--h){k(f)}this.input.select2();this.input.change((function(i){return function(){return i.markChanged()}})(this));if(this.properties.server){this.input.change((function(i){return function(l){i.event("change",{});return i.cancel(l)}})(this))}return this};e.prototype.detectUpdates=function(){var f,g;g={};f=parseInt(this.input.val());if(f!==this.properties.index){g.index=f}this.properties.index=f;return g};return e})(window.Control);window.Controls.combobox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){return'<input class="control combobox" type="text" value="'+this.properties.value+'" />'};d.prototype.setupDom=function(j){var f,k,h,g;d.__super__.setupDom.call(this,j);this.input=$(this.dom);this.input.change((function(i){return function(){return i.markChanged()}})(this));this.data=[];k=(function(i){return function(l){return i.data.push({label:i.properties.labels[l],value:i.properties.values[l]})}})(this);for(f=h=0,g=this.properties.labels.length;0<=g?h<g:h>g;f=0<=g?++h:--h){k(f)}if(this.properties.separator!==null){this.input.autocomplete({source:(function(i){return function(m,l){var n;n=i.getVals();return l($.ui.autocomplete.filter(i.data,n.pop()))}})(this),focus:(function(i){return function(){return false}})(this),select:(function(i){return function(l,n){var m;m=i.getVals();m.pop();m.push(n.item.value);i.input.val(m.join(i.properties.separator));return false}})(this),minLength:0})}else{this.input.autocomplete({source:this.data,minLength:0})}this.input.click((function(i){return function(){return i.input.autocomplete("search","")}})(this));return this};d.prototype.getVals=function(){return this.input.val().split(this.properties.separator)};d.prototype.detectUpdates=function(){var f,g;f={};g=this.input.val();if(this.properties.type==="integer"){g=parseInt(g)}if(g!==this.properties.value){f.value=g}this.properties.value=g;return f};return d})(window.Control);window.Controls.fileupload=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){return'<div class="control fileupload">\n    <input type="file" />\n    \n    <div class="full-overlay">\n        <div class="content">\n            <div class="inner">\n                <h1>Upload</h1>\n                <div class="pb"></div>\n            </div>\n        </div>\n    </div>  \n</div>'};e.prototype.setupDom=function(f){e.__super__.setupDom.call(this,f);this.progress=new window.Controls.progressbar(this.ui,{width:750},[]);this.progress.setupDom();$(this.dom).find(".pb").append($(this.progress.dom));this.input=$(this.dom).find("input")[0];this.input.addEventListener("change",(function(g){return function(i){var k,h,j;h=g.input.files[0];j=new XMLHttpRequest();j.file=h;if(j.upload){j.upload.onprogress=function(o){var l,m,n;l=o.position||o.loaded;n=o.totalSize||o.total;m=1*l/n;return g.progress.setProgress(m)}}k=new FormData();k.append("file",h);j.open("post",g.properties.target,true);j.send(k);return $(g.dom).find(".full-overlay").show()}})(this),false);return $(this.dom).find(".full-overlay").hide()};return e})(window.Control);window.Controls.paging=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){return'<div class="control paging">\n    <div class="control label">Page:&nbsp;</div>\n    <a class="prev control button style-mini"><i class="icon-arrow-left"></i></a>\n    <select></select>\n    <a class="next control button style-mini"><i class="icon-arrow-right"></i></a>\n</div>'};d.prototype.setupDom=function(j){var f,h,g;d.__super__.setupDom.call(this,j);this.select=$(this.dom).find("select");for(f=h=0,g=this.properties.length;0<=g?h<g:h>g;f=0<=g?++h:--h){this.select.append($$('<option value="'+(f+1)+'">'+(f+1)+"</option>"))}this.select.val(this.properties.active+1);this.select.select2({width:"80px"});this.prev=$(this.dom).find(".prev");this.next=$(this.dom).find(".next");if(this.properties.active===0){this.prev.hide()}if(this.properties.active===this.properties.length-1){this.next.hide()}if(!this.properties.length){$(this.dom).hide()}this.prev.click((function(i){return function(){return i.set(i.properties.active-1)}})(this));this.next.click((function(i){return function(){return i.set(i.properties.active+1)}})(this));this.select.change((function(i){return function(){var k;k=parseInt(i.select.val())-1;console.log(k,i.properties.active);if(k!==i.properties.active){return i.set(k)}}})(this));return this};d.prototype.set=function(f){return this.event("switch",{page:f})};return d})(window.Control);window.Controls.pathbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){return'<div class="control container pathbox --child-container">\n    <children>\n</div>'};d.prototype.setupDom=function(f){d.__super__.setupDom.call(this,f);this.textbox=new Controls.textbox(this.ui,{value:this.properties.value}).setupDom();this.button=new Controls.button(this.ui,{style:"mini",icon:this.properties.directory?"folder-close":"file",text:""}).setupDom();this.append(this.textbox);this.append(this.button);this.button.on_click=(function(g){return function(){return g.event("start",{})}})(this);return this};d.prototype.detectUpdates=function(){return this.textbox.detectUpdates()};return d})(window.Control)}).call(this);