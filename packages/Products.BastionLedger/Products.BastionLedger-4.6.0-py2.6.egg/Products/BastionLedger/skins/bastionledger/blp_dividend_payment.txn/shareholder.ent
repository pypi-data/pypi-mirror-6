##parameters=account=None,args=[],kw={}
##title=Dividend Paid
from Products.BastionBanking.ZCurrency import ZCurrency
from Products.BastionLedger.BLSubsidiaryEntry import BLSubsidiaryEntry

share_type = kw['share_type']
effective = kw['effective']
allotted = context.shareDefinition(share_type).allotted(effective)
quantity = account.allocationQuantity(share_type, effective)

return [ BLSubsidiaryEntry(account.getId(),
                           script.title,
                           account.getId(),
                           ZCurrency(script.currency, kw['total_amount'] * quantity / allotted),
                           script.getId()) ]

