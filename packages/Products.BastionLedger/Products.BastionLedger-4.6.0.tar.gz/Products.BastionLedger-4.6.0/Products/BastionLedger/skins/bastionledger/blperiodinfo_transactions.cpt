<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <div metal:fill-slot="main"
       tal:define="txns context/blTransactions;
                   utool context/@@plone_portal_state/portal_url;
                   editmode python: context.SecurityCheckPermission('BastionLedger: Manage')">
 
      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;
          <span tal:replace="context/Title | context/getId"/></h1>

      <form action="" method="post" tal:attributes="action template/getId">
        <table border="0" cellpadding="2" cellspacing="0" width="100%" summary="" tal:condition="txns">
           <tr class="list-header">
               <td tal:condition="editmode"/>
               <td/>
               <td class="list-item">Number</td>
               <td class="list-item">Status</td>
               <td class="list-item" align="right">Amount</td>
               <td>&nbsp;</td>
               <td class="list-item">Entered By</td>
               <td class="list-item">Effective</td>
               <td class="list-item">Last Modified</td>
           </tr>
           <tr class="" tal:repeat="item txns"
               tal:attributes="class python: repeat['item'].odd() and 'odd' or 'even'">
               <td class="list-item" tal:condition="editmode">
                  <input type="checkbox" name="ids:list" value="" tal:attributes="value item/getId">
               </td>
               <td class="list-item">
                   <img src="" tal:attributes="src item/icon"/></td>
               <td class="list-item">
                   <a href="" tal:attributes="href item/absolute_url"  
                              tal:content="item/title_and_id"/>
               </td>
               <td class="list-item" tal:content="item/status"/>
               <td class="list-item" align="right" tal:content="item/debitTotal"/>
               <td>&nbsp;</td>
               <td class="list-item" tal:content="item/entered_by"/>
               <td class="list-item" 
                   tal:content="python: item.effective().strftime('%Y-%m-%d %H:%M')"/>
               <td class="list-item" 
                   tal:content="python: item.bobobase_modification_time().strftime('%Y-%m-%d %H:%M')"/>
           </tr>
           <tr tal:condition="editmode">
               <td colspan="9">
                  <input type="submit" name="form.button.Delete" value=" Delete " class="standalone"/>
                  <input type="submit" name="form.button.Reverse" value=" Reverse " class="context"/>
               </td>
           </tr>
        </table>
      </form>

  </div>

</html>
