Releasing clld
==============

- Start a release

  $ git flow release start <release number>

- Do platform test via tox:

  $ tox -r

  Make sure statement coverage is at 100%::

- Make sure all scaffold tests pass (Py 2.7, 3.2):

  $ python clld/scaffolds/tests.py

- Make sure javascript tests pass with coverage at 100%::

  $ java -jar tools/jsTestDriver/JsTestDriver-1.3.5.jar --tests all --browser chromium-browser --port 9876

- Make sure docs render OK::

  $ cd docs
  $ make clean html

- Update translations (using a py3 env with babel patched for py3 compatibility).

  $ python setup.py compile_catalog

- Change clld/__init__.py to the new version number.

- Change setup.py version to the new version number.

- Change docs/conf.py version to the new version number.

- Change CHANGES.txt heading to reflect the new version number.

- Create a release tag:

  $ git flow release finish <release number>

- Push to github:

  $ git push origin matching
  $ git push --tags

- Test pypi package:

  $ make_package.sh

- Make sure your system Python has ``setuptools-git`` installed and release to
  PyPI::

  $ python setup.py sdist register upload

