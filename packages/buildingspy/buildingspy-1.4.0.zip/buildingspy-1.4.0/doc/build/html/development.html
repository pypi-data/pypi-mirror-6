

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development &mdash; BuildingsPy documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="BuildingsPy documentation" href="index.html" />
    <link rel="next" title="Copyright and License" href="legal.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
  </head>
  <body>
<div class="headerStyle">
<img src="_static/lbl-logo.png" alt="LBL logo" />
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="legal.html" title="Copyright and License"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> |</li>
    <li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt;
    <a href="http://simulationresearch.lbl.gov/modelica/buildingspy">BuildingsPy</a></li>
    </br>
<!--    
        <li><a href="index.html">BuildingsPy documentation</a> &raquo;</li> -->
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="examples.html"
                        title="previous chapter">Examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="legal.html"
                        title="next chapter">Copyright and License</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-buildingspy.development">
<span id="development"></span><h1>Development<a class="headerlink" href="#module-buildingspy.development" title="Permalink to this headline">¶</a></h1>
<p>This module contains the class <em>Tester</em> that runs
the unit tests of the <cite>Buildings</cite> library, and the
class <em>Validator</em> that validates the html code of the info section
of the <tt class="docutils literal"><span class="pre">.mo</span></tt> files.</p>
<span class="target" id="module-buildingspy.development.regressiontest"></span><dl class="class">
<dt id="buildingspy.development.regressiontest.Tester">
<em class="property">class </em><tt class="descclassname">buildingspy.development.regressiontest.</tt><tt class="descname">Tester</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that runs all regression tests using Dymola.</p>
<p>Initiate with the following optional arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>checkHtml</strong> &#8211; bool (default=True). Specify whether to load tidylib and
perform validation of html documentation</li>
<li><strong>executable</strong> &#8211; {&#8216;dymola&#8217;, &#8216;omc&#8217;}.  Default is &#8216;dymola&#8217;, specifies the
executable to use for running the regression test with <tt class="xref py py-func docutils literal"><span class="pre">run()</span></tt>.</li>
<li><strong>cleanup</strong> &#8211; bool (default=True).  Specify whether to delete temporary directories.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This class can be used to run all regression tests.
It searches the directory <tt class="docutils literal"><span class="pre">CURRENT_DIRECTORY\Resources\Scripts\Dymola</span></tt> for
all <tt class="docutils literal"><span class="pre">*.mos</span></tt> files that contain the string <tt class="docutils literal"><span class="pre">simulate</span></tt>,
where <tt class="docutils literal"><span class="pre">CURRENT_DIRECTORY</span></tt> is the name of the directory in which the Python
script is started, as returned by the function <a class="reference internal" href="#buildingspy.development.regressiontest.Tester.getLibraryName" title="buildingspy.development.regressiontest.Tester.getLibraryName"><tt class="xref py py-func docutils literal"><span class="pre">getLibraryName()</span></tt></a>.
All these files will be executed as part of the regression tests.
Any variables or parameters that are plotted by these <tt class="docutils literal"><span class="pre">*.mos</span></tt> files
will be compared to previous results that are stored in
<tt class="docutils literal"><span class="pre">CURRENT_DIRECTORY\Resources\ReferenceResults\Dymola</span></tt>.
If no reference results exist, then they will be created.
Otherwise, the accuracy of the new results is compared to the
reference results. If they differ by more than a prescibed
tolerance, a plot such as the one below is shown.</p>
<div class="figure">
<img alt="_images/unitTestPlot.png" src="_images/unitTestPlot.png" style="width: 560px;" />
<p class="caption">Plot that compares the new results (solid line) of the regression test with the old results (dotted line).
The blue line indicates the time where the largest error occurs.</p>
</div>
<p>In this plot, the vertical line indicates the time where the biggest error
occurs.
The user is then asked to accept or reject the new results.</p>
<p>To run the regression tests, type</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">buildingspy.development.regressiontest</span> <span class="kn">as</span> <span class="nn">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">Tester</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myMoLib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;buildingspy&quot;</span><span class="p">,</span> <span class="s">&quot;tests&quot;</span><span class="p">,</span> <span class="s">&quot;MyModelicaLibrary&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">setLibraryRoot</span><span class="p">(</span><span class="n">myMoLib</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> 
<span class="go">Using  1  of ... processors to run unit tests.</span>
<span class="go">Number of models   :  1</span>
<span class="go">          blocks   :  0</span>
<span class="go">          functions:  0</span>
<span class="go">Generated  1  regression tests.</span>

<span class="go">Script that runs unit tests had 0 warnings and 0 errors.</span>

<span class="go">See &#39;unitTests.log&#39; for details.</span>
<span class="go">Unit tests completed successfully.</span>

<span class="go">Execution time = ...</span>
</pre></div>
</div>
<p>To run regression tests only for a single package, call <a class="reference internal" href="#buildingspy.development.regressiontest.Tester.setSinglePackage" title="buildingspy.development.regressiontest.Tester.setSinglePackage"><tt class="xref py py-func docutils literal"><span class="pre">setSinglePackage()</span></tt></a>
prior to <a class="reference internal" href="#buildingspy.development.regressiontest.Tester.run" title="buildingspy.development.regressiontest.Tester.run"><tt class="xref py py-func docutils literal"><span class="pre">run()</span></tt></a>.</p>
<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.areResultsEqual">
<tt class="descname">areResultsEqual</tt><big>(</big><em>tOld</em>, <em>yOld</em>, <em>tNew</em>, <em>yNew</em>, <em>varNam</em>, <em>filNam</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.areResultsEqual" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>True</cite> if the data series are equal within a tolerance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tOld</strong> &#8211; List of old time values.</li>
<li><strong>yOld</strong> &#8211; Old simulation results.</li>
<li><strong>tNew</strong> &#8211; Time stamps of new results.</li>
<li><strong>yNew</strong> &#8211; New simulation results.</li>
<li><strong>varNam</strong> &#8211; Variable name, used for reporting.</li>
<li><strong>filNam</strong> &#8211; File name, used for reporting.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A list with <tt class="docutils literal"><span class="pre">False</span></tt> if the results are not equal, and the time
of the maximum error, and a warning message or <cite>None</cite>.
In case of errors, the time of the maximum error may by <cite>None</cite>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.batchMode">
<tt class="descname">batchMode</tt><big>(</big><em>batchMode</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.batchMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the batch mode flag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>batchMode</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> to run without interactive prompts
and without plot windows.</td>
</tr>
</tbody>
</table>
<p>By default, the regression tests require the user to respond if results differ from previous simulations.
This method can be used to run the script in batch mode, suppressing all prompts that require
the user to enter a response. If run in batch mode, no new results will be stored.
To run the regression tests in batch mode, enter</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">buildingspy.development.regressiontest</span> <span class="kn">as</span> <span class="nn">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">Tester</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">batchMode</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> 
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.checkPythonModuleAvailability">
<tt class="descname">checkPythonModuleAvailability</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.checkPythonModuleAvailability" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether all required python modules are installed.</p>
<p>If some modules are missing, then an <cite>ImportError</cite> is raised.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.deleteTemporaryDirectories">
<tt class="descname">deleteTemporaryDirectories</tt><big>(</big><em>delete</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.deleteTemporaryDirectories" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag, if set to <tt class="docutils literal"><span class="pre">False</span></tt>, then the temporary directories will not be deleted
after the regression tests are run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>delete</strong> &#8211; Flag, set to <tt class="docutils literal"><span class="pre">False</span></tt> to avoid the temporary directories to be deleted.</td>
</tr>
</tbody>
</table>
<p>Unless this method is called prior to running the regression tests with <tt class="docutils literal"><span class="pre">delete=False</span></tt>,
all temporary directories will be deleted after the regression tests.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.getLibraryName">
<tt class="descname">getLibraryName</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.getLibraryName" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the library that will be run by this regression test.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The name of the library that will be run by this regression test.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.getModelicaCommand">
<tt class="descname">getModelicaCommand</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.getModelicaCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the modelica executable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The name of the modelica executable.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.isExecutable">
<tt class="descname">isExecutable</tt><big>(</big><em>program</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.isExecutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the <tt class="docutils literal"><span class="pre">program</span></tt> is an executable</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.isValidLibrary">
<tt class="descname">isValidLibrary</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.isValidLibrary" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if the regression tester points to a valid library
that implements the scripts for the regression tests.</p>
<p>&#8220;return: <tt class="docutils literal"><span class="pre">True</span></tt> if the library implements regression tests, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.printNumberOfClasses">
<tt class="descname">printNumberOfClasses</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.printNumberOfClasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the number of models, blocks and functions to the
standard output stream</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all regression tests and checks the results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">0 if no errros occurred during the regression tests,
otherwise a non-zero value.</td>
</tr>
</tbody>
</table>
<p>This method</p>
<ul class="simple">
<li>creates temporary directories for each processors,</li>
<li>copies the directory <tt class="docutils literal"><span class="pre">CURRENT_DIRECTORY</span></tt> into these
temporary directories,</li>
<li>creates run scripts that run all regression tests,</li>
<li>runs these regression tests,</li>
<li>collects the dymola log files from each process,</li>
<li>writes the combined log file <tt class="docutils literal"><span class="pre">dymola.log</span></tt>
to the current directory,</li>
<li>compares the results of the new simulations with
reference results that are stored in <tt class="docutils literal"><span class="pre">Resources/ReferenceResults</span></tt>,</li>
<li>writes the message <cite>Regression tests completed successfully.</cite>
if no error occured,</li>
<li>returns 0 if no errors occurred, or non-zero otherwise.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.setDataDictionary">
<tt class="descname">setDataDictionary</tt><big>(</big><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.setDataDictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the data structures that are needed to parse the output files.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.setLibraryRoot">
<tt class="descname">setLibraryRoot</tt><big>(</big><em>rootDir</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.setLibraryRoot" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the root directory of the library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rootDir</strong> &#8211; The top-most directory of the library.</td>
</tr>
</tbody>
</table>
<p>The root directory is the directory that contains the <tt class="docutils literal"><span class="pre">Resources</span></tt> folder
and the top-level <tt class="docutils literal"><span class="pre">package.mo</span></tt> file.</p>
<dl class="docutils">
<dt>Usage: Type</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">buildingspy.development.regressiontest</span> <span class="kn">as</span> <span class="nn">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">Tester</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myMoLib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;buildingspy&quot;</span><span class="p">,</span> <span class="s">&quot;tests&quot;</span><span class="p">,</span> <span class="s">&quot;MyModelicaLibrary&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">setLibraryRoot</span><span class="p">(</span><span class="n">myMoLib</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.setNumberOfThreads">
<tt class="descname">setNumberOfThreads</tt><big>(</big><em>number</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.setNumberOfThreads" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of parallel threads that are used to run the regression tests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>number</strong> &#8211; The number of parallel threads that are used to run the regression tests.</td>
</tr>
</tbody>
</table>
<p>By default, the number of parallel threads are set to be equal to the number of
processors of the computer.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.setSinglePackage">
<tt class="descname">setSinglePackage</tt><big>(</big><em>packageName</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.setSinglePackage" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the name of a single Modelica package to be tested.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>packageName</strong> &#8211; The name of the package to be tested.</td>
</tr>
</tbody>
</table>
<p>Calling this method will cause the regression tests to run
only for the examples in the package <tt class="docutils literal"><span class="pre">packageName</span></tt>, and in
all its sub-packages. For example, if <tt class="docutils literal"><span class="pre">packageName</span> <span class="pre">=</span> <span class="pre">Annex60.Fluid.Sensors</span></tt>,
then a test of the <tt class="docutils literal"><span class="pre">Annex60</span></tt> library will run all examples in
<tt class="docutils literal"><span class="pre">Annex60.Fluid.Sensors.*</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.testOM">
<tt class="descname">testOM</tt><big>(</big><em>cmpl=True, simulate=False, packages=['Examples'], number=-1</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.testOM" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the library compliance with OpenModelica.</p>
<p>This is the high-level method to test a complete library, even if there
are no specific <tt class="docutils literal"><span class="pre">.mos</span></tt> files in the library for regression testing.</p>
<p>This method sets self._nPro to 1 as it only works on a single core. It also
executes self.setTemporaryDirectories()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cpml</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> for the model to be compiled.</li>
<li><strong>simulate</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> to cause the model to be simulated (from 0 to 1s).</li>
<li><strong>packages</strong> &#8211; Set to a list whose elements are the packages that contain the test models of the
library</li>
<li><strong>number</strong> &#8211; Number of models to test. Set to <tt class="docutils literal"><span class="pre">-1</span></tt> to test all models.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">In a python console or script, cd to the root folder of the library</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">()</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">testOpenModelica</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> 
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.test_JModelica">
<tt class="descname">test_JModelica</tt><big>(</big><em>cmpl=True, load=False, simulate=False, packages=['Examples'], number=-1</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.test_JModelica" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the library compliance with JModelica.org.</p>
<p>This is the high-level method to test a complete library, even if there
are no specific <tt class="docutils literal"><span class="pre">.mos</span></tt> files in the library for regression testing.</p>
<p>This method sets self._nPro to 1 as it only works on a single core.
It also executes self.setTemporaryDirectories()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cpml</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> for the model to be compiled.</li>
<li><strong>load</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> to load the model from the FMU.</li>
<li><strong>simulate</strong> &#8211; Set to <tt class="docutils literal"><span class="pre">True</span></tt> to cause the model to be simulated.</li>
<li><strong>packages</strong> &#8211; Set to an array whose elements are the packages
that contain the test models of the library.</li>
<li><strong>number</strong> &#8211; Number of models to test. Set to <tt class="docutils literal"><span class="pre">-1</span></tt> to test
all models.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Open a JModelica environment
(ipython or pylab with JModelica environment variables set).</p>
</li>
<li><p class="first">cd to the root folder of the library</p>
</li>
<li><p class="first">type tye following commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">()</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">testJmodelica</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> 
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="buildingspy.development.regressiontest.Tester.useExistingResults">
<tt class="descname">useExistingResults</tt><big>(</big><em>dirs</em><big>)</big><a class="headerlink" href="#buildingspy.development.regressiontest.Tester.useExistingResults" title="Permalink to this definition">¶</a></dt>
<dd><p>This function allows to use existing results, as opposed to running a simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dirs</strong> &#8211; A non-empty list of directories that contain existing results.</td>
</tr>
</tbody>
</table>
<p>This method can be used for testing and debugging. If called, then no simulation is
run.
If the directories
<tt class="docutils literal"><span class="pre">['/tmp/tmp-Buildings-0-zABC44',</span> <span class="pre">'/tmp/tmp-Buildings-0-zQNS41']</span></tt>
contain previous results, then this method can be used as</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">buildingspy.development.regressiontest</span> <span class="kn">as</span> <span class="nn">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;/tmp/tmp-Buildings-0-zABC44&#39;</span><span class="p">,</span> <span class="s">&#39;/tmp/tmp-Buildings-0-zQNS41&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">Tester</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">useExistingResults</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> 
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="legal.html" title="Copyright and License"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> |</li>
    <li><a href="http://simulationresearch.lbl.gov/modelica">Home</a> &gt;
    <a href="http://simulationresearch.lbl.gov/modelica/buildingspy">BuildingsPy</a></li>
    </br>
<!--    
        <li><a href="index.html">BuildingsPy documentation</a> &raquo;</li> -->
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2013, The Regents of the University of California (through Lawrence Berkeley National Laboratory), subject to receipt of any required approvals from U.S. Department of Energy.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>