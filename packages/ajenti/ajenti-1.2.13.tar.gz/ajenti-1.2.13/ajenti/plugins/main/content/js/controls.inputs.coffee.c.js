(function(){var b={}.hasOwnProperty,c=function(g,e){for(var d in e){if(b.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g},a=function(d,e){return function(){return d.apply(e,arguments)}};window.Controls.textbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f=this;this.dom=$$('<input class="control textbox '+this.properties.style+'" \n        '+(this.properties.readonly?"readonly":"")+'\n        type="text" />');this.input=$(this.dom);this.input.val(this.properties.value);return this.input.change(function(){return f.markChanged()})};d.prototype.detectUpdates=function(){var h,f,g;f={};g=this.input.val();h=this.properties.value||"";if(this.properties.type==="integer"){g=parseInt(g)}if(g!==h){f.value=g}this.properties.value=g;return f};return d})(window.Control);window.Controls.passwordbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f=this;this.dom=$$('<input class="control textbox '+this.properties.style+'" \n        type="password" />');this.input=$(this.dom);this.input.val(this.properties.value);return this.input.change(function(){return f.markChanged()})};return d})(window.Controls.textbox);window.Controls.editable=(function(e){c(d,e);function d(){this.goEditMode=a(this.goEditMode,this);this.goViewMode=a(this.goViewMode,this);return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f,g,h=this;f=_make_icon(this.properties.icon);this.dom=$('<div class="control editable">\n    <div class="control label">'+f+" <span>"+((g=this.properties.placeholder)!=null?g:this.properties.value)+'</span></div>\n    <input class="control textbox '+this.properties.style+'" type="text" value="'+(this.properties.value||"")+'" />\n</div>');this.label=this.dom.find(".label");this.input=this.dom.find("input");this.input.hide();this.input.change(function(){return h.markChanged()});this.editmode=false;this.label.click(this.goEditMode);this.input.blur(this.goViewMode);return this.input.keyup(function(i){if(i.which===13){h.goViewMode()}return h.cancel(i)})};d.prototype.goViewMode=function(){var f;this.editmode=false;this.label.find(">span").html((f=this.properties.placeholder)!=null?f:this.input.val());this.input.hide();return this.label.show()};d.prototype.goEditMode=function(f){this.editmode=true;this.label.hide();this.input.show();this.input.focus();f.stopPropagation();return f.preventDefault()};d.prototype.detectUpdates=function(){var f,g;f={};if(this.editmode){goViewMode()}g=this.input.val();if(this.properties.type==="integer"){g=parseInt(g)}if(g!==this.properties.value){f.value=g}return f};return d})(window.Control);window.Controls.checkbox=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){var f=this;this.dom=$('<div class="control checkbox">\n    <input \n        id="'+this.properties.uid+'"\n        type="checkbox" \n        '+(this.properties.value?'checked="checked"':"")+' \n    />\n    <label for="'+this.properties.uid+'">\n        <div class="tick">\n            <i class="icon-ok"></i>\n        </div>\n    </label>\n    <div class="control label">'+this.properties.text+"</div>\n</div>");this.input=this.dom.find("input");return this.input.change(function(){return f.markChanged()})};e.prototype.detectUpdates=function(){var g,f;f={};g=this.input.is(":checked");if(g!==this.properties.value){f.value=g}this.properties.value=g;return f};return e})(window.Control);window.Controls.dropdown=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){var f,k,h,g,j=this;this.dom=$('<div><select class="control dropdown"></select></div>');this.input=this.dom.find("select");this.data=[];k=function(l){return j.input.append('<option value="'+l+'" '+(l===j.properties.index?"selected":"")+">"+j.properties.labels[l]+"</option>")};for(f=h=0,g=this.properties.labels.length;0<=g?h<g:h>g;f=0<=g?++h:--h){k(f)}this.input.select2();this.input.change(function(){return j.markChanged()});if(this.properties.server){return this.input.change(function(i){j.event("change",{});return j.cancel(i)})}};e.prototype.detectUpdates=function(){var f,g;g={};f=parseInt(this.input.val());if(f!==this.properties.index){g.index=f}this.properties.index=f;return g};return e})(window.Control);window.Controls.combobox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f,k,h,g,j=this;this.dom=$$('<input class="control combobox" type="text" value="'+this.properties.value+'" />');this.input=$(this.dom);this.input.change(function(){return j.markChanged()});this.data=[];k=function(l){return j.data.push({label:j.properties.labels[l],value:j.properties.values[l]})};for(f=h=0,g=this.properties.labels.length;0<=g?h<g:h>g;f=0<=g?++h:--h){k(f)}if(this.properties.separator!==null){this.input.autocomplete({source:function(l,i){var m;m=j.getVals();return i($.ui.autocomplete.filter(j.data,m.pop()))},focus:function(){return false},select:function(i,m){var l;l=j.getVals();l.pop();l.push(m.item.value);j.input.val(l.join(j.properties.separator));return false},minLength:0})}else{this.input.autocomplete({source:this.data,minLength:0})}return this.input.click(function(){return j.input.autocomplete("search","")})};d.prototype.getVals=function(){return this.input.val().split(this.properties.separator)};d.prototype.detectUpdates=function(){var f,g;f={};g=this.input.val();if(this.properties.type==="integer"){g=parseInt(g)}if(g!==this.properties.value){f.value=g}this.properties.value=g;return f};return d})(window.Control);window.Controls.fileupload=(function(d){c(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.createDom=function(){var f=this;this.dom=$('<div class="control fileupload">\n    <input type="file" />\n    \n    <div class="full-overlay">\n        <div class="content">\n            <div class="inner">\n                <h1>Upload</h1>\n                <div class="pb"></div>\n            </div>\n        </div>\n    </div>  \n</div>');this.progress=new window.Controls.progressbar(this.ui,{},[]);this.dom.find(".pb").append($(this.progress.dom));this.input=this.dom.find("input")[0];this.input.addEventListener("change",function(h){var j,g,i;g=f.input.files[0];i=new XMLHttpRequest();i.file=g;if(i.upload){i.upload.onprogress=function(n){var k,l,m;k=n.position||n.loaded;m=n.totalSize||n.total;l=1*k/m/2;return f.progress.setProgress(l)}}j=new FormData();j.append("file",g);i.open("post",f.properties.target,true);i.send(j);return $(f.dom).find(".full-overlay").show()},false);return this.dom.find(".full-overlay").hide()};return e})(window.Control);window.Controls.paging=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f,h,g,j=this;this.dom=$('<div class="control paging">\n    <div class="control label">Page:&nbsp;</div>\n    <a class="prev control button style-mini"><i class="icon-arrow-left"></i></a>\n    <select />\n    <a class="next control button style-mini"><i class="icon-arrow-right"></i></a>\n</div>');this.select=this.dom.find("select");for(f=h=0,g=this.properties.length;0<=g?h<g:h>g;f=0<=g?++h:--h){this.select.append($$('<option value="'+(f+1)+'">'+(f+1)+"</option>"))}this.select.val(this.properties.active+1);this.select.select2({width:"80px"});this.prev=this.dom.find(".prev");this.next=this.dom.find(".next");if(this.properties.active===0){this.prev.hide()}if(this.properties.active===this.properties.length-1){this.next.hide()}if(!this.properties.length){this.dom.hide()}this.prev.click(function(){return j.set(j.properties.active-1)});this.next.click(function(){return j.set(j.properties.active+1)});return this.select.change(function(){var i;i=parseInt(j.select.val())-1;console.log(i,j.properties.active);if(i!==j.properties.active){return j.set(i)}})};d.prototype.set=function(f){return this.event("switch",{page:f})};return d})(window.Control);window.Controls.pathbox=(function(e){c(d,e);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.createDom=function(){var f=this;this.dom=$$('<div class="control container pathbox">\n</div>');this.childContainer=this.dom;this.textbox=new Controls.textbox(this.ui,{value:this.properties.value});this.button=new Controls.button(this.ui,{style:"mini",icon:this.properties.directory?"folder-close":"file",text:""});this.append(this.textbox);this.append(this.button);return this.button.on_click=function(){return f.event("start",{})}};d.prototype.detectUpdates=function(){return this.textbox.detectUpdates()};return d})(window.Control)}).call(this);