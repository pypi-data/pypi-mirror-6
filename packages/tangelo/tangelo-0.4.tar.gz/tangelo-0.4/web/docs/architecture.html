

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tangelo System and Application Architecture &mdash; Tangelo Web Framework 0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Tangelo Web Framework 0.0 documentation" href="index.html" />
    <link rel="next" title="Developing Visualizations" href="developing-visualizations.html" />
    <link rel="prev" title="Coding Style Guidelines" href="coding-style-guide.html" />
<link rel=stylesheet type=text/css href=_static/tangelo-sphinx.css />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="developing-visualizations.html" title="Developing Visualizations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="coding-style-guide.html" title="Coding Style Guidelines"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Tangelo Web Framework 0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tangelo-system-and-application-architecture">
<h1>Tangelo System and Application Architecture<a class="headerlink" href="#tangelo-system-and-application-architecture" title="Permalink to this headline">¶</a></h1>
<p>This page will discuss Tangelo&#8217;s architecture at two levels: the overall
<em>system architecture</em>, and generally recommended <em>application
architecture</em>.</p>
<div class="section" id="system-architecture">
<h2>System architecture<a class="headerlink" href="#system-architecture" title="Permalink to this headline">¶</a></h2>
<p>The Tangelo framework is built on top of
<a class="reference external" href="http://http://www.cherrypy.org/">CherryPy</a>, a Python-based web
server that can serve web content from static files (as a traditional
web server does) or as the result of executing some Python code. Tangelo
is set up to serve static files from a particular directory (/web), and
return the result of Python code from another (/service).</p>
<p>This is the major feature of the Tangelo system architecture: <em>web
pages</em> are served from one directory, while <em>web services</em> are served
from another. How this distinction is used to create <em>web applications</em>
is discussed next.</p>
</div>
<div class="section" id="application-architecture">
<h2>Application Architecture<a class="headerlink" href="#application-architecture" title="Permalink to this headline">¶</a></h2>
<p>A particular web application consists of a collection of <em>web pages</em> and
a collection of <em>web services</em>. The web pages are just HTML files with
associated JavaScript or CSS files - the usual notion of a web page. On
the other hand, web <em>services</em> are Python functions exposed by the
server as web addresses. Essentially, the server will run these
functions for you when you visit a particular URL.</p>
<div class="section" id="web-services">
<h3>Web Services<a class="headerlink" href="#web-services" title="Permalink to this headline">¶</a></h3>
<p>When someone visits the URL for some web service in a web browser, the
text they will see is the result of running the Python function. Because
Python is a flexible, general purpose language with an extensive
standard library, and wide support among software developers, Tangelo
web services can be very powerful tools.</p>
<p>Web service modules are found in the /modules directory. Each service
appears in a single Python file. For example, the following code might
appear in a file named <tt class="docutils literal"><span class="pre">add.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">tangelo</span>

<span class="k">class</span> <span class="nc">Handler</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">tangelo</span><span class="o">.</span><span class="n">empty_response</span><span class="p">()</span>

        <span class="k">class</span> <span class="nc">BreakOut</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">b</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">response</span><span class="p">[</span><span class="s">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Two arguments are required&quot;</span>
                <span class="k">raise</span> <span class="n">BreakOut</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">response</span><span class="p">[</span><span class="s">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Arguments must be numeric&quot;</span>
                    <span class="k">raise</span> <span class="n">BreakOut</span><span class="p">()</span>

                <span class="n">response</span><span class="p">[</span><span class="s">&quot;result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
        <span class="k">except</span> <span class="n">BreakOut</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">tangelo</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<p>After starting the server, visiting a URL like
<tt class="docutils literal"><span class="pre">http://localhost:8080/service/add?a=5&amp;b=10</span></tt> would show a response
similar to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span> <span class="s">&quot;error&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span> <span class="s">&quot;result&quot;</span><span class="p">:</span> <span class="mi">15</span> <span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">tangelo.dumps()</span></tt> function converts a Python object to
<a class="reference external" href="http://en.wikipedia.org/wiki/JSON">JSON</a>, a useful format for
communicating between the server and client side. In this example, you
can see that there was no error reported, and the sum of 5 and 10
appears in the &#8220;result&#8221; field.</p>
<p>Of course, rather than visiting this page directly, an application
writer would instead use an
[Ajax](<a class="reference external" href="http://en.wikipedia.org/wiki/Ajax_(programming">http://en.wikipedia.org/wiki/Ajax_(programming</a>)) call to send
the request and retrieve the result, perhaps something like the
following:</p>
<div class="highlight-python"><pre>$.ajax({
    url: &quot;/service/add&quot;,
    data: {a: 5, b: 10},
    dataType: &quot;json&quot;,
    success: function(response){
        alert(&quot;The sum is &quot; + response.result);
    }
});</pre>
</div>
<p>This example shows how a JavaScript function might make use of the web
service to display a sum. Of course, web services in production
applications will not simply add numbers together. The example Tangelo
applications include web services that retrieve records from a Mongo
database instance for use in the web page portion of the application,
and one that performs &#8220;named entity recognition&#8221; using the <a class="reference external" href="http://nltk.org/">Natural
Language Toolkit</a> Python interface.</p>
<p>The ability to write web services in Python is what sets Tangelo apart
from an ordinary web server. They enable rich web applications by
bringing the power of Python to bear on any problem you might wish to
solve.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tangelo System and Application Architecture</a><ul>
<li><a class="reference internal" href="#system-architecture">System architecture</a></li>
<li><a class="reference internal" href="#application-architecture">Application Architecture</a><ul>
<li><a class="reference internal" href="#web-services">Web Services</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="coding-style-guide.html"
                        title="previous chapter">Coding Style Guidelines</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="developing-visualizations.html"
                        title="next chapter">Developing Visualizations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/architecture.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="developing-visualizations.html" title="Developing Visualizations"
             >next</a> |</li>
        <li class="right" >
          <a href="coding-style-guide.html" title="Coding Style Guidelines"
             >previous</a> |</li>
        <li><a href="index.html">Tangelo Web Framework 0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Kitware, Inc..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>