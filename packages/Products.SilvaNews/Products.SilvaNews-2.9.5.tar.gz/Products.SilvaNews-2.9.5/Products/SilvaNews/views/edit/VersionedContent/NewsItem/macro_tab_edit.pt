<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
      lang="en"
      xml:lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="silva">

<metal:define-macro define-macro="editor">
<metal:use-macro metal:use-macro="here/macro_index/macros/master">

<metal:fill-slot fill-slot="metatype_css">
  <tal:condition condition="python: not model.get_unapproved_version()">
    <link rel="stylesheet"
          type="text/css"
          tal:attributes="href string:${root_url}/++resource++silva.core.smi/frontend.css"
          />
  </tal:condition>
  <metal:block define-slot="editor_css" />
</metal:fill-slot>

<metal:block fill-slot="refresher">
  <metal:block define-slot="editor_refresher" />
</metal:block>

<metal:block fill-slot="script">
  <metal:block define-slot="script" />
  <script type="text/javascript" tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/popupkupu.js"></script>  </metal:block>

<metal:block fill-slot="middleground">
  <tal:buttons tal:replace="structure model/@@tab_edit_extra" />
</metal:block>

<span tal:replace="nothing"> ______________ author may edit ______________ </span>
<metal:fill-slot fill-slot="main"
  tal:define="request_pending python:model.is_version_approval_requested();
              unapproved_version model/get_unapproved_version;">
<span tal:replace="nothing"> _________ show editor ____ </span>
<tal:block condition="python:unapproved_version and not request_pending">
  <metal:block define-slot="editor_content" />
</tal:block>
<span tal:replace="nothing"> _________ or preview document ____ </span>
<tal:block condition="python:not model.get_unapproved_version()">
  <tal:public condition="python: model.get_viewable()">
     <br clear="all" />
    <tal:cond condition="python:model.meta_type == 'Silva Article'">
      <metal:use use-macro="here/macro_newsitem_info/macros/newsitem_info_article">
        this will insert an info box for news articles
      </metal:use>
     </tal:cond>
    <tal:cond condition="python:model.meta_type == 'Silva Agenda Item'">
      <metal:use use-macro="here/macro_newsitem_info/macros/newsitem_info_agenda_item">
        this will insert an info box for agenda items
      </metal:use>
    </tal:cond>
  </tal:public>
  <div class="public"
    tal:content="structure model/preview">
    <!-- this text is replaced by Silva content -->
  </div>
</tal:block>
<span tal:replace="nothing"> _________ or show ghost info ____ </span>
<div tal:condition="not:unapproved_version"
  tal:replace="structure here/edit_info | nothing" />
</metal:fill-slot>

</metal:use-macro>
</metal:define-macro>
</html>
