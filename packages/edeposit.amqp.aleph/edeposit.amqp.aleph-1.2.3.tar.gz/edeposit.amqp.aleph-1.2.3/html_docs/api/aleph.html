<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>aleph package</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="" href="../index.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../_static/nkp_logo.png" alt="Logo"/><h1 class="heading"><a href="../index.html">
          <span></span></a></h1>
        <h2 class="heading"><span>aleph package</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="aleph-package">
<h1>aleph package<a class="headerlink" href="#aleph-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="aleph.datastructures.html">aleph.datastructures package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aleph.datastructures.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aleph.datastructures.alephrecord.html">aleph.datastructures.alephrecord module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aleph.datastructures.epublication.html">aleph.datastructures.epublication module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aleph.datastructures.requests.html">aleph.datastructures.requests module</a></li>
<li class="toctree-l3"><a class="reference internal" href="aleph.datastructures.results.html">aleph.datastructures.results module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aleph.datastructures.html#module-aleph.datastructures">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aleph.tests.html">aleph.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aleph.tests.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aleph.tests.inspector.html">aleph.tests.inspector module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aleph.tests.html#module-aleph.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="aleph.aleph.html">aleph.aleph module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aleph.aleph.html#lowlevel">Lowlevel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aleph.aleph.html#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aleph.aleph.html#highlevel">Highlevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="aleph.aleph.html#other-noteworthy-properties">Other noteworthy properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aleph.convertors.html">aleph.convertors module</a></li>
<li class="toctree-l1"><a class="reference internal" href="aleph.export.html">aleph.export module</a></li>
<li class="toctree-l1"><a class="reference internal" href="aleph.isbn.html">aleph.isbn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="aleph.marcxml.html">aleph.marcxml module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aleph.marcxml.html#oai">OAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="aleph.marcxml.html#full-documentation">Full documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aleph.settings.html">aleph.settings module</a></li>
</ul>
</div>
</div>
<div class="section" id="module-aleph">
<span id="module-content"></span><h2>Module content<a class="headerlink" href="#module-aleph" title="Permalink to this headline">¶</a></h2>
<div class="section" id="query-workflow">
<h3>Query workflow<a class="headerlink" href="#query-workflow" title="Permalink to this headline">¶</a></h3>
<p>To query Aleph, just create one of the Queries - <a class="reference internal" href="#aleph.ISBNQuery" title="aleph.ISBNQuery"><tt class="xref py py-class docutils literal"><span class="pre">ISBNQuery</span></tt></a> for example
and put it into <a class="reference internal" href="aleph.datastructures.requests.html#aleph.datastructures.requests.SearchRequest" title="aleph.datastructures.requests.SearchRequest"><tt class="xref py py-class docutils literal"><span class="pre">aleph.datastructures.requests.SearchRequest</span></tt></a> wrapper.
Then encode it by calling <a class="reference internal" href="#aleph.serialize" title="aleph.serialize"><tt class="xref py py-func docutils literal"><span class="pre">serialize()</span></tt></a> and send the message to the Aleph&#8217;s
exchange:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">isbnq</span> <span class="o">=</span> <span class="n">ISBNQuery</span><span class="p">(</span><span class="s">&quot;80-251-0225-4&quot;</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">SearchRequest</span><span class="p">(</span><span class="n">isbnq</span><span class="p">)</span>

<span class="n">amqp</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
    <span class="n">message</span>    <span class="o">=</span> <span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">),</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="s">&quot;..&quot;</span><span class="p">,</span>
    <span class="n">exchange</span>   <span class="o">=</span> <span class="s">&quot;ALEPH&#39;S_EXCHANGE&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>and you will get back AMQP message, and after decoding with fromAMQPMessage()
also SearchResult.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You don&#8217;t have to import all structures from <a class="reference internal" href="aleph.datastructures.html#module-aleph.datastructures" title="aleph.datastructures"><tt class="xref py py-class docutils literal"><span class="pre">datastructures</span></tt></a>, they
should be automatically imported and made global in <tt class="docutils literal"><span class="pre">__init__.py</span></tt>.</p>
</div>
<p>If you want to just get count of how many items is there in Aleph, just wrap
the ISBNQuery with <tt class="xref py py-class docutils literal"><span class="pre">CountRequest</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">isbnq</span> <span class="o">=</span> <span class="n">ISBNQuery</span><span class="p">(</span><span class="s">&quot;80-251-0225-4&quot;</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">CountRequest</span><span class="p">(</span><span class="n">isbnq</span><span class="p">)</span>

<span class="c"># rest is same..</span>
</pre></div>
</div>
<p>and you will get back (after decoding)
<a class="reference internal" href="aleph.datastructures.results.html#aleph.datastructures.results.CountResult" title="aleph.datastructures.results.CountResult"><tt class="xref py py-class docutils literal"><span class="pre">aleph.datastructures.results.CountResult</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should always use CountRequest instead of just calling <a href="#id1"><span class="problematic" id="id2">``</span></a>len()` to
SearchResult.records - it doesn&#8217;t put that much load to Aleph. Also Aleph
is restricted to 150 requests per second.</p>
</div>
<p>Here is ASCII flow diagram for you:</p>
<div class="highlight-python"><div class="highlight"><pre>ISBNQuery      ----.                                 ,--&gt; CountResult
AuthorQuery    ----|                                 |       `- num_of_records
PublisherQuery ----|                                 |
GenericQuery   ----|      ISBNValidationRequest      |--&gt; SearchResult
                   |                |                |       `- AlephRecord
                   V                |                |
      Count/Search/ExportRequest    |                |--&gt; ISBNValidationResult
                   |                |                |        - ISBN
                   V                |                |
                   |                |                |--&gt; ExportResult
                   V                |                |
              serialize()&lt;----------&#39;           deserialize()
                   |                                 ^
                   V             Client              |
              AMQPMessage ------&gt; AMQP -------&gt; AMQPMessage
                                 |    ^
                                 V    |
                                 |    ^
                                 V    |
                                 |    ^
                                 V    |
              AMQPMessage &lt;------ AMQP &lt;-------- AMQPMessage
                   |             Service              ^
                   |                                  |
                   V                                  |
          reactToAMQPMessage() ............... magic_happens()
</pre></div>
</div>
<p>Neat, isn&#8217;t it?</p>
<dl class="class">
<dt id="aleph.AuthorQuery">
<em class="property">class </em><tt class="descclassname">aleph.</tt><tt class="descname">AuthorQuery</tt><a class="reference internal" href="../_modules/aleph.html#AuthorQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.AuthorQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aleph.AuthorQuery" title="aleph.AuthorQuery"><tt class="xref py py-class docutils literal"><span class="pre">aleph.AuthorQuery</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">aleph._QueryTemplate</span></tt></p>
<p>Query Aleph to get books by Author.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>author</strong> (<em>str</em>) &#8211;
Author&#8217;s name/lastname in UTF</li>
<li><strong>base</strong> (<em>str, optional</em>) &#8211;
if not set, <tt class="docutils literal"><span class="pre">settings.ALEPH_DEFAULT_BASE</span></tt> is
used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="aleph.GenericQuery">
<em class="property">class </em><tt class="descclassname">aleph.</tt><tt class="descname">GenericQuery</tt><a class="reference internal" href="../_modules/aleph.html#GenericQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.GenericQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aleph.GenericQuery" title="aleph.GenericQuery"><tt class="xref py py-class docutils literal"><span class="pre">aleph.GenericQuery</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">aleph._QueryTemplate</span></tt></p>
<p>Used for generic queries to aleph.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>base</strong> (<em>str</em>)</li>
<li><strong>phrase</strong> (<em>str</em>)</li>
<li><strong>considerSimilar</strong> (<em>bool</em>)</li>
<li><strong>field</strong> (<em>str</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>For details of base/phrase/.. parameters, see <a class="reference internal" href="aleph.aleph.html#aleph.aleph.searchInAleph" title="aleph.aleph.searchInAleph"><tt class="xref py py-func docutils literal"><span class="pre">aleph.searchInAleph()</span></tt></a>.
All parameters also serves as properties.</p>
<p>This is used mainly if you want to search by your own parameters and don&#8217;t
want to use prepared wrappers (<a class="reference internal" href="#aleph.AuthorQuery" title="aleph.AuthorQuery"><tt class="xref py py-class docutils literal"><span class="pre">AuthorQuery</span></tt></a>/<a class="reference internal" href="#aleph.ISBNQuery" title="aleph.ISBNQuery"><tt class="xref py py-class docutils literal"><span class="pre">ISBNQuery</span></tt></a>/..).</p>
</dd></dl>

<dl class="class">
<dt id="aleph.ISBNQuery">
<em class="property">class </em><tt class="descclassname">aleph.</tt><tt class="descname">ISBNQuery</tt><a class="reference internal" href="../_modules/aleph.html#ISBNQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.ISBNQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aleph.ISBNQuery" title="aleph.ISBNQuery"><tt class="xref py py-class docutils literal"><span class="pre">aleph.ISBNQuery</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">aleph._QueryTemplate</span></tt></p>
<p>Query Aleph to get books by ISBN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ISBN</strong> (<em>str</em>)</li>
<li><strong>base</strong> (<em>str, optional</em>) &#8211;
if not set, <tt class="docutils literal"><span class="pre">settings.ALEPH_DEFAULT_BASE</span></tt> is
used</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ISBN is not unique, so you can get back lot of books with same ISBN.
Some books also have two or more ISBNs.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aleph.PublisherQuery">
<em class="property">class </em><tt class="descclassname">aleph.</tt><tt class="descname">PublisherQuery</tt><a class="reference internal" href="../_modules/aleph.html#PublisherQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.PublisherQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aleph.PublisherQuery" title="aleph.PublisherQuery"><tt class="xref py py-class docutils literal"><span class="pre">aleph.PublisherQuery</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">aleph._QueryTemplate</span></tt></p>
<p>Query Aleph to get books by Publisher.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>publisher</strong> (<em>str</em>) &#8211;
publisher&#8217;s name in UTF</li>
<li><strong>base</strong> (<em>str, optional</em>) &#8211;
if not set, <tt class="docutils literal"><span class="pre">settings.ALEPH_DEFAULT_BASE</span></tt> is
used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aleph.deserialize">
<tt class="descclassname">aleph.</tt><tt class="descname">deserialize</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="../_modules/aleph.html#deserialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserialize classes from JSON data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>str</em>) &#8211;
python data serialized to JSON</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>any</em> &#8211;
any python typ (make sure you have namedtuples imported)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aleph.reactToAMQPMessage">
<tt class="descclassname">aleph.</tt><tt class="descname">reactToAMQPMessage</tt><big>(</big><em>message</em>, <em>response_callback</em>, <em>UUID</em><big>)</big><a class="reference internal" href="../_modules/aleph.html#reactToAMQPMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.reactToAMQPMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>React to given (AMQP) message. Return data thru given callback function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<em>str or Request class</em>) &#8211;
message encoded in JSON by serialize()
or any of the Request class from
<a class="reference internal" href="aleph.datastructures.requests.html#module-aleph.datastructures.requests" title="aleph.datastructures.requests"><tt class="xref py py-class docutils literal"><span class="pre">aleph.datastructures.requests</span></tt></a></li>
<li><strong>response_callback</strong> (<em>func</em>) &#8211;
function has to take two parameters -
message&#8217;s body (serialized response class)
and UUID</li>
<li><strong>UUID</strong> (<em>str</em>) &#8211;
unique ID of received message</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function take care of sending the response over AMQP, or whatever you
use.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">result of <cite>response_callback()</cite> call.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> &#8211; 
if bad type of <cite>message</cite> structure is given.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aleph.serialize">
<tt class="descclassname">aleph.</tt><tt class="descname">serialize</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="../_modules/aleph.html#serialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aleph.serialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize class hierarchy into JSON.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>any</em>) &#8211;
any python type serializable to JSON, with added support of
namedtuples</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>unicode</em> &#8211;
JSON string</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2014 E-deposit team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>