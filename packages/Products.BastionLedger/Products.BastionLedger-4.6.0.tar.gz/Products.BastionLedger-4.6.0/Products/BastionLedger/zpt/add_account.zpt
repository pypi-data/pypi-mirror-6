<html tal:replace="structure container/manage_page_header"/>

    <div tal:replace="structure python:container.manage_form_title(context, context,
           form_title='<img src=%s/misc_/BastionLedger/blaccount> %s' % (request['BASEPATH1'],
'Add Account'),
           help_product='BastionLedger',
           help_topic='add.stx')"/>

  <span tal:replace="structure string:<script type=text/javascript language=javascript><!--"/>
    function doSubType() {
      document.form.subtype.value = document.form.subtype_list[document.form.subtype_list.selectedIndex].value;
    }

    function doSubTypeList() {
       removectr = (document.form.subtype_list.options.length) - 1;
       while (removectr > -1) {
           document.form.subtype_list.options[removectr]=null;
           removectr--;
       }
       switch(document.form.type.value) {<span tal:omit-tag="" tal:repeat="type container/Types">
           case "<span tal:replace="type"/>":<span tal:omit-tag="" tal:repeat="st python: container.subtypes(type)">
              document.form.subtype_list.options[<span tal:replace="repeat/st/index"/>] = new Option("<span tal:replace="st"/>", "<span tal:replace="st"/>", false, false);</span>
	      break;</span>
       }
       <div tal:omit-tag="" tal:condition="container/Types">
       document.form.subtype.value = document.form.subtype_list[document.form.subtype_list.selectedIndex].value;
       </div>
    }
<span tal:replace="structure string://--></script>"/>

     <form name="form" action="manage_addBLAccount" method="post">
          <table width="100%" cellspacing="0" cellpadding="2" border="0">
               <tr>
                  <td class="form-label">Account Number</td>
                  <td class="form-element">
                      <input type="text" name="accno" size="8">
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Title</td>
                  <td class="form-element">
                      <input type="text" name="title" size="35">
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Type</td>
                  <td class="form-element">
                       <select name="type" onchange="doSubTypeList()">
                            <option tal:repeat = "type container/Types" tal:content="type"/>
                      </select>
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Sub-Type</td>
                  <td class="form-element" tal:define="subtypes python: container.subtypes('Asset')">
                       <input type="text" name="subtype" size="20" value=""
                              tal:attributes="value python: subtypes[0]" tal:on-error="string:"/>
                      &nbsp;<i>in</i>&nbsp;
                      <select name="subtype_list" onchange="doSubType()">
                         <option tal:repeat="st subtypes"
                                 tal:content="st"/>
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Base Currency</td>
                  <td class="form-element">
                       <select name="currency">
                            <option tal:repeat = "curr container/Ledger/currencies" tal:content="curr"/>
                      </select>
                  </td>
              </tr>
               <tr>
                  <td class="form-label" valign="top">Tags</td>
                  <td class="form-element">
                      <textarea name="tags:list"  rows="4" cols="20"></textarea>
                  </td>
              </tr>
              <tr>
                  <td class="form-element">
                     <input type="submit" value=" Add ">
       		  </td>
              </tr>
          </table>
     </form>
   
<html tal:replace="structure container/manage_page_footer"/>
