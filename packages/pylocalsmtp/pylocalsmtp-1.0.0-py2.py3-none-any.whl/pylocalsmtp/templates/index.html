<!doctype html>
<html lang="en" ng-app="PyLocalSmtpApp" ng-controller="InboxCtrl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a responsive email layout.">
    <title>([[ (mails |filter:{read:false}).length ]]) Inbox PyLocalSmtp</title>
    <link rel="stylesheet" href="/medias/css/pure-min.css">
    <link rel="stylesheet" href="/medias/css/email.css">
    <script src="/medias/js/angular.min.js"></script>
    <script src="/medias/js/angular-sanitize.min.js"></script>
    <script src="/medias/js/sockjs-0.3.min.js"></script>
    <script src="/medias/js/controllers/app-controllers.js"></script>
    <script src="/medias/js/filters/app-filters.js"></script>
    <script src="/medias/js/filters/igTruncate.js"></script>
    <script src="/medias/js/app.js"></script>
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAACXBIWXMAAAsTAAALEwEAmpwYAAADG2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBFTAyMHy7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAUICxE+CDEESC4tKoMHJQODAIMWgx9DJcMqhgeM0oxRjPMYnzIZMjUwXWLWYG5kvstiwzKPlZk1m/UqmxPbJnYV9pkcAhydnKyczVzMXG3c3NwTeaR4lvIa8x7iC+Z7xl8tICSwWtBN8JFQo7Ci8GGRdFFe0a1iceKc4lslUiSFJY9KVUjrSj+RmSMbKicod1a+R8FHkVfxgtIU5SgVJZXXqlvVGtX9NGQ13mru05qonapjrSuk+0rviP58gxrDKCNLY0nj3yb3TA+brTDvt6iwTLTysbawUbUVsWOx+2r/3OG24wWnY857Xba6rndb6b7UY5HnQq8F3gt9Fvsu81vlvz5ga+DeoGPB50NuhT4L+xLBFCkYpRRtHOMWGxWXF9+SMDtxc9LZ5OepTGly6TYZUZlVWbOy9+Tcy2PKVy/wKSwuml18uORtmUS5S0Vh5byqs9V/a/Xq4usnNRxr/N1s0JLeOq/teodgp3dXe/fhXoY++/66Cfsm/p/sOKV16onpvDOCZ86a9WiO1tySefsWcC0MW7R48celDssmLH+40nhV6+qba3XXNa2/udFgU8fmB1uttk3d/mGn765Vezj2pu87fkD9YOeh10f8jm4+Ln6i9uST095ntpyTPd9+4dOluMunrlpcW3ZD9Gbrra930u/evO/z4MAj08ernyo+m/lC8GXXa+Y3dW9/vi/98OlTwed3X/O+vfuR//PD7+I/3/5V/f8PAC4MHYugPAkxAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACUSURBVHjarNGhDcQwDAXQgC5hYhxjw0qRF+iMURYo7RbuABnmH8g1TU7VoeoDg/9kYAeE/wnvADoJDzk7cEtVMSdVtw64/JJU3bh0IJhJqwUdKEZy1ToCxbpjcUs1VTcs664z2A5Eylzc3LhQRtyOAbRaIODCRSBo5D5UpCxQKATXpIx4H+pbjxFQHjbAHhLfedZnAM/LCsLEvQj3AAAAAElFTkSuQmCC" rel="icon" type="image/x-icon" />
</head>
<body>
<div id="layout" class="content pure-g">
    <div id="nav" class="pure-u">
        <div class="nav-inner">
            <div class="pure-menu pure-menu-open">
                <ul>
                    <li class="pure-menu-heading">PyLocalSMTP</li>
                    <li><a href="#">Inbox <span class="email-count">([[ (mails |filter:{read:false}).length ]])</span></a></li>
                    <li><a href="javascript:void(0);" ng-click="readAll()">Mark all as read</a></li>
                    <li><a href="javascript:void(0);" ng-click="deleteAll()">Delete all</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="list" class="pure-u-1">
        <div ng-view></div>
        <div 
            ng-repeat="mail in mails"
            ng-class="(currentMail.id==mail.id) ? 'email-item-selected' : ''"
            class="email-item [[ mail.read | is_read_css_class ]] pure-g"
            ng-click="readMail(mail)">
            <div class="pure-u">
                <h5 class="email-name">[[ mail.mail_from ]]</h5>
                <h4 class="email-subject">[[ mail.subject|truncate:26 ]]</h4>
                <p class="email-desc">
                    [[ mail.body|truncate:63 ]]
                </p>
            </div>
        </div>
    </div>

    <div id="main" class="pure-u-1" ng-class="(!currentMail) ? 'email-empty' : ''">
        <div class="email-content" ng-hide="!currentMail">
            <div class="email-content-header pure-g">
                <div class="pure-u">
                    <h1 class="email-content-title">[[ currentMail.subject ]]</h1>
                    <p class="email-content-subtitle">
                        From <a>[[ currentMail.mail_from ]]</a> at <span>[[ currentMail.sent_date ]]</span>
                    </p>
                </div>
                <!--
                <div class="email-content-controls pure-u-1-3">
                    <button class="secondary-button pure-button">Delete</button>
                </div>
                -->
            </div>

            <div id="bind-html-with-trust" class="email-content-body" ng-bind-html="deliberatelyTrustDangerousSnippet()"></div>
        </div>
        <div  ng-hide="currentMail">
            <p>No message selected</p>
        </div>
    </div>
</div>
</body>
</html>
