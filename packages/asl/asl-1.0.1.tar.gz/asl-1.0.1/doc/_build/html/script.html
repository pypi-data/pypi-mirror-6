<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module as a script &mdash; ASL 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ASL 1.0.1 documentation" href="index.html" />
    <link rel="next" title="Release history" href="changelog.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Release history"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ASL 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-as-a-script">
<h1>Module as a script<a class="headerlink" href="#module-as-a-script" title="Permalink to this headline">¶</a></h1>
<p>The module can be used as a script:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python3 -m asl --help
</pre></div>
</div>
<p>This is primarily intended as an example
on how to use the module, but can be usefull
on its own.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writing-messages-to-the-console-app-default-view">
<h3>Writing messages to the Console.app default view<a class="headerlink" href="#writing-messages-to-the-console-app-default-view" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>$ python3 -m asl consolelog [-i IDENT] [-l LEVEL] message ...
</pre></div>
</div>
<p>This logs the message arguments as a single line (separated
by spaces) with the attributes needed to end up in the default
view of Console.app.</p>
<p>The <em>IDENT</em> is the source identifier and is usually an application
name. It defaults to the name of the user.</p>
<p>The <em>LEVEL</em> is the log level, and is one of &#8220;Emergency&#8221;, &#8220;Alert&#8221;,
&#8220;Critical&#8221;, &#8220;Error&#8221;, &#8220;Warning&#8221;, &#8220;Notice&#8221;, &#8220;Info&#8221; and &#8220;Debug&#8221; (from
high to low priority). The default is &#8220;Notice&#8221;, which is the lowest
priority that will end up in the default view of Console.app.</p>
</div>
<div class="section" id="generic-logging">
<h3>Generic logging<a class="headerlink" href="#generic-logging" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>$ python3 -m asl writelog {-k KEY VALUE}...
</pre></div>
</div>
<p>Write a log message to the ASL, with all message parameters under control
of the user.</p>
<p>The <em>IDENT</em> is the source identifier and is usually an application
name. It defaults to the name of the user.</p>
<p>The <em>FACILITY</em> is the log facility.</p>
<p>The <em>LEVEL</em> is the log level, and is one of &#8220;Emergency&#8221;, &#8220;Alert&#8221;,
&#8220;Critical&#8221;, &#8220;Error&#8221;, &#8220;Warning&#8221;, &#8220;Notice&#8221;, &#8220;Info&#8221; and &#8220;Debug&#8221; (from
high to low priority). The default is &#8220;Notice&#8221;.</p>
<p>The &#8220;-k&#8221; option is used to set the attributes of the log message. You should
at least include a &#8220;Message&#8221; key with the text of the log message.</p>
<p>The standard keys are:</p>
<ul>
<li><p class="first"><em>Time</em>: Time of logging (added by the ASL daemon)</p>
</li>
<li><p class="first"><em>TimeNanoSec</em> Nano-second resolution time (added by the ASL daemon)</p>
</li>
<li><p class="first"><em>Host</em>: Host where the message was written</p>
</li>
<li><p class="first"><em>Sender</em>: Sender of the log message</p>
</li>
<li><p class="first"><em>Facility</em>: Log facility</p>
<p>This is either one of the regular
syslog facilities (auth, authpriv, cron, ..., or an arbitrary string.
Messages that should be shown in the default view of Console.app should use facility
&#8220;com.apple.console&#8221;.</p>
</li>
<li><p class="first"><em>PID</em>: Process ID of the sending proces (replaced by the ASL daemon)</p>
</li>
<li><p class="first"><em>UID</em>: UID of the sending process (replaced by the ASL daemon)</p>
</li>
<li><p class="first"><em>GID</em>: GUID of the sending proccess (replaced by the ASL daemon)</p>
</li>
<li><p class="first"><em>Level</em>: Log level (see the -l command of the <em>consolelog</em> command)</p>
</li>
<li><p class="first"><em>Message</em>: Text of the log message</p>
</li>
<li><p class="first"><em>ReadUID</em>: UID that may read the message, use &#8220;-1&#8221; for &#8220;all users&#8221;</p>
</li>
<li><p class="first"><em>ReadGID</em>: GID that may read the message, use &#8220;-1&#8221; for &#8220;all groups&#8221;</p>
</li>
<li><p class="first"><em>ASLExpireTime</em>: Expiry time for this message (default to 7 days after the log time)</p>
</li>
<li><p class="first"><em>ASLMessageID</em> Message ID for this message (replaced by the ASL daemon)</p>
</li>
<li><p class="first"><em>Session</em>: Session ID</p>
</li>
<li><p class="first"><em>RefPID</em> Reference PID for messages proxied by launchd</p>
</li>
<li><p class="first"><em>RefProc</em>: Reference process for messages proxied by launchd</p>
</li>
<li><p class="first"><em>ASLAuxTitle</em>: Auxiliary title string</p>
</li>
<li><p class="first"><em>ASLAuxUTI</em>: Auxiliary UTI</p>
</li>
<li><p class="first"><em>ASLAuxURL</em>: Auxiliary URL</p>
</li>
<li><p class="first"><em>ASLAuxData</em>: Auxiliary in-line data</p>
</li>
<li><p class="first"><em>SenderInstance</em>: Sender instance UUID</p>
</li>
</ul>
</div>
<div class="section" id="query-the-asl-database">
<h3>Query the ASL database<a class="headerlink" href="#query-the-asl-database" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>python3 -m asl query [-f FMT] [--format FMT] [-C] {-e KEY}... {-k KEY OP VALUE}...
</pre></div>
</div>
<p>Search the ASL database for matching records. All found records are printed on
stdout. By default all records are printed, and using the &#8220;-C&#8221;, &#8220;-e&#8221; and &#8220;-k&#8221; options
a subset can be selected:</p>
<p>When mutiple &#8220;-C&#8221;, &#8220;-e&#8221; and &#8220;-k&#8221; are present all of them must match (that is,
the subexpressions are combined with an &#8220;AND&#8221; operator).</p>
<ul>
<li><p class="first">&#8220;-f FMT&#8221; or &#8220;&#8211;format FMT&#8221;</p>
<p>Use FMT for formatting the records before printing them. The format string is
a format string that can be using with <tt class="xref py py-class docutils literal"><span class="pre">str.format</span></tt>, and it will be used
in such a way that non-existing keys are ignored.</p>
<p>When this option is not used all attributes of records are printed and records
are separated by a single empty line.</p>
</li>
<li><p class="first">&#8220;-C&#8221;</p>
<p>Add selection for messages destined for the Console.app. This is equivalent
to &#8220;-k Facility eq com.apple.console&#8221;</p>
</li>
<li><p class="first">&#8220;-e KEY&#8221;</p>
<p>Add a test that checks that attribute <em>KEY</em> exists.</p>
</li>
<li><p class="first">&#8220;-k KEY OP VALUE&#8221;</p>
<p>Add a test for the value of attribute <em>KEY</em>.</p>
<p>The following operators are recognized:</p>
<ul class="simple">
<li><em>eq</em>: The value must be equal to the specified value</li>
<li><em>ne</em>: The value must not be equal to the specified value</li>
<li><em>gt</em>: The value must be lexographically greater than the specified value</li>
<li><em>ge</em>: The value must be lexographically greater than or equal to the specified value</li>
<li><em>lt</em>: The value must be lexographically less than the specified value</li>
<li><em>le</em>: The value must be lexographically less than or equal to the specified value</li>
<li><em>match</em>: The value must match the specified regular expression (see regex(3))</li>
<li><em>startswith</em>: The value must start with the specified value</li>
<li><em>endswith</em>: The value must end with the specified value</li>
<li><em>contains</em>: The value must contain the specified value</li>
<li><em>==</em>: The value must be a number and must be equal to the specified value</li>
<li><em>!=</em>: The value must be a number and must be different from the specified value</li>
<li><em>&gt;</em>: The value must be a number and must be greater than the specified value</li>
<li><em>&gt;=</em>: The value must be a number and must be greater than or equal to the specified value</li>
<li><em>&lt;</em>: The value must be a number and must be less than the specified value</li>
<li><em>&lt;=</em>: The value must be a number and must be less than or equal to the specified value</li>
</ul>
<p>The string operators can be prefix with &#8220;C&#8221; to perform case folding before the comparison.</p>
<p>See the section on <a class="reference internal" href="#generic-logging">Generic logging</a> for a description of the standard keys.</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module as a script</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#writing-messages-to-the-console-app-default-view">Writing messages to the Console.app default view</a></li>
<li><a class="reference internal" href="#generic-logging">Generic logging</a></li>
<li><a class="reference internal" href="#query-the-asl-database">Query the ASL database</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Support development</h3>
<ul><li>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="5655733">
    <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1">
  </form>
</li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Release history"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> |</li>
        <li><a href="index.html">ASL 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ronald Oussoren.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>