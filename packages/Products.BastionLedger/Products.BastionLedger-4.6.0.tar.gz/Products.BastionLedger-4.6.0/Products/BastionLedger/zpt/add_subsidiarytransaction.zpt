<html tal:replace="structure context/manage_page_header"/>

<div tal:replace="structure string:<script type=text/javascript>"/>

    <span tal:omit-tag="" tal:repeat="jump python: range(0,8)">
    function clearDebit<div tal:replace="jump"/>()
    {
        checkbox = document.getElementById("debit<div tal:replace="jump"/>");
	checkbox.attributes.getNamedItem("checked").value = false;
    }

    function clearCredit<div tal:replace="jump"/>()
    {
        checkbox = document.getElementById("credit<div tal:replace="jump"/>");
	checkbox.attributes.getNamedItem("checked").value = false;
    }
    </span>
<div tal:replace="structure string:</script>"/>

    <div tal:replace="structure python:context.manage_form_title(context, context,
           form_title='<img src=%s/misc_/BastionLedger/bltransaction> %s' % (request['BASEPATH1'],
'Add Subsidiary Transaction'),
           help_product='BastionLedger',
           help_topic='add.stx')"/>

     <form action="manage_addBLSubsidiaryTransaction" method="post">
          <table cellspacing="0" cellpadding="4" border="0">
              <tr>
                  <td class="form-optional">Description</td>
                  <td class="form-element">
                      <input type="text" name="title" size="40">
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Date</td>
                  <td class="form-element">
                       <input type="text" name="effective:date" value="" size="10"
                              tal:attributes="value python:DateTime().strftime('%Y/%m/%d')">
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Control</td>
                  <td class="form-element">
                       <select name="control">
                           <option tal:repeat="control context/controlAccounts"
                                   tal:attributes="value control/getId"
                                   tal:content="control/prettyTitle"/>
                       </select>
                  </td>
              </tr>
          </table>
          <table border="0" cellpadding="4" cellspacing="0">
              <tr class="list-header">
                  <td class="list-item">&nbsp;</td>
                  <td class="list-item" align="center">DR/CR</td>
                  <td class="list-item">Description</td>
                  <td class="list-item">Account</td>
                  <td class="list-item">Amount</td>
              </tr>
              <tr class="" tal:repeat="i python: range(0,4)"
                  tal:attributes="class python: i % 2 and 'row-normal' or 'row-hilite'">
                  <input type="hidden" name="entries.subsidiary:records:int" value="0"/>
                  <td>
                    <img src="misc_/BastionLedger/blentry"/>
                  </td>
                  <td>
                     <input type="checkbox" name="entries.credit:records:boolean:ignore_empty" 
                            id="debitX" value="False" onclick="clearCreditX()" 
                           tal:attributes="id string:debit${i};onclick string:clearCredit${i}()"/>/
                     <input type="checkbox" name="entries.credit:records:boolean:ignore_empty" value="True"
                            id="creditX"  onclick="clearDebitX()"
                            tal:attributes="id string:credit${i};onclick string:clearDebit${i}()"/>
                  </td>
                  <td>
                     <input type="text" name="entries.title:records" size="40"/>
                  </td>
                  <td>
                     <select name="entries.account:records">
                         <option tal:repeat="acct python: context.Ledger.accountValues(sort_on='accno')"
                                 value="" tal:attributes="value acct/getId"
                                 tal:content="acct/prettyTitle"/>
                     </select>
                  </td>
                  <td>
                     <input type="text" name="entries.amount:records:currency:ignore_empty" size="15"/>
                  </td>
              </tr>
              <tr class="" tal:repeat="i python: range(4,8)"
                  tal:attributes="class python: i % 2 and 'row-normal' or 'row-hilite'">
                  <input type="hidden" name="entries.subsidiary:records:int" value="1"/>
                  <td>
                    <img src="misc_/BastionLedger/entry"/>
                  </td>
                  <td>
                     <input type="checkbox" name="entries.credit:records:boolean:ignore_empty" 
                            id="debitX" value="False" onclick="clearCreditX()" 
                           tal:attributes="id string:debit${i};onclick string:clearCredit${i}()"/>/
                     <input type="checkbox" name="entries.credit:records:boolean:ignore_empty" value="True"
                            id="creditX"  onclick="clearDebitX()"
                            tal:attributes="id string:credit${i};onclick string:clearDebit${i}()"/>
                  </td>
                  <td>
                     <input type="text" name="entries.title:records" size="40"/>
                  </td>
                  <td>
                     <select name="entries.account:records">
                         <option tal:repeat="acct python: context.accountValues(sort_on='accno')"
                                 value="" tal:attributes="value acct/getId"
                                 tal:content="acct/prettyTitle"/>
                     </select>
                  </td>
                  <td>
                     <input type="text" name="entries.amount:records:currency:ignore_empty" size="15"/>
                  </td>
              </tr>
              <tr>
                  <td class="form-element" colspan="4">
                     <input type="submit" value=" Add ">
       		  </td>
              </tr>
          </table>
     </form>
   
<html tal:replace="structure context/manage_page_footer"/>
