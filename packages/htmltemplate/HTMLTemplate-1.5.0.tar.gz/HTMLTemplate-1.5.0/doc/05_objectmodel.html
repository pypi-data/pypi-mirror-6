<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>HTMLTemplate | 5. The template object model</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css" media="all"><!--@import url(full.css);--></style>

</head>
<body>

<h1>5. The template object model</h1>

<!-- top navigation -->
<div class="navbar">
	<a href="04_templatedesign.html">Previous</a> | <a href="index.html">Up</a> | <a href="06_compileandrender.html">Next</a>
	
</div>

<!-- content -->
<div id="content">


<h2>About the object model</h2>


<p>The HTMLTemplate object model is really just a greatly simplified, highly specialised variation of the standard DOM, in which only specified HTML elements can be manipulated via a very compact, simple API that's designed specifically for templating.</p>

<p>The template object model is constructed from three classes: <code>Template</code>, <code>Container</code> and <code>Repeater</code> (a subclass of <code>Container</code>).</p>


<h2>Template objects</h2>

<p>The <code>Template</code> object forms the template's root node, representing the complete HTML document. It contains one or more <code>Container</code> and/or <code>Repeater</code> child nodes, and implements the <code>render</code> method used to generate finished pages.</p>


<h2>Container objects</h2>

<p>A <code>Container</code> object represents a modifiable HTML element. e.g.:</p>

<pre class="template">&lt;title node="con:pagetitle"&gt;...&lt;/title&gt;</pre>

<p>The HTML element may be empty - e.g. <code>&lt;br /&gt;</code> - in which case it has no content and only its tag attributes are modifiable, or non-empty - e.g. <code>&lt;p&gt;...&lt;/p&gt;</code> - in which case it may contain either modifiable content (plain text/markup) <em>or</em> other <code>Container</code> and/or <code>Repeater</code> nodes.</p>

<p>The standard <code>Container</code> node has a one-to-one relationship with its parent node, appearing only once when rendered.</p>


<p>Note that if a <code>Container</code> object's <code>omit</code> method is called, the HTML element it represents is omitted from the finished page. If its <code>omittags</code> method is called, only its content is included in the finished page.</p>


<h2>Repeater objects</h2>

<p>A <code>Repeater</code> node is a <code>Container</code> node that has a one-to-many relationship with its parent node, appearing zero or more times - once for each item in the collection being iterated by its <code>repeat</code> method. e.g.:</p>

<pre class="template">&lt;ul&gt;
    &lt;li node="rep:listitem"&gt;...&lt;/li&gt;
&lt;/ul&gt;</pre>

<p>The <code>Repeater</code> class's <code>repeat</code> method operates in a similar fashion to Python's built-in <code>map</code> function, except that that it passes an extra argument to the supplied callback function and doesn't return a result. For example, the call:</p>

<pre><code>repeaternode.repeat(callback, [1, 2, 3, 4, 5], *args)</code></pre>

<p>will call the given callback function five times, each time passing it a copy of <code>repeaternode</code> along with an item from the given list, as well as any additional arguments supplied by the user. The callback function can then manipulate the supplied <code>Repeater</code> object, inserting data into the HTML element's tag attributes and/or content, or modifying its child nodes, or calling its <code>omit</code> method to prevent that instance of the <code>Repeater</code> from being rendered in the finished page.</p>


<!-- TO DO: note on omit, omittags -->

</div>

<!-- bottom navigation -->
<div class="navbar">
	<a href="04_templatedesign.html">Previous</a> | <a href="index.html">Up</a> | <a href="06_compileandrender.html">Next</a>
	
</div>

<!--footer-->
<p class="footer">&copy; 2008 HAS</p>
</body>
</html>