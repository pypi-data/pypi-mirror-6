#!/usr/bin/env python

import sys, json

def decode_or_str(file):
    text = file.read()
    try:
        return json.loads(text)
    except ValueError:
        return text

if len(sys.argv) == 1:
    args = '-'
else:
    args = sys.argv[1:]

out = []
for fn in sys.argv[1:]:
    if fn == '-':
        out.append(decode_or_str(sys.stdin))
    with open(fn) as f:
        out.append(decode_or_str(f))
json.dump(out, sys.stdout)
                       
