<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">
 
<body>
 
    <div metal:fill-slot="main"
         tal:define="errors options/state/getErrors;
                     editable python: context.status() not in ('posted', 'reversed', 'cancelled');
                     utool context/@@plone_portal_state/portal_url;">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" tal:attributes="src string:${utool}/${icon}"/>&nbsp;Edit Entry</h1>

      <form name="edit_form"  action="."  method="post" 
            tal:attributes="action string:${context/getId}/${template/getId}" >

             <div tal:define="error errors/title|nothing;
                  Title request/title | context/Title"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Description</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="title" name="title" value="" size="50"
                         tal:attributes="value Title;"/>
             </div>

             <div class="formHelp" tal:condition="not: editable">To edit more fields, you need to make this entry's transaction unposted.</div>

             <div tal:condition="editable"
                  tal:define="error errors/amount|nothing;
                              Amount request/amount | context/amount"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Amount</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="amount" name="amount:currency" value="" size="12"
                         tal:attributes="value Amount;"/>
             </div>

             <div tal:define="error errors/posted_amount|nothing;
                              posted_amount context/foreignAmount"
                  tal:condition="python: editable and posted_amount"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Foreign Currency Amount</div>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_posted_amount">
                     This is a multi-currency transaction.  The underlying ledger FX valuation
                     of this entry is/will be fixed at this amount.
                 </div>

                 <input type="text" id="posting_amount" name="posting_amount:currency" value="" size="12"
                         tal:attributes="value request/posting_amount | posted_amount;"/>
             </div>

             <div>
                 <input class="context"
                        
                        type="submit"
                        name="form.button.Edit"
                        value="Edit"
                        i18n:attributes="value" />
             </div>
  

             <input type="hidden" name="form.submitted" value="1" />

      </form>


    </div>
 
</body>
</html>
