<html tal:replace="structure context/manage_page_header"
      tal:define="global slots container/getTimesheetSlots"/>

     <span tal:condition="python: request['URL'][-10:] != 'index_html'" 
           tal:replace="structure python:container.manage_tabs(help_topic='receivables.stx',
                                                               help_product='BastionLedger')"/>

    <table width="100%" cellpadding="5" cellspacing="0" border="0">
      <tr>
         <td valign="top" align="left" colspan="2">
               <div class="form-label" align="left">
                   Timesheet For Week Ending <span tal:content="python:context.day.strftime('%A %B %d, %Y')"/>
               </div>
               <br/>
         </td>
      <tr>
        <td class="form-label" colspan="2" tal:define="actions context/actions">
           <form action="manage_status_modify" method="get" tal:condition="actions">
                Status: <span tal:replace="context/status"/>
                <select name="workflow_action">
                     <option tal:repeat="action actions"
                             tal:attributes="value action/transition/id"
                             tal:content="action/title"/>
                </select>
                <input type="submit" value=" Change "/>
            </form>
         </td>
      </tr>
      <tr class="list-header">
          <td>&nbsp;</td>
          <td tal:repeat="slot slots" class="form-label" tal:content="slot/title"/>
      </tr>
      <form action="manage_edit" method="post" tal:condition="python: context.status() == 'rejected'">
            <input type="hidden" name="date:date" value="" tal:attributes="value context/day">
           <tr tal:repeat="day context/select_day_of_week">
               <input type="hidden" name="entries.day:records:date"
                 value="" tal:attributes="value python:context/day - repeat['day'].index">
               <td class="form-label" tal:content="day"/>
               <td tal:repeat="slot slots">
                  <input type="text" name="" size="5" maxlength="5" value=""
                         tal:attributes="name python:'entries.%s:float:records' % slot.getId();
                                         value python: slot.defaults[repeat['day'].index]">
               </td>
           </tr>
           <tr><td class="form-element">
                   <input type="submit" value=" Edit ">
               </td>
           </tr>
       </form>
       <tr tal:repeat="day context/select_day_of_week" tal:condition="python: context.status() != 'rejected'">
           <td class="form-label" tal:content="day"/>
           <td tal:repeat="slot slots" class="form-element"
               tal:content="python: slot.defaults[repeat['day'].index]"/>
       </tr>
     </table>

<html tal:replace="structure context/manage_page_footer"/>
