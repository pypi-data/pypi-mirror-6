#!/usr/bin/python
# -*- coding: UTF-8 -*-

from sys import argv
from os import walk, path, system
import json
from radio.data import radios


#
# Usage
#

usage = """
Usage:
$ radio <radio_id>			Plays radio_id. Press q to quit.
$ radio -l				Lists available radios.
$ radio -a radio_id "radio name" url	Add/update radio_id into radio list.
$ radio -d radio_id			Delete radio_id from radio list.
"""


#
# if something is missing, prints help, else plays the radio
#

if len(argv) < 2:
    print(usage)
elif argv[1] == '-l':
    radios.show()
elif argv[1] == '-a':
    if len(argv) != 5:
        print('Error: Not enough or too many parameters.\n\n%s' % usage)
    else:
        radios.add(argv[2], argv[3], argv[4])
elif argv[1] == '-d':
    if len(argv) != 3:
        print('Error: Not enough or too many parameters.\n\n%s' % usage)
    else:
        radios.delete(argv[2])
else:
    if radios.rl.get(argv[1], 'error') == 'error':
        print(usage)
    else:
        radio_id = argv[1]
        system('mplayer %s' % radios.rl[radio_id]['url'])

