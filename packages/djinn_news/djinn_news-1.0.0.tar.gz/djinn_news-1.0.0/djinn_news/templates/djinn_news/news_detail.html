{% extends "djinn_contenttypes/base_detail.html" %}

{% load auth_tags i18n djinn_contenttypes %}
{% load pu_in_favorites_tags %}
{% load contentaction_tags %}

{% block title %}{{ object.title }}{% endblock %}

{% block extra_actions %}
    {% favorite_action object %}
    {% retweet_content object %}
{% endblock extra_actions %}

{% block content %}

<section class="intro">
  <p>{{ object.text|default:""|safe }}</p>
</section>

{% if object.documents %}
<section id="attachments">
  <h3>{% trans "Gekoppelde documenten" %}</h3>
  <ul class="document-list">

    {% for item in object.documents %}
    <li>
      {% if item.attachment %}
      <span class='docinfo' 
            style='background-image: url({{ item.attachment.thumbnail_url }})'>
        <a href="{{ item.attachment.download_url }}">
          {{ item.attachment.title }}
        </a>
      </span>
      {% else %}
      <span class='docinfo'>
        <a href="{{ item.get_absolute_url }}">{{ item.title }}</a>
      </span>
      {% endif %}
      </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if object.show_images and object.images.all.count %}
<section id="images">
  
  {% if object.images.all.count > 1 %}
  <p>{% trans "Click on an image to enlarge" %}</p>
  {% endif %}
  
  <div class="imgDisplay">
    <img id="display-image" src="{{ object.images.all.0.get_display_url }}"/>
  </div>
  
  <script>
    function loadImage(url) {
    $("#display-image").attr('src', url);
    }
  </script>
  {% if object.images.all.count > 1 %}
  <div class="imgList">
    {% for item in object.images.all %}
    <img onclick="loadImage('{{ item.get_display_url }}')"
         src="{{ item.get_product_media_thumb_url }}"/>
    {% endfor %}
  </div>
  {% endif %}
  
</section>
{% endif %}

{% endblock %}
