<html tal:replace="structure context/manage_page_header"/>
     <span tal:replace="structure context/manage_tabs"/>


      <form action="" tal:attributes="action request/URL1" method="post">
         <table cellspacing="0" cellpadding="2" border="0">
              <tr>
                  <td/>
                  <td class="form-label">Title</td>
                  <td class="form-element">
                      <input type="text" name="title" size="35" value=""
                            tal:attributes="value context/title | nothing">
                  </td>
              </tr>
              <tr>
                  <td/>
                  <td class="form-label" valign="top">Description</td>
                  <td class="form-element">
                      <textarea rows="4" cols="50" name="description" tal:content="context/description"/>
                  </td>
              </tr>
               <tr>
                  <td/>
                  <td class="form-label">Unit</td>
                  <td class="form-element">
                      <input type="text" name="unit" size="5" value=""
                            tal:attributes="value context/unit">
                  </td>
              </tr>
               <tr>
                  <td/>
                  <td class="form-label">Weight</td>
                  <td class="form-element">
                      <input type="text" name="weight" size="5" value=""
                            tal:attributes="value context/weight">
                  </td>
              </tr>
               <tr>
                  <td/>
                  <td class="form-label">On Hand</td>
                  <td class="form-element">
                      <input type="text" name="onhand" size="8" value=""
                            tal:attributes="value context/onhand">
                  </td>
              </tr>
                <tr>
                  <td/>
                  <td class="form-label">List Price</td>
                  <td class="form-element">
                      <input type="text" name="listprice:currency" size="12" value=""
                             tal:attributes="value context/listprice"/>
                  </td>
              </tr>
                <tr>
                  <td/>
                  <td class="form-label">Sell Price</td>
                  <td class="form-element">
                      <input type="text" name="sellprice:currency" size="12" value=""
                             tal:attributes="value context/sellprice"/>
                  </td>
              </tr>
                <tr>
                  <td/>
                  <td class="form-label">Last Cost</td>
                  <td class="form-element">
                      <input type="text" name="lastcost:currency" size="12" value=""
                             tal:attributes="value context/lastcost"/>
               </td>
              </tr>
             <tr>
                  <td/>
                  <td class="form-optional" valign="top">Notes</td>
                  <td class="form-element">
                      <textarea name="notes:lines" rows="4" cols="40"> 
                            <span tal:omit-tag="" tal:repeat="line context/notes"
                                  tal:content="line"/>
                      </textarea>
                  </td>
             </tr>
             <tr>
                  <td/>
                  <td class="form-label">Inventory Account No.</td>
                  <td class="form-element">
                      <select name="inventory_accno"> 
                            <span tal:repeat="account python: context.available_accounts('part_inv')">
                                  <option value="" 
                                          tal:content="string: ${account/id} - ${account/title}"
                                          tal:attributes="value account/id;
                                                          selected python: account.getId() == context.inventory_acct and 1 or 0"/>
                            </span>
                      </select>
                  </td>
              </tr>
             <tr>
                  <td/>
                  <td class="form-label">Income Account No.</td>
                  <td class="form-element">
                      <select name="income_accno"> 
                            <span tal:repeat="account python: context.available_accounts('part_inc')">
                                  <option value=""
                                          tal:content="string: ${account/id} - ${account/title}"
                                          tal:attributes="value account/id;
                                                          selected python: account.getId() == context.income_acct and 1 or 0"/>
                            </span>
                      </select>
                  </td>
              </tr>
             <tr>
                  <td/>
                  <td class="form-label">Expense Account No.</td>
                  <td class="form-element">
                      <select name="expense_accno"> 
                            <span tal:repeat="account python: context.available_accounts('part_cogs')">
                                  <option value="" 
                                          tal:content="string: ${account/id} - ${account/title}"
                                          tal:attributes="value account/id;
                                                          selected python: account.getId() == context.expense_acct and 1 or 0"/>
                            </span>
                      </select>
                  </td>
              </tr>
    <div tal:omit-tag="" tal:repeat="prop context/propertyMap">
       <tr tal:define="value python: context.getProperty(prop['id'])"
           tal:omit-tag="" tal:condition="python: not prop['id'] in ('title', 'unit', 'weight', 'onhand', 'notes', 'listprice', 'sellprice', 'lastcost','description')">
         <td valign="top">
            <input type="checkbox" name="" value="1"
                   tal:attributes="name string:_ids:${request/management_page_charset_tag|nothing}string:list; value prop/id" >
         </td>
         <td  valign="top" class="form-label" tal:content="prop/id"/>
         <td class="form-element">
            <input type="text"  name="" value=""
                   tal:condition="python: prop['type'] in ('string', 'int', 'date', 'float', 'selection', 'currency', 'tokens', 'ustring', 'utokens')"
                   tal:attributes="name string:${prop/id}:${prop/type}; value value"/>
            <textarea tal:condition="python: prop['type'] in ('lines', 'multiple selection', 'text', 'utext', 'ulines')"
                      rows="3" cols="50"
                      tal:attributes="name string:${prop/id}:${prop/type}"
                      tal:content="python: '\n'.join(value)"/>
            <input type="checkbox" name="" value="1"
                   tal:condition="python: prop['type'] in ('boolean',)"
                   tal:attributes="name string:${prop/id}:${prop/type}; checked python: value and 1 or 0"/>
         </td>
       </tr>
    </div>
              <tr>
                 <td colspan=3>
                   <input type="submit" name="manage_editProperties:method" value=" Edit ">
        <div tal:omit-tag="" tal:condition="context/property_extensible_schema__">
            <input name="manage_delProperties:method" type="submit"
                   class="form-element" value="Delete" />
        </div>
                 </td>
              </tr>
        </table>
      </form>

<div tal:omit-tag="" tal:condition="context/property_extensible_schema__">

    <form action="" tal:attributes="action request/URL1" method="post">

        <p class="form-help">
        To add a new property, enter a name, type and value for the new
        property and click the &quot;Add&quot; button.
        </p>

       <table>
          <tr>
             <td align="left" valign="top" class="form-label">Name</td>
             <td align="left" valign="top">
                 <input type="text" name="id:Xstring" size="30" value="" 
                        tal:attributes="name string:id:${request/management_page_charset_tag|nothing}string"/>
             </td>
             <td align="left" valign="top" class="form-label">Type</td>
             <td align="left" valign="top">
                <div class="form-element">
                   <select name="type">
                      <option>boolean</option>
                      <option>currency</option>
                      <option>date</option>
                      <option>float</option>
                      <option>int</option>
                      <option>lines</option>
                      <option>long</option>
                      <option selected>string</option>
                      <option>text</option>
                      <option>tokens</option>
                      <div tal:omit-tag="" 
                           tal:condition="python: request.get('management_page_charset','') == 'UTF-8'">
                          <option>ulines</option>
                          <option>ustring</option>
                          <option>utext</option>
                          <option>utokens</option>
                      </div>
                      <option>selection</option>
                      <option>multiple selection</option>
                   </select>
                </div>
             </td>
          </tr>
          <tr>
             <td align="left" valign="top" class="form-label">Value</td>
             <td colspan=2 align="left" valign="top">
                <div tal:condition="python: request.get('management_page_charset','') == 'UTF-8'" tal:omit-tag="">
                   <input type="text" name="value:UTF-8:ustring" size="30" />
                </div>
                <div tal:condition="python: request.get('management_page_charset','') != 'UTF-8'" tal:omit-tag="">
                    <input type="text" name="value:string" size="30" />
                </div>
              </td>
              <td align="right" valign="top" class="form-element">
                  <input class="form-element" type="submit" name="manage_addProperty:method" value=" Add " />
              </td>
          </tr>
      </table>
   </form>
</div>


<html tal:replace="structure context/manage_page_footer"/>




