<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>
 
  <div metal:fill-slot="main"
       tal:define="processes python: context.portal_bastionledger.processesForLedger(context);
                   utool context/@@plone_portal_state/portal_url;">

      <h1 class="documentFirstHeading"><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/> Processes</h1>

        <div class="documentDescription" tal:content="context/Description">
            description
        </div>

        <metal:listingmacro define-macro="listing">
        <tal:listing condition="processes">

            <dl>
                <tal:entry tal:repeat="obj processes">

                <dt metal:define-macro="listitem"
                    tal:define="url string:${context/absolute_url}/${obj/getId};
                                icon python: obj.getIcon(1)">
                    <a href="#" tal:attributes="href url">
                        <img src="" alt=""
                             tal:attributes="src string:${utool}/${icon};alt obj/title_or_id" />
                        <span tal:replace="obj/title_or_id"/>
                    </a>
                </dt>
                <dd tal:content="obj/Description"/>

                </tal:entry>
            </dl>

        </tal:listing>

        <p class="discreet"
           tal:condition="not: processes" i18n:translate="description_no_items_in_folder">
         There are currently no processes defined for this ledger.
        </p>

        </metal:listingmacro>

      <div tal:replace="structure provider:plone.belowcontentbody">
           Document actions (print, sendto etc)
      </div>

    </div>

</html>
