<html>
   <head>
      <style>
        tr { page-break-before: never;
             page-break-after: never;}
      </style>
   </head>

   <body tal:define="dispatches python: context.dispatches_array(request.get('shiptoaddress', []), 
				 			         map(lambda x: x[1], 
                                                                     filter(lambda x: x[0].startswith('labelpos'),
                                                                         request.form.items())));">
      <table border="0" cellpadding="10" cellspacing="0">
         <tr tal:repeat="row python: range(0, context.label_rows)">
            <td tal:repeat="col python: range(0, context.label_cols)"
                 width="227" height="137" valign="center"
                 tal:attributes="width context/label_width; height context/label_height">
               <span style="font-family: helvetica; font-weight: bold; font-size: 10pt"
                     tal:content="structure python: dispatches[row * context.label_cols + col]"/>
            </td>
         </tr>
      </table>
   </body>

</html>