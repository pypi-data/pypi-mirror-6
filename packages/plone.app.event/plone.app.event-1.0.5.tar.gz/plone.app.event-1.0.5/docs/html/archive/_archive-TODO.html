

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PLEASE NOTE &mdash; plone.app.event 1.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="plone.app.event 1.0dev documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">plone.app.event 1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="please-note">
<h1>PLEASE NOTE<a class="headerlink" href="#please-note" title="Permalink to this headline">¶</a></h1>
<p>This file is for reference and will be removed when all relevant issues are
handled by the github issue tracker. Here are still some TODO&#8217;s which should be
checked again.</p>
</div>
<div class="section" id="legend">
<h1>legend<a class="headerlink" href="#legend" title="Permalink to this headline">¶</a></h1>
<p>OK ... that item is done
IP ... that item is in progress
ISSUED ... moved to github tracker</p>
<div class="section" id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<p>OK - plone.app.collection: integrate, add relative time delta</p>
<dl class="docutils">
<dt>ISSUED - generalize IRecurrence adapter. move out o&#8217; contenttypes and use generic</dt>
<dd>event accessor to access event&#8217;s attributes.</dd>
<dt>ISSUED - use generic event accessor also for ical serialization. no need for</dt>
<dd>content-type specific adapters then.</dd>
</dl>
<p>ISSUED - plone.app.event.at in seperate egg...</p>
<p>ISSUED - GMT offsets have to be supported ... maybe a converter btw olson and GMT . look
into pytz for a converter</p>
<p>ISSUED - timezone getting/in which timezone is an event displayed. &#8211;/ document!
generic event aceesor : also for json...</p>
<p>whole day handler : good self speaking test cases,</p>
<p>timezone of the request???
ISSUED - different timezone conversion strategies.... &gt; display always in portal timezone, display in user timezone..., ...
ISSUED - prefix with _...</p>
<div class="section" id="bug">
<h3>BUG<a class="headerlink" href="#bug" title="Permalink to this headline">¶</a></h3>
<p>OK - recurring events: when searching for events within a timeframe, the
IRecurrence.occurrences method possibly returned a list where starts and ends
are of different lenght, leading into an error.  now, the end dates of the
occurrences list are calculated from the start date + a duration.</p>
<p>OK+Test: calendarportlet: unicodedecodeerror with umlauts in title, desc or location.</p>
<div class="section" id="portlet-calendar">
<h4>portlet_calendar<a class="headerlink" href="#portlet-calendar" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>next/previous: overlay displays raw-overlay string</li>
</ul>
<p>ISSUED - remove kss dependency, use jquery-only</p>
</div>
</div>
<div class="section" id="ploneconf-talk">
<h3>PLONECONF TALk<a class="headerlink" href="#ploneconf-talk" title="Permalink to this headline">¶</a></h3>
<p>ISSUED - fix icalendar timezone export</p>
<p>OK - plone.formwidget.datetime
OK -    fix for AT and DX</p>
<p>OK polish dx type
OK    integrate recurrence widget
OK    defaults for recurrencewidget.
OK    ical export</p>
<p>OK fix vincentfretin&#8217;s start/end js (unify datetime templates for that?)</p>
<p>ISSUED - create uninstall profiles
OK - create pre-plone43 profiles (uninstalls default plone stuff)</p>
</div>
<div class="section" id="thet">
<h3>thet<a class="headerlink" href="#thet" title="Permalink to this headline">¶</a></h3>
<p>ISSUED thet - fix whole_day event export.... end-date is set startdate+1. in some cases end-date is two days after
start-date. this has something to do with utc conversion...
or set end-date to same date as start date, which is semantically more correct?</p>
<p>ISSUED FIRST: fix timezone support in icalendar export. then this issue is also gone.</p>
<dl class="docutils">
<dt>thet - atevent: after changes to default_start and default_end, start+end is now 1,</dt>
<dd>resp. 2 hours in future. check why</dd>
</dl>
<p>thet - add portlet_calendar and portlet_events on startpage (this one with unpublished and published events).</p>
<p>thet - show unpublished events as such in portlet_events and portlet_calendar</p>
</div>
<div class="section" id="ical">
<h3>ical<a class="headerlink" href="#ical" title="Permalink to this headline">¶</a></h3>
<p>ISSUED - ical export, dx types: UID not present in events</p>
<dl class="docutils">
<dt>ISSUED - Use VTIMEZONE compoenent and TZID properties in ical exports for every</dt>
<dd>date/datetime</dd>
</dl>
<p>ISSUED - Proper ATTENDEES support for icalendar export</p>
<p>OK - fix tests</p>
</div>
<div class="section" id="datetime-widget">
<h3>datetime widget<a class="headerlink" href="#datetime-widget" title="Permalink to this headline">¶</a></h3>
<p>WONTFIX - 1) - unify plone.formwidget.datetime templates</p>
<p>OK - 2) - fix vincent&#8217;s dt-javascript&#8217;s, which are failing now</p>
<ul class="simple">
<li>eventually merge supton&#8217;s uu.smartdate with plone.formwidget.datetime
<a class="reference external" href="http://bazaar.launchpad.net/~upiq-dev/upiq/uu.smartdate/changes">http://bazaar.launchpad.net/~upiq-dev/upiq/uu.smartdate/changes</a></li>
<li>DX: when calculating default_end time at 23:xx, its 0:xx. the hour component
isn&#8217;t displayed in the datetime widget.</li>
<li>move parts/omelette/Products/CMFPlone/skins/plone_form_scripts/validate_start_end_date.vpy
to plone.formwidget.dateinput or plone.app.event.</li>
</ul>
<p>OK - years_range - calendar starting year, calendar future years options in datetimewidget.</p>
<p>ISSUED - option: use textinput style with fallback to selectors if no js is avail.</p>
<p>ISSUED - integrate timepicker (adapted from mozi)</p>
</div>
<div class="section" id="recurring-widget">
<h3>recurring widget<a class="headerlink" href="#recurring-widget" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>remove the leading zero 2nd method.</li>
</ul>
</div>
<div class="section" id="index">
<h3>index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>integrate lennart&#8217;s plone.app.eventindex</li>
</ul>
<p>OK (artsprint) - benchmarks for both indices</p>
<ul class="simple">
<li>usage of IIBTree - see discussion on plone-dev</li>
</ul>
<p>test if IIBTrees or set are faster
&gt;&gt;&gt; ts = time.time(); b=difference(IISet(a), IISet(b)); time.time() - ts
0.014604091644287109
&gt;&gt;&gt; ts = time.time(); b=set(a) - set(b); time.time() - ts</p>
<ul class="simple">
<li>do we need to add the indices to ATContentTypes.criteria.__init__ indices
Constants?</li>
</ul>
</div>
<div class="section" id="types">
<h3>types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<p>ISSUED - uninstall profiles</p>
<ul class="simple">
<li>&#8220;no end date&#8221; boolean option</li>
</ul>
</div>
<div class="section" id="dexterity-behaviors-types">
<h3>dexterity behaviors / types<a class="headerlink" href="#dexterity-behaviors-types" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>OK - editing DX types with event behavior fails, since a tznaive DT is compared</dt>
<dd>to timzone aware DT. see inline TODO statements.</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>in metadata catalog, timezone&#8217;d times should reside, not un-timezone&#8217;d (see</dt>
<dd><p class="first last">atevent)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>z3cform: for time 0:00, the hour is not displayed. when displaying, 12:00</dt>
<dd><p class="first last">AM is shown.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="timezone-support">
<h3>timezone support<a class="headerlink" href="#timezone-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>eventually provide configlet to configure TZ per user
user should be able to select his timezone in user properties</li>
<li>allow no TZ setting on content context at all - this solves &#8220;world plone
day&#8221; problem (event in different timezones, whole day in every timezone)</li>
<li>GenericSetup import profile for setting the default timezone on install time
(and upgrade time as well).</li>
<li>if no timezone is selected: same as mail settings: note in nonfig area - at least
display in edit form to link in control panel.</li>
</ul>
<p>FIXES:</p>
<ul class="simple">
<li>on fresh install, when creating an event - no timezones are configured and
cannot be selected - but are mandatory. at least a default timezone has to
be selected in the event-settings configlet. that should be set at install
time.</li>
</ul>
</div>
<div class="section" id="documentation">
<h3>documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>plip documentation</li>
<li>document daterecurringindex benchmark results</li>
<li>document TZ behavior with examples</li>
<li>document api to get lsit of event</li>
<li>sphinx API autodoc?</li>
<li>document removal of ICalendarSupport (interface for ical export ability) in
plone.app.event.interfaces. MAYBE provide that interface in ATContentTypes
for backwards compatibility</li>
</ul>
</div>
<div class="section" id="general">
<h3>general<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>ISSUED - Factor out generic methods without plone.app.* or Zope2 dependencies and move</dt>
<dd>them to plone.event.</dd>
</dl>
<p>OK - Solgema * recurrence widget dateinput is behind overlay</p>
<ul class="simple">
<li>integrate a localized, nice formated duration function</li>
<li>Rethink the catalog metadata entries. ADD whole_day (Solegma asked for it).</li>
<li>Generic icalendar types interfaces for event, journal, todo in plone.event</li>
<li>Check ordering of schema fields.</li>
</ul>
<p>OK - Refactor tests.</p>
<ul class="simple">
<li>the content types depend on event handlers.
notify(ObjectModifiedEvent(event)) has always to be called manually if object
isn&#8217;t modified by a form. is that failure proof?</li>
<li>eventually remove recurrence functionality for plip submission?</li>
<li>improve jenkins integration</li>
</ul>
</div>
<div class="section" id="cmfplone">
<h3>CMFPlone<a class="headerlink" href="#cmfplone" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>remove portal_skins/plone_content/event_view.pt</li>
<li>remove portal/icon_export_vcal.png</li>
<li>remove label_add_to_vcal</li>
</ul>
</div>
<div class="section" id="cmfcalendar-deprecation">
<h3>CMFCalendar deprecation<a class="headerlink" href="#cmfcalendar-deprecation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>deprecate/remove portal_calendar from Products.CMFPlone</li>
<li>migration steps</li>
<li>Remove calendar configlet from plone.app.controlpanel</li>
<li>provide an utility for portal-message/warning viewlet info, so that warnings
can be injected and that warning-checker code must not be in the
controlpanel-overview template anymore.</li>
<li>permissions of cmfcalendar in plone.app.event, if possible - or drop em.
martin says in his book, that cmfcalendar permissions are an historical
accident. upgrade step probably needed.</li>
</ul>
</div>
<div class="section" id="migration-steps">
<h3>migration steps<a class="headerlink" href="#migration-steps" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>if default timezone is not set, migration cannot run</li>
<li>migration from old ATEvent (catalog update)</li>
<li>Check if any upgrade steps are neccassary for changed permission names (see
config.py)</li>
</ul>
</div>
<div class="section" id="future">
<h3>future<a class="headerlink" href="#future" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>provide caldav support, using webdav. make Zope2.webdav obsolete and use
z3c.dav or wsgidav or whatever.</li>
<li>Integrate RSVP - Resource reSerVation Protocol (IP, RFC 2205)</li>
</ul>
</div>
</div>
<div class="section" id="done">
<h2>DONE<a class="headerlink" href="#done" title="Permalink to this headline">¶</a></h2>
<p>OK plone.forminput.recurrence * create z3cform based recurrence widget for use with dx types</p>
<p>OK * register sample DX event with event_view</p>
<p>OK * unify AT and DX event browser view</p>
<dl class="docutils">
<dt>OK * use p.a.event.base.get_portal_events all over, where needed (e.g. event</dt>
<dd>portlet)</dd>
<dt>OK * make ical adapters for dx based types</dt>
<dd>OK . remove adapters for IATFolder, etc. since IFolder does the same.
NO . can you use IFolder also for IDexterityContainer objects?</dd>
</dl>
<p>OK - DX events: calendar portlet breaks</p>
<p>OK - thet * support allday events in icalendar: export date-only, enddate+1day</p>
<p>OK - Cleanup plone.event for unused methods</p>
<p>OK - Cleanup plone.event for critical dependencies.</p>
<dl class="docutils">
<dt>OK - thet - ditch Products.CMFCalendar, if possible.</dt>
<dd><p class="first">in branch - merge-CMFCalendar</p>
<p>cmfcalendar seems to be only used by calendarportlet.
$ grept cmfalendar parts/omelette/*</p>
<dl class="docutils">
<dt>OK - thet - calendarportlet: refactoring for removed portal_calendar dependency and</dt>
<dd><dl class="first last docutils">
<dt>new plone.app.event.base based approach.</dt>
<dd><p class="first">NO - calendar portlet using jquery tools calendar?
- template change, so that a viewlet can also use calendar via</p>
<blockquote class="last">
<div>metal:macros.</div></blockquote>
</dd>
</dl>
</dd>
</dl>
<p>OK - thet - merge calendar and plone.app.event portlet.
OK - reimplement important functionality from calendar configlet</p>
<blockquote class="last">
<div>-&gt; upgrade step</div></blockquote>
</dd>
<dt>NO - eventually ditch start_date and end_date, replacing them with more RFC5545</dt>
<dd>names dtstart, dtend...
!!! probably NOT. that might cause trouble.
!!! on the other hand... it&#8217;s not used anyways and the api changed from pre
plone.app.event ATEvent implementation anyways...
$ grept start_date parts/omelette/*</dd>
<dt>OK - thet (regebro) * finish icalendar 3.0 branch, where __str__ isn&#8217;t used</dt>
<dd><ul class="first last simple">
<li>to_ical method into event content type. method may use more generic one.</li>
</ul>
</dd>
</dl>
<p>OK - thet (regebro) * rrule freq must be present. make/update validator with that.</p>
<p>OK - thet * make generic ical adapter.</p>
<p>OK - regebro - bring forward plone.formwidget.recurrence and jquery.recurrence</p>
<dl class="docutils">
<dt>OK * portlets renamed, fix it in old instances: event -&gt; portlet_event, calendar -&gt;</dt>
<dd><blockquote class="first">
<div>portlet_calendar (calendar is a python module.)</div></blockquote>
<p class="last">not needed, since legacy calendar and event modules left in
plone.app.portlets.</p>
</dd>
<dt>OK * plone.app.event.browser.event_view.pt -&gt; eventually make view more generic</dt>
<dd>and usable for dx also... by replacing widget-calls</dd>
</dl>
<p>OK - garbas/thet - use icalendar instead of plone.rfc5545 / plone.event</p>
<dl class="docutils">
<dt>OK - thet - Refactor plone.app.event for usage of an subpackage &#8220;at&#8221; (later</dt>
<dd>also &#8220;dx&#8221;) where all ATCT (later also dexterity) related stuff resides.
when dexterity becomes one day the default content type framework, we won&#8217;t
depend on AT anymore...</dd>
<dt>OK - thet - archetypes.datetimewidget, collective.z3cform.datetimewidget -&gt; merge into</dt>
<dd>plone.formwidget.dateinput</dd>
</dl>
<p>OK - thet - move tests to plone.app.testing</p>
<p>OK - remove all vcal references in favor or ical</p>
<dl class="docutils">
<dt>OK - thet - here are git:// and git&#64; checkouts for ppl without/with rw permissions.</dt>
<dd>maybe https handles both?</dd>
<dt>OK - ATEvent</dt>
<dd>[X] recurrence field goes after end date.
[ ] hide text area with css display:none
[X] remove schemata recurrence
[ ] provide checkbox &#8220;this date recurrs ...&#8221; and toggle textarea then</dd>
</dl>
<p>OK - DX Events: Provide it. providing behaviors, based on plone.app.page</p>
<dl class="docutils">
<dt>OK * dependency on plone.folder as well as plone.app.collection are only for</dt>
<dd>registering ical adapters and might make backporting harder than neccassary.
optional via zcml:condition</dd>
</dl>
<p>OK * p.a.event tests: ATEvent cannot be created - the factory method is not created... investigate.</p>
<p>OK - datetimewidget calendar images missing...
OK - new TZ field on ATEvent. store all dates in UTC timezone. store TZ extra.</p>
<blockquote>
<div>display dates in user&#8217;s timezone (via TZ fetcher utility). use getter and
setter to calculate timezones (get: UTC-userTZ set: userTZ-&gt;UTC).</div></blockquote>
<dl class="docutils">
<dt>OK - provide configlet to configure portal&#8217;s TZ. use dropdown for</dt>
<dd>default_timezone and in-out-widget for allowed_timezones (which then are
used to filter tz&#8217;s with elephantvocabulary)</dd>
</dl>
<p>OK - plone.event -&gt; TZ vocabulary
OK - plone.app.event -&gt; TZ vocabulary based on elephantvocabulary filter</p>
<blockquote>
<div>get filtered items or display items from plone.registry</div></blockquote>
<dl class="docutils">
<dt>OK - TZ fetcher utility</dt>
<dd>OK - plone.event: OS TZ
OK - plone.app.event portal TZ
- context, user, portal TZ</dd>
<dt>OK - move buildout configs out of coredev/plip into p.a.event to be used</dt>
<dd>independently</dd>
</dl>
<p>OK - merge branches with trunk</p>
<dl class="docutils">
<dt>OK - buildout: there is a git checkout which isn&#8217;t handled by mr.developer because it&#8217;s no</dt>
<dd>python package and thus could break. mr.developer supports co option
egg=false ... use that.</dd>
</dl>
<p>OK - index: complete the benchmark products.daterecurringindex</p>
<p>OK - index: sync with hanno&#8217;s changes to dateindex</p>
<p>OK - TZ: provide widget for TZ field described above</p>
<dl class="docutils">
<dt>OK - jure - ATEvent: error when submitting random data to recurrence field. catch</dt>
<dd>dateutil&#8217;s error and raise validation error. display error as error message.</dd>
</dl>
<p>OK - in plone.event.utils now - isSameDay, isSameTime -... taking event as parameter. change to date1, date2</p>
<p>OK - toDisplay, doing nearly the same as function below. factor out a to_display
function which can used in both</p>
<dl class="docutils">
<dt>OK - fix portal_calendar or filtered occurences. calendar portlet is showing event</dt>
<dd>from previous month every day.</dd>
</dl>
<p>OK - avoid dependency on portal_calendar or bring that tool in here.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PLEASE NOTE</a></li>
<li><a class="reference internal" href="#legend">legend</a><ul>
<li><a class="reference internal" href="#todo">TODO</a><ul>
<li><a class="reference internal" href="#bug">BUG</a><ul>
<li><a class="reference internal" href="#portlet-calendar">portlet_calendar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ploneconf-talk">PLONECONF TALk</a></li>
<li><a class="reference internal" href="#thet">thet</a></li>
<li><a class="reference internal" href="#ical">ical</a></li>
<li><a class="reference internal" href="#datetime-widget">datetime widget</a></li>
<li><a class="reference internal" href="#recurring-widget">recurring widget</a></li>
<li><a class="reference internal" href="#index">index</a></li>
<li><a class="reference internal" href="#types">types</a></li>
<li><a class="reference internal" href="#dexterity-behaviors-types">dexterity behaviors / types</a></li>
<li><a class="reference internal" href="#timezone-support">timezone support</a></li>
<li><a class="reference internal" href="#documentation">documentation</a></li>
<li><a class="reference internal" href="#general">general</a></li>
<li><a class="reference internal" href="#cmfplone">CMFPlone</a></li>
<li><a class="reference internal" href="#cmfcalendar-deprecation">CMFCalendar deprecation</a></li>
<li><a class="reference internal" href="#migration-steps">migration steps</a></li>
<li><a class="reference internal" href="#future">future</a></li>
</ul>
</li>
<li><a class="reference internal" href="#done">DONE</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/archive/_archive-TODO.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">plone.app.event 1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Plone Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>