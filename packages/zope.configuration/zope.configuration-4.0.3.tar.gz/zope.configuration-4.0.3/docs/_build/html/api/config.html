

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>zope.configuration.config &mdash; zope.configuration 4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="zope.configuration 4.0 documentation" href="../index.html" />
    <link rel="up" title="zope.configuration API Reference" href="../api.html" />
    <link rel="next" title="zope.configuration.docutils" href="docutils.html" />
    <link rel="prev" title="zope.configuration API Reference" href="../api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docutils.html" title="zope.configuration.docutils"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../api.html" title="zope.configuration API Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">zope.configuration 4.0 documentation</a> &raquo;</li>
          <li><a href="../api.html" accesskey="U"><tt class="docutils literal docutils literal docutils literal"><span class="pre">zope.configuration</span></tt> API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-zope.configuration.config">
<span id="zope-configuration-config"></span><h1><a class="reference internal" href="#module-zope.configuration.config" title="zope.configuration.config"><tt class="xref py py-mod docutils literal"><span class="pre">zope.configuration.config</span></tt></a><a class="headerlink" href="#module-zope.configuration.config" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="zope.configuration.config.ConfigurationContext">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ConfigurationContext</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix-in that implements IConfigurationContext</p>
<p>Subclasses provide a <tt class="docutils literal"><span class="pre">package</span></tt> attribute and a <tt class="docutils literal"><span class="pre">basepath</span></tt>
attribute.  If the base path is not None, relative paths are
converted to absolute paths using the the base path. If the
package is not none, relative imports are performed relative to
the package.</p>
<p>In general, the basepath and package attributes should be
consistent. When a package is provided, the base path should be
set to the path of the package directory.</p>
<p>Subclasses also provide an <tt class="docutils literal"><span class="pre">actions</span></tt> attribute, which is a list
of actions, an <tt class="docutils literal"><span class="pre">includepath</span></tt> attribute, and an <tt class="docutils literal"><span class="pre">info</span></tt>
attribute.</p>
<p>The include path is appended to each action and is used when
resolving conflicts among actions.  Normally, only the a
ConfigurationMachine provides the actions attribute. Decorators
simply use the actions of the context they decorate. The
<tt class="docutils literal"><span class="pre">includepath</span></tt> attribute is a tuple of names.  Each name is
typically the name of an included configuration file.</p>
<p>The <tt class="docutils literal"><span class="pre">info</span></tt> attribute contains descriptive information helpful
when reporting errors.  If not set, it defaults to an empty string.</p>
<p>The actions attribute is a sequence of dictionaries where each dictionary
has the following keys:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">discriminator</span></tt>, a value that identifies the action. Two actions
that have the same (non None) discriminator conflict.</li>
<li><tt class="docutils literal"><span class="pre">callable</span></tt>, an object that is called to execute the action,</li>
<li><tt class="docutils literal"><span class="pre">args</span></tt>, positional arguments for the action</li>
<li><tt class="docutils literal"><span class="pre">kw</span></tt>, keyword arguments for the action</li>
<li><tt class="docutils literal"><span class="pre">includepath</span></tt>, a tuple of include file names (defaults to ())</li>
<li><tt class="docutils literal"><span class="pre">info</span></tt>, an object that has descriptive information about
the action (defaults to &#8216;&#8217;)</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.resolve">
<tt class="descname">resolve</tt><big>(</big><em>dottedname</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve a dotted name to an object.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zope</span><span class="o">,</span> <span class="nn">zope.interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;zope&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">zope</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;zope.interface&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">zope</span><span class="o">.</span><span class="n">interface</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;zope.configuration.eek&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>:
<span class="go">ImportError: Module zope.configuration has no global eek</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;.config.ConfigurationContext&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;ConfigurationContext&#39; object has no attribute &#39;package&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zope.configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">zope</span><span class="o">.</span><span class="n">configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">zope</span><span class="o">.</span><span class="n">configuration</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;.config.ConfigurationContext&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">ConfigurationContext</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;..interface&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">zope</span><span class="o">.</span><span class="n">interface</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="s">&#39;str&#39;</span><span class="p">)</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.path">
<tt class="descname">path</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute package-relative paths.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;/x/y/z&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&quot;/x/y/z&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;y/z&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;ConfigurationContext&#39; object has no attribute &#39;package&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zope.configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">zope</span><span class="o">.</span><span class="n">configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">zope</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">__file__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;y/z&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">d</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&quot;/y/z&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;y/./z&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">d</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&quot;/y/z&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="s">&quot;y/../z&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">d</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&quot;/z&quot;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.checkDuplicate">
<tt class="descname">checkDuplicate</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.checkDuplicate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.checkDuplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for duplicate imports of the same file.</p>
<p>Raises an exception if this file had been processed before.  This
is better than an unlimited number of conflict errors.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">checkDuplicate</span><span class="p">(</span><span class="s">&#39;/foo.zcml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">c</span><span class="o">.</span><span class="n">checkDuplicate</span><span class="p">(</span><span class="s">&#39;/foo.zcml&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigurationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="c"># On Linux the exact msg has /foo, on Windows \foo.</span>
<span class="gp">... </span>    <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&quot;foo.zcml&#39; included more than once&quot;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You may use different ways to refer to the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zope.configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">zope</span><span class="o">.</span><span class="n">configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">zope</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">__file__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">checkDuplicate</span><span class="p">(</span><span class="s">&#39;bar.zcml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>  <span class="n">c</span><span class="o">.</span><span class="n">checkDuplicate</span><span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&#39;/bar.zcml&#39;</span><span class="p">))</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigurationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>  <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&quot;bar.zcml&#39; included more than once&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.processFile">
<tt class="descname">processFile</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.processFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.processFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a file needs to be processed.</p>
<p>Return True if processing is needed and False otherwise. If
the file needs to be processed, it will be marked as
processed, assuming that the caller will procces the file if
it needs to be procssed.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">processFile</span><span class="p">(</span><span class="s">&#39;/foo.zcml&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">processFile</span><span class="p">(</span><span class="s">&#39;/foo.zcml&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>You may use different ways to refer to the same file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zope.configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">zope</span><span class="o">.</span><span class="n">configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">zope</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">__file__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">processFile</span><span class="p">(</span><span class="s">&#39;bar.zcml&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">processFile</span><span class="p">(</span><span class="s">&#39;bar.zcml&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.action">
<tt class="descname">action</tt><big>(</big><em>discriminator</em>, <em>callable=None</em>, <em>args=()</em>, <em>kw=None</em>, <em>order=0</em>, <em>includepath=None</em>, <em>info=None</em>, <em>**extra</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an action with the given discriminator, callable and arguments.</p>
<p>For testing purposes, the callable and arguments may be omitted.
In that case, a default noop callable is used.</p>
<p>The discriminator must be given, but it can be None, to indicate that
the action never conflicts.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
</pre></div>
</div>
<p>Normally, the context gets actions from subclasses. We&#8217;ll provide
an actions attribute ourselves:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>We&#8217;ll use a test callable that has a convenient string representation</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.tests.directives</span> <span class="kn">import</span> <span class="n">f</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">),</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">=</span><span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (1,),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: 1,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {&#39;x&#39;: 1},</span>
<span class="go">  &#39;order&#39;: 0}]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (1,),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: 1,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {&#39;x&#39;: 1},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: None,</span>
<span class="go">  &#39;discriminator&#39;: None,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<p>Now set the include path and info:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">includepath</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;foo.zcml&#39;</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="s">&quot;?&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">{&#39;args&#39;: (),</span>
<span class="go"> &#39;callable&#39;: None,</span>
<span class="go"> &#39;discriminator&#39;: None,</span>
<span class="go"> &#39;includepath&#39;: (&#39;foo.zcml&#39;,),</span>
<span class="go"> &#39;info&#39;: &#39;?&#39;,</span>
<span class="go"> &#39;kw&#39;: {},</span>
<span class="go"> &#39;order&#39;: 0}</span>
</pre></div>
</div>
<p>We can add an order argument to crudely control the order
of execution:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">99999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">{&#39;args&#39;: (),</span>
<span class="go"> &#39;callable&#39;: None,</span>
<span class="go"> &#39;discriminator&#39;: None,</span>
<span class="go"> &#39;includepath&#39;: (&#39;foo.zcml&#39;,),</span>
<span class="go"> &#39;info&#39;: &#39;?&#39;,</span>
<span class="go"> &#39;kw&#39;: {},</span>
<span class="go"> &#39;order&#39;: 99999}</span>
</pre></div>
</div>
<p>We can also pass an includepath argument, which will be used as the the
includepath for the action.  (if includepath is None, self.includepath
will be used):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">includepath</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">{&#39;args&#39;: (),</span>
<span class="go"> &#39;callable&#39;: None,</span>
<span class="go"> &#39;discriminator&#39;: None,</span>
<span class="go"> &#39;includepath&#39;: (&#39;abc&#39;,),</span>
<span class="go"> &#39;info&#39;: &#39;?&#39;,</span>
<span class="go"> &#39;kw&#39;: {},</span>
<span class="go"> &#39;order&#39;: 0}</span>
</pre></div>
</div>
<p>We can also pass an info argument, which will be used as the the
source line info for the action.  (if info is None, self.info will be
used):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">{&#39;args&#39;: (),</span>
<span class="go"> &#39;callable&#39;: None,</span>
<span class="go"> &#39;discriminator&#39;: None,</span>
<span class="go"> &#39;includepath&#39;: (&#39;foo.zcml&#39;,),</span>
<span class="go"> &#39;info&#39;: &#39;abc&#39;,</span>
<span class="go"> &#39;kw&#39;: {},</span>
<span class="go"> &#39;order&#39;: 0}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.hasFeature">
<tt class="descname">hasFeature</tt><big>(</big><em>feature</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.hasFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.hasFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a named feature has been provided.</p>
<p>Initially no features are provided</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">hasFeature</span><span class="p">(</span><span class="s">&#39;onlinehelp&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>You can declare that a feature is provided</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">provideFeature</span><span class="p">(</span><span class="s">&#39;onlinehelp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and it becomes available</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">hasFeature</span><span class="p">(</span><span class="s">&#39;onlinehelp&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationContext.provideFeature">
<tt class="descname">provideFeature</tt><big>(</big><em>feature</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationContext.provideFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationContext.provideFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare thata named feature has been provided.</p>
<p>See <a class="reference internal" href="#zope.configuration.config.ConfigurationContext.hasFeature" title="zope.configuration.config.ConfigurationContext.hasFeature"><tt class="xref py py-meth docutils literal"><span class="pre">hasFeature()</span></tt></a> for examples.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ConfigurationAdapterRegistry">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ConfigurationAdapterRegistry</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationAdapterRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationAdapterRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple adapter registry that manages directives as adapters</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.interfaces</span> <span class="kn">import</span> <span class="n">IConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationAdapterRegistry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">ConfigurationAdapterRegistry</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;http://www.zope.com&#39;</span><span class="p">,</span><span class="s">&#39;xxx&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Unknown directive&#39;, &#39;http://www.zope.com&#39;, &#39;xxx&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">pass</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">IConfigurationContext</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;http://www.zope.com&#39;</span><span class="p">,</span> <span class="s">&#39;xxx&#39;</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;http://www.zope.com&#39;</span><span class="p">,</span><span class="s">&#39;xxx&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="n">f</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;http://www.zope.com&#39;</span><span class="p">,</span><span class="s">&#39;yyy&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="n">f</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Unknown directive&#39;, &#39;http://www.zope.com&#39;, &#39;yyy&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">IConfigurationContext</span><span class="p">,</span> <span class="s">&#39;yyy&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;http://www.zope.com&#39;</span><span class="p">,</span><span class="s">&#39;yyy&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="n">f</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Test the documentation feature:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">IFullInfo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">document</span><span class="p">((</span><span class="s">&#39;ns&#39;</span><span class="p">,</span> <span class="s">&#39;dir&#39;</span><span class="p">),</span> <span class="n">IFullInfo</span><span class="p">,</span> <span class="n">IConfigurationContext</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s">&#39;inf&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">(</span><span class="s">&#39;ns&#39;</span><span class="p">,</span> <span class="s">&#39;dir&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">IFullInfo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="n">IConfigurationContext</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;inf&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">document</span><span class="p">(</span><span class="s">&#39;all-dir&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">_docRegistry</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(&#39;&#39;, &#39;all-dir&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ConfigurationMachine">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ConfigurationMachine</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration machine</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span> <span class="o">=</span> <span class="s">&quot;http://www.zope.org/testing&quot;</span>
</pre></div>
</div>
<p>Register a directive:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">metans</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="p">((</span><span class="n">metans</span><span class="p">,</span> <span class="s">&quot;directive&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">namespace</span><span class="o">=</span><span class="n">ns</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;simple&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">schema</span><span class="o">=</span><span class="s">&quot;zope.configuration.tests.directives.ISimple&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">handler</span><span class="o">=</span><span class="s">&quot;zope.configuration.tests.directives.simple&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and try it out:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="p">((</span><span class="n">ns</span><span class="p">,</span> <span class="s">&quot;simple&quot;</span><span class="p">),</span> <span class="n">a</span><span class="o">=</span><span class="s">u&quot;aa&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">u&quot;cc&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span> <span class="o">=</span> <span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (u&#39;aa&#39;, u&#39;xxx&#39;, &#39;cc&#39;),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;simple&#39;, u&#39;aa&#39;, u&#39;xxx&#39;, &#39;cc&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: None,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.begin">
<tt class="descname">begin</tt><big>(</big><em>_ConfigurationMachine__name</em>, <em>_ConfigurationMachine__data=None</em>, <em>_ConfigurationMachine__info=None</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.begin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.end">
<tt class="descname">end</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.end" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.__call__">
<tt class="descname">__call__</tt><big>(</big><em>_ConfigurationMachine__name</em>, <em>_ConfigurationMachine__info=None</em>, <em>**_ConfigurationMachine__kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.getInfo">
<tt class="descname">getInfo</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.getInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.getInfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.setInfo">
<tt class="descname">setInfo</tt><big>(</big><em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.setInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.setInfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zope.configuration.config.ConfigurationMachine.execute_actions">
<tt class="descname">execute_actions</tt><big>(</big><em>clear=True</em>, <em>testing=False</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationMachine.execute_actions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationMachine.execute_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the configuration actions.</p>
<p>This calls the action callables after resolving conflicts.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">):</span> <span class="c">#* syntax highlighting</span>
<span class="gp">... </span>   <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">11</span><span class="p">,),</span> <span class="p">{},</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="p">)),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,)),</span>
<span class="gp">... </span>  <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">execute_actions</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span>
<span class="go">[(&#39;f&#39;, (1,), {}), (&#39;f&#39;, (2,), {})]</span>
</pre></div>
</div>
<p>If the action raises an error, we convert it to a
ConfigurationExecutionError.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationExecutionError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">bad</span><span class="p">():</span>
<span class="gp">... </span>   <span class="n">bad</span><span class="o">.</span><span class="n">xxx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">11</span><span class="p">,),</span> <span class="p">{},</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="p">)),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,)),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">bad</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{},</span> <span class="p">(),</span> <span class="s">&#39;oops&#39;</span><span class="p">)</span>
<span class="gp">... </span>  <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">v</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">execute_actions</span><span class="p">()</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigurationExecutionError</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
<span class="gp">... </span>   <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;exceptions.AttributeError&#39;</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&quot;&#39;function&#39; object has no attribute &#39;xxx&#39;&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="go">[&#39;  in:&#39;, &#39;  oops&#39;]</span>
</pre></div>
</div>
<p>Note that actions executed before the error still have an effect:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">output</span>
<span class="go">[(&#39;f&#39;, (1,), {}), (&#39;f&#39;, (2,), {})]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ConfigurationExecutionError">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ConfigurationExecutionError</tt><big>(</big><em>etype</em>, <em>evalue</em>, <em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationExecutionError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationExecutionError" title="Permalink to this definition">¶</a></dt>
<dd><p>An error occurred during execution of a configuration action</p>
</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IStackItem">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IStackItem</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IStackItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IStackItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration machine stack items</p>
<p>Stack items are created when a directive is being processed.</p>
<p>A stack item is created for each directive use.</p>
<dl class="method">
<dt id="zope.configuration.config.IStackItem.contained">
<tt class="descname">contained</tt><big>(</big><em>name</em>, <em>data</em>, <em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#IStackItem.contained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IStackItem.contained" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin processing a contained directive</p>
<p>The data are a dictionary of attribute names mapped to unicode
strings.</p>
<p>The info argument is an object that can be converted to a
string and that contains information about the directive.</p>
<p>The begin method returns the next item to be placed on the stack.</p>
</dd></dl>

<dl class="method">
<dt id="zope.configuration.config.IStackItem.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#IStackItem.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IStackItem.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish processing a directive</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.SimpleStackItem">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">SimpleStackItem</tt><big>(</big><em>context</em>, <em>handler</em>, <em>info</em>, <em>*argdata</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#SimpleStackItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.SimpleStackItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple stack item</p>
<p>A simple stack item can&#8217;t have anything added after it.  It can
only be removed.  It is used for simple directives and
subdirectives, which can&#8217;t contain other directives.</p>
<p>It also defers any computation until the end of the directive
has been reached.</p>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.RootStackItem">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">RootStackItem</tt><big>(</big><em>context</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#RootStackItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.RootStackItem" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="zope.configuration.config.RootStackItem.contained">
<tt class="descname">contained</tt><big>(</big><em>name</em>, <em>data</em>, <em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#RootStackItem.contained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.RootStackItem.contained" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a contained directive</p>
<p>We have to compute a new stack item by getting a named adapter
for the current context object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.GroupingStackItem">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">GroupingStackItem</tt><big>(</big><em>context</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#GroupingStackItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.GroupingStackItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Stack item for a grouping directive</p>
<p>A grouping stack item is in the stack when a grouping directive is
being processed.  Grouping directives group other directives.
Often, they just manage common data, but they may also take
actions, either before or after contained directives are executed.</p>
<p>A grouping stack item is created with a grouping directive
definition, a configuration context, and directive data.</p>
<p>To see how this works, let&#8217;s look at an example:</p>
<p>We need a context. We&#8217;ll just use a configuration machine</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">GroupingStackItem</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
</pre></div>
</div>
<p>We need a callable to use in configuration actions.  We&#8217;ll use a
convenient one from the tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.tests.directives</span> <span class="kn">import</span> <span class="n">f</span>
</pre></div>
</div>
<p>We need a handler for the grouping directive. This is a class
that implements a context decorator.  The decorator must also
provide <tt class="docutils literal"><span class="pre">before</span></tt> and <tt class="docutils literal"><span class="pre">after</span></tt> methods that are called before
and after any contained directives are processed.  We&#8217;ll typically
subclass <tt class="docutils literal"><span class="pre">GroupingContextDecorator</span></tt>, which provides context
decoration, and default <tt class="docutils literal"><span class="pre">before</span></tt> and <tt class="docutils literal"><span class="pre">after</span></tt> methods.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">GroupingContextDecorator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SampleGrouping</span><span class="p">(</span><span class="n">GroupingContextDecorator</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>      <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&#39;before&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>      <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&#39;after&#39;</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>We&#8217;ll use our decorator to decorate our initial context, providing
keyword arguments x and y:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span> <span class="o">=</span> <span class="n">SampleGrouping</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the keyword arguments are made attributes of the
decorator.</p>
<p>Now we&#8217;ll create the stack item.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">item</span> <span class="o">=</span> <span class="n">GroupingStackItem</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
</pre></div>
</div>
<p>We still haven&#8217;t called the before action yet, which we can verify
by looking at the context actions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">actions</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Subdirectives will get looked up as adapters of the context.</p>
<p>We&#8217;ll create a simple handler:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">simple</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">context</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&quot;simple&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">info</span>
</pre></div>
</div>
<p>and register it with the context:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.interfaces</span> <span class="kn">import</span> <span class="n">IConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">testns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">IConfigurationContext</span><span class="p">,</span> <span class="p">(</span><span class="n">testns</span><span class="p">,</span> <span class="s">&#39;simple&#39;</span><span class="p">),</span> <span class="n">simple</span><span class="p">)</span>
</pre></div>
</div>
<p>This handler isn&#8217;t really a propert handler, because it doesn&#8217;t
return a new context.  It will do for this example.</p>
<p>Now we&#8217;ll call the contained method on the stack item:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">item</span><span class="o">.</span><span class="n">contained</span><span class="p">((</span><span class="n">testns</span><span class="p">,</span> <span class="s">&#39;simple&#39;</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="s">&#39;zope&#39;</span><span class="p">},</span> <span class="s">&quot;someinfo&quot;</span><span class="p">)</span>
<span class="go">&#39;someinfo&#39;</span>
</pre></div>
</div>
<p>We can verify thet the simple method was called by looking at the
context actions. Note that the before method was called before
handling the contained directive.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span> <span class="o">=</span> <span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;before&#39;, 1, 2),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;simple&#39;, 1, 2, {&#39;z&#39;: &#39;zope&#39;}),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<p>Finally, we call finish, which calls the decorator after method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">item</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;before&#39;, 1, 2),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;simple&#39;, 1, 2, {&#39;z&#39;: &#39;zope&#39;}),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: &#39;after&#39;,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<p>If there were no nested directives:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span> <span class="o">=</span> <span class="n">SampleGrouping</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item</span> <span class="o">=</span> <span class="n">GroupingStackItem</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</pre></div>
</div>
<p>Then before will be when we call finish:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;before&#39;, 1, 2),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: &#39;after&#39;,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ComplexStackItem">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ComplexStackItem</tt><big>(</big><em>meta</em>, <em>context</em>, <em>data</em>, <em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ComplexStackItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ComplexStackItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Complex stack item</p>
<p>A complex stack item is in the stack when a complex directive is
being processed.  It only allows subdirectives to be used.</p>
<p>A complex stack item is created with a complex directive
definition (IComplexDirectiveContext), a configuration context,
and directive data.</p>
<p>To see how this works, let&#8217;s look at an example:</p>
<p>We need a context. We&#8217;ll just use a configuration machine</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
</pre></div>
</div>
<p>We need a callable to use in configuration actions.  We&#8217;ll use a
convenient one from the tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.tests.directives</span> <span class="kn">import</span> <span class="n">f</span>
</pre></div>
</div>
<p>We need a handler for the complex directive. This is a class
with a method for each subdirective:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Handler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>     <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">context</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="gp">... </span>     <span class="n">context</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s">&#39;init&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>  <span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>     <span class="n">context</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&#39;sub&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>  <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>     <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&#39;call&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>We need a complex directive definition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">TextLine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ComplexDirectiveDefinition</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Ixy</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">x</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">y</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">definition</span> <span class="o">=</span> <span class="n">ComplexDirectiveDefinition</span><span class="p">(</span>
<span class="gp">... </span>       <span class="n">context</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">Ixy</span><span class="p">,</span>
<span class="gp">... </span>       <span class="n">handler</span><span class="o">=</span><span class="n">Handler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Iab</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">a</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">b</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">definition</span><span class="p">[</span><span class="s">&#39;sub&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Iab</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
<p>OK, now that we have the context, handler and definition, we&#8217;re
ready to use a stack item.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ComplexStackItem</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item</span> <span class="o">=</span> <span class="n">ComplexStackItem</span><span class="p">(</span><span class="n">definition</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;xv&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="s">u&#39;yv&#39;</span><span class="p">},</span>
<span class="gp">... </span>                        <span class="s">&#39;foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When we created the definition, the handler (factory) was called.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span> <span class="o">=</span> <span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: &#39;init&#39;,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;foo&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<p>If a subdirective is provided, the <tt class="docutils literal"><span class="pre">contained</span></tt> method of the stack item
is called. It will lookup the subdirective schema and call the
corresponding method on the handler instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">simple</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">contained</span><span class="p">((</span><span class="s">&#39;somenamespace&#39;</span><span class="p">,</span> <span class="s">&#39;sub&#39;</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;av&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">u&#39;bv&#39;</span><span class="p">},</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simple</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that the name passed to <tt class="docutils literal"><span class="pre">contained</span></tt> is a 2-part name, consisting of
a namespace and a name within the namespace.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: &#39;init&#39;,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;foo&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;sub&#39;, u&#39;av&#39;, u&#39;bv&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;baz&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<p>The new stack item returned by contained is one that doesn&#8217;t allow
any more subdirectives,</p>
<p>When all of the subdirectives have been provided, the <tt class="docutils literal"><span class="pre">finish</span></tt>
method is called:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">item</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</pre></div>
</div>
<p>The stack item will call the handler if it is callable.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: &#39;init&#39;,</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;foo&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;sub&#39;, u&#39;av&#39;, u&#39;bv&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;baz&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0},</span>
<span class="go"> {&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;call&#39;, u&#39;xv&#39;, u&#39;yv&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: &#39;foo&#39;,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
<dl class="method">
<dt id="zope.configuration.config.ComplexStackItem.contained">
<tt class="descname">contained</tt><big>(</big><em>name</em>, <em>data</em>, <em>info</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ComplexStackItem.contained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ComplexStackItem.contained" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a subdirective</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.GroupingContextDecorator">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">GroupingContextDecorator</tt><big>(</big><em>context</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#GroupingContextDecorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.GroupingContextDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper mix-in class for building grouping directives</p>
<p>See the discussion (and test) in GroupingStackItem.</p>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.DirectiveSchema">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">DirectiveSchema</tt><big>(</big><em>**kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#DirectiveSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.DirectiveSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>A field that contains a global variable value that must be a schema</p>
</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IDirectivesInfo">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IDirectivesInfo</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IDirectivesInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IDirectivesInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema for the <tt class="docutils literal"><span class="pre">directives</span></tt> directive</p>
<dl class="attribute">
<dt id="zope.configuration.config.IDirectivesInfo.namespace">
<tt class="descname">namespace</tt><a class="headerlink" href="#zope.configuration.config.IDirectivesInfo.namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Namespace</p>
<p>The namespace in which directives&#8217; names will be defined</p>
</dd></dl>

</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IDirectivesContext">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IDirectivesContext</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IDirectivesContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IDirectivesContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends: <a class="reference internal" href="#zope.configuration.config.IDirectivesInfo" title="zope.configuration.config.IDirectivesInfo"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.config.IDirectivesInfo</span></tt></a>, <a class="reference internal" href="interfaces.html#zope.configuration.interfaces.IConfigurationContext" title="zope.configuration.interfaces.IConfigurationContext"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.interfaces.IConfigurationContext</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.DirectivesHandler">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">DirectivesHandler</tt><big>(</big><em>context</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#DirectivesHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.DirectivesHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for the directives directive</p>
<p>This is just a grouping directive that adds a namespace attribute
to the normal directive context.</p>
</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IDirectiveInfo">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IDirectiveInfo</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IDirectiveInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IDirectiveInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Information common to all directive definitions have</p>
<dl class="attribute">
<dt id="zope.configuration.config.IDirectiveInfo.name">
<tt class="descname">name</tt><a class="headerlink" href="#zope.configuration.config.IDirectiveInfo.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Directive name</p>
<p>The name of the directive being defined</p>
</dd></dl>

<dl class="attribute">
<dt id="zope.configuration.config.IDirectiveInfo.schema">
<tt class="descname">schema</tt><a class="headerlink" href="#zope.configuration.config.IDirectiveInfo.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Directive handler</p>
<p>The dotted name of the directive handler</p>
</dd></dl>

</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IFullInfo">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IFullInfo</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IFullInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IFullInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends: <a class="reference internal" href="#zope.configuration.config.IDirectiveInfo" title="zope.configuration.config.IDirectiveInfo"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.config.IDirectiveInfo</span></tt></a></p>
<p>Information that all top-level directives (not subdirectives) have</p>
<dl class="attribute">
<dt id="zope.configuration.config.IFullInfo.handler">
<tt class="descname">handler</tt><a class="headerlink" href="#zope.configuration.config.IFullInfo.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Directive handler</p>
<p>The dotted name of the directive handler</p>
</dd></dl>

<dl class="attribute">
<dt id="zope.configuration.config.IFullInfo.usedIn">
<tt class="descname">usedIn</tt><a class="headerlink" href="#zope.configuration.config.IFullInfo.usedIn" title="Permalink to this definition">¶</a></dt>
<dd><p>The directive types the directive can be used in</p>
<p>The interface of the directives that can contain the directive</p>
</dd></dl>

</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IStandaloneDirectiveInfo">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IStandaloneDirectiveInfo</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IStandaloneDirectiveInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IStandaloneDirectiveInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends: <a class="reference internal" href="#zope.configuration.config.IDirectivesInfo" title="zope.configuration.config.IDirectivesInfo"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.config.IDirectivesInfo</span></tt></a>, <a class="reference internal" href="#zope.configuration.config.IFullInfo" title="zope.configuration.config.IFullInfo"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.config.IFullInfo</span></tt></a></p>
<p>Info for full directives defined outside a directives directives</p>
</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.defineSimpleDirective">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">defineSimpleDirective</tt><big>(</big><em>context</em>, <em>name</em>, <em>schema</em>, <em>handler</em>, <em>namespace=''</em>, <em>usedIn=&lt;InterfaceClass zope.configuration.interfaces.IConfigurationContext&gt;</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#defineSimpleDirective"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.defineSimpleDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a simple directive</p>
<p>Define and register a factory that invokes the simple directive
and returns a new stack item, which is always the same simple stack item.</p>
<p>If the namespace is &#8216;*&#8217;, the directive is registered for all namespaces.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">TextLine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.tests.directives</span> <span class="kn">import</span> <span class="n">f</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Ixy</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">x</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">y</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">s</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">context</span><span class="o">.</span><span class="n">action</span><span class="p">((</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">defineSimpleDirective</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defineSimpleDirective</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="n">Ixy</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">testns</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="p">((</span><span class="n">testns</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span> <span class="o">=</span> <span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;s&#39;, u&#39;vx&#39;, u&#39;vy&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: None,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="p">((</span><span class="s">&#39;http://www.zope.com/t1&#39;</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Unknown directive&#39;, &#39;http://www.zope.com/t1&#39;, &#39;s&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defineSimpleDirective</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="n">Ixy</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="p">((</span><span class="s">&#39;http://www.zope.com/t1&#39;</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
<span class="go">[{&#39;args&#39;: (),</span>
<span class="go">  &#39;callable&#39;: f,</span>
<span class="go">  &#39;discriminator&#39;: (&#39;s&#39;, u&#39;vx&#39;, u&#39;vy&#39;),</span>
<span class="go">  &#39;includepath&#39;: (),</span>
<span class="go">  &#39;info&#39;: None,</span>
<span class="go">  &#39;kw&#39;: {},</span>
<span class="go">  &#39;order&#39;: 0}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.defineGroupingDirective">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">defineGroupingDirective</tt><big>(</big><em>context</em>, <em>name</em>, <em>schema</em>, <em>handler</em>, <em>namespace=''</em>, <em>usedIn=&lt;InterfaceClass zope.configuration.interfaces.IConfigurationContext&gt;</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#defineGroupingDirective"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.defineGroupingDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a grouping directive</p>
<p>Define and register a factory that sets up a grouping directive.</p>
<p>If the namespace is &#8216;*&#8217;, the directive is registered for all namespaces.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationMachine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">TextLine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.tests.directives</span> <span class="kn">import</span> <span class="n">f</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Ixy</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">x</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">y</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">()</span>
</pre></div>
</div>
<p>We won&#8217;t bother creating a special grouping directive class. We&#8217;ll
just use <a class="reference internal" href="#zope.configuration.config.GroupingContextDecorator" title="zope.configuration.config.GroupingContextDecorator"><tt class="xref py py-class docutils literal"><span class="pre">GroupingContextDecorator</span></tt></a>, which simply sets up a
grouping context that has extra attributes defined by a schema:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">defineGroupingDirective</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">GroupingContextDecorator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defineGroupingDirective</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">Ixy</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">GroupingContextDecorator</span><span class="p">,</span> <span class="n">testns</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">begin</span><span class="p">((</span><span class="n">testns</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">x</span>
<span class="go">u&#39;vx&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">y</span>
<span class="go">u&#39;vy&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="p">((</span><span class="s">&#39;http://www.zope.com/t1&#39;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Unknown directive&#39;, &#39;http://www.zope.com/t1&#39;, &#39;g&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defineGroupingDirective</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">Ixy</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">GroupingContextDecorator</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">begin</span><span class="p">((</span><span class="s">&#39;http://www.zope.com/t1&#39;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s">u&quot;vx&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">u&quot;vy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">x</span>
<span class="go">u&#39;vx&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">y</span>
<span class="go">u&#39;vy&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IComplexDirectiveContext">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IComplexDirectiveContext</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IComplexDirectiveContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IComplexDirectiveContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends: <a class="reference internal" href="#zope.configuration.config.IFullInfo" title="zope.configuration.config.IFullInfo"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.config.IFullInfo</span></tt></a>, <a class="reference internal" href="interfaces.html#zope.configuration.interfaces.IConfigurationContext" title="zope.configuration.interfaces.IConfigurationContext"><tt class="xref py py-class docutils literal"><span class="pre">zope.configuration.interfaces.IConfigurationContext</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ComplexDirectiveDefinition">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ComplexDirectiveDefinition</tt><big>(</big><em>context</em>, <em>**kw</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ComplexDirectiveDefinition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ComplexDirectiveDefinition" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for defining complex directives</p>
<p>See the description and tests for ComplexStackItem.</p>
</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.subdirective">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">subdirective</tt><big>(</big><em>context</em>, <em>name</em>, <em>schema</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#subdirective"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.subdirective" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="interface">
<dt id="zope.configuration.config.IProvidesDirectiveInfo">
<em class="property">interface </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">IProvidesDirectiveInfo</tt><a class="reference internal" href="../_modules/zope/configuration/config.html#IProvidesDirectiveInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.IProvidesDirectiveInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Information for a &lt;meta:provides&gt; directive</p>
<dl class="attribute">
<dt id="zope.configuration.config.IProvidesDirectiveInfo.feature">
<tt class="descname">feature</tt><a class="headerlink" href="#zope.configuration.config.IProvidesDirectiveInfo.feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Feature name</p>
<p>The name of the feature being provided</p>
<blockquote>
<div>You can test available features with zcml:condition=&#8221;have featurename&#8221;.</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.provides">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">provides</tt><big>(</big><em>context</em>, <em>feature</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#provides"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.provides" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare that a feature is provided in context.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">ConfigurationContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">provides</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ConfigurationContext</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">provides</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;apidoc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">hasFeature</span><span class="p">(</span><span class="s">&#39;apidoc&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Spaces are not allowed in feature names (this is reserved for providing
many features with a single directive in the futute).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">provides</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;apidoc onlinehelp&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Only one feature name allowed</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">hasFeature</span><span class="p">(</span><span class="s">&#39;apidoc onlinehelp&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.toargs">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">toargs</tt><big>(</big><em>context</em>, <em>schema</em>, <em>data</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#toargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.toargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Marshal data to an argument dictionary using a schema</p>
<p>Names that are python keywords have an underscore added as a
suffix in the schema and in the argument list, but are used
without the underscore in the data.</p>
<p>The fields in the schema must all implement IFromUnicode.</p>
<p>All of the items in the data must have corresponding fields in the
schema unless the schema has a true tagged value named
&#8216;keyword_arguments&#8217;.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.configuration.config</span> <span class="kn">import</span> <span class="n">toargs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">BytesLine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">Float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">Int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">TextLine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.schema</span> <span class="kn">import</span> <span class="n">URI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">schema</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">in_</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">constraint</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">f</span> <span class="o">=</span> <span class="n">Float</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">n</span> <span class="o">=</span> <span class="n">TextLine</span><span class="p">(</span><span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">u&quot;rob&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">x</span> <span class="o">=</span> <span class="n">BytesLine</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">u</span> <span class="o">=</span> <span class="n">URI</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">context</span> <span class="o">=</span> <span class="n">ConfigurationMachine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">PrettyPrinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">=</span><span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">pprint</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;x.y.z&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span> <span class="p">}))</span>
<span class="go">{&#39;f&#39;: 1.2,</span>
<span class="go"> &#39;in_&#39;: 1,</span>
<span class="go"> &#39;n&#39;: u&#39;bob&#39;,</span>
<span class="go"> &#39;u&#39;: &#39;http://www.zope.org&#39;,</span>
<span class="go"> &#39;x&#39;: &#39;x.y.z&#39;}</span>
</pre></div>
</div>
<p>If we have extra data, we&#8217;ll get an error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;x.y.z&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">})</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Unrecognized parameters:&#39;, &#39;a&#39;)</span>
</pre></div>
</div>
<p>Unless we set a tagged value to say that extra arguments are ok:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span><span class="o">.</span><span class="n">setTaggedValue</span><span class="p">(</span><span class="s">&#39;keyword_arguments&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;x.y.z&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">}))</span>
<span class="go">{&#39;a&#39;: u&#39;1&#39;,</span>
<span class="go"> &#39;f&#39;: 1.2,</span>
<span class="go"> &#39;in_&#39;: 1,</span>
<span class="go"> &#39;n&#39;: u&#39;bob&#39;,</span>
<span class="go"> &#39;u&#39;: &#39;http://www.zope.org&#39;,</span>
<span class="go"> &#39;x&#39;: &#39;x.y.z&#39;}</span>
</pre></div>
</div>
<p>If we omit required data we get an error telling us what was omitted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;x.y.z&#39;</span><span class="p">}))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Missing parameter:&#39;, &#39;u&#39;)</span>
</pre></div>
</div>
<p>Although we can omit not-required data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">}))</span>
<span class="go">{&#39;a&#39;: u&#39;1&#39;,</span>
<span class="go"> &#39;f&#39;: 1.2,</span>
<span class="go"> &#39;in_&#39;: 1,</span>
<span class="go"> &#39;n&#39;: u&#39;bob&#39;,</span>
<span class="go"> &#39;u&#39;: &#39;http://www.zope.org&#39;}</span>
</pre></div>
</div>
<p>And we can omit required fields if they have valid defaults
(defaults that are valid values):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">}))</span>
<span class="go">{&#39;a&#39;: u&#39;1&#39;,</span>
<span class="go"> &#39;f&#39;: 1.2,</span>
<span class="go"> &#39;in_&#39;: 1,</span>
<span class="go"> &#39;n&#39;: u&#39;rob&#39;,</span>
<span class="go"> &#39;u&#39;: &#39;http://www.zope.org&#39;}</span>
</pre></div>
</div>
<p>We also get an error if any data was invalid:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">toargs</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span>
<span class="gp">... </span>       <span class="p">{</span><span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="s">u&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">u&#39;1.2&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">u&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">u&#39;x.y.z&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;u&#39;</span><span class="p">:</span> <span class="s">u&#39;http://www.zope.org&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">u&#39;1&#39;</span><span class="p">}))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ConfigurationError</span>: <span class="n">(&#39;Invalid value for&#39;, &#39;in&#39;, &#39;0&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zope.configuration.config.expand_action">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">expand_action</tt><big>(</big><em>discriminator</em>, <em>callable=None</em>, <em>args=()</em>, <em>kw=None</em>, <em>includepath=()</em>, <em>info=None</em>, <em>order=0</em>, <em>**extra</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#expand_action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.expand_action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zope.configuration.config.resolveConflicts">
<tt class="descclassname">zope.configuration.config.</tt><tt class="descname">resolveConflicts</tt><big>(</big><em>actions</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#resolveConflicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.resolveConflicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve conflicting actions</p>
<p>Given an actions list, identify and try to resolve conflicting actions.
Actions conflict if they have the same non-None discriminator.
Conflicting actions can be resolved if the include path of one of
the actions is a prefix of the includepaths of the other
conflicting actions and is unequal to the include paths in the
other conflicting actions.</p>
</dd></dl>

<dl class="class">
<dt id="zope.configuration.config.ConfigurationConflictError">
<em class="property">class </em><tt class="descclassname">zope.configuration.config.</tt><tt class="descname">ConfigurationConflictError</tt><big>(</big><em>conflicts</em><big>)</big><a class="reference internal" href="../_modules/zope/configuration/config.html#ConfigurationConflictError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zope.configuration.config.ConfigurationConflictError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../api.html"
                        title="previous chapter"><tt class="docutils literal docutils literal"><span class="pre">zope.configuration</span></tt> API Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="docutils.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">zope.configuration.docutils</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/config.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="docutils.html" title="zope.configuration.docutils"
             >next</a> |</li>
        <li class="right" >
          <a href="../api.html" title="zope.configuration API Reference"
             >previous</a> |</li>
        <li><a href="../index.html">zope.configuration 4.0 documentation</a> &raquo;</li>
          <li><a href="../api.html" ><tt class="docutils literal docutils literal docutils literal"><span class="pre">zope.configuration</span></tt> API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Zope Foundation Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>