<!DOCTYPE html><html>
<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8"/>
    
        <title>Priority Queue Dictionary (pqdict) &mdash; pqdict 0.5.0 documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="_static/sphinx-bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css"/>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
        <script type="text/javascript">
            var DOCUMENTATION_OPTIONS = {
                URL_ROOT:'./',
                VERSION:'0.5.0',
                COLLAPSE_INDEX:false,
                FILE_SUFFIX:'.html',
                HAS_SOURCE:  true
            };
        </script>
            <script type="text/javascript" src="_static/jquery.js"></script>
            <script type="text/javascript" src="_static/underscore.js"></script>
            <script type="text/javascript" src="_static/doctools.js"></script>
            <script type="text/javascript" src="_static/bootstrap-dropdown.js"></script>
        <link rel="top" title="pqdict 0.5.0 documentation" href="index.html"/>
            <link rel="next" title="Examples" href="examples.html"/>
            <link rel="prev" title="Documentation for pqdict 0.5.0" href="index.html"/> 
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    
        <!-- analytics -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-46624378-1']);
            
            _gaq.push(['_trackPageview']);

            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
        </script>
    
</head>
<body>

    <div class="navbar navbar-static-top">
        <div class="navbar-inner">
            <div class="container">

    <div class="related">
        <ul class="nav">
                <li class=""><a class="brand" href="index.html">pqdict</a></li>
                <li>
                    <a href="genindex.html"
                       title="General Index" accesskey="I">index</a>
                </li>
                <li>
                    <a href="examples.html"
                       title="Examples" accesskey="N">next</a>
                </li>
                <li>
                    <a href="index.html"
                       title="Documentation for pqdict 0.5.0" accesskey="P">previous</a>
                </li> 
        </ul>
    </div>
                <div class="pull-right">
                    
        <form class="navbar-search" action="search.html"
              method="get">
            <input type="text" name="q" placeholder="search"/>
            <input type="hidden" name="check_keywords" value="yes"/>
            <input type="hidden" name="area" value="default"/>
        </form>
                </div>
            </div>
        </div>
    </div>
    


<ul class="quick-links">
    <li><strong>Quick links</strong></li>
    <li>
        <a href="https://github.com/nvictus/priority-queue-dictionary/">GitHub</a>
    </li>
    <li>
        <a href="https://github.com/nvictus/priority-queue-dictionary/issues?state=open">Issues</a>
    </li>
    <li class="divider">&middot;</li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=nvictus&repo=priority-queue-dictionary&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="100px" height="20px"></iframe>
    </li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=nvictus&repo=priority-queue-dictionary&type=fork&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="94px" height="20px"></iframe>
    </li>

    <li class="divider">&middot;</li>
    <li class="follow-btn">
        <a href="https://twitter.com/nv1ctus"
           class="twitter-follow-button" data-width="145px"
           data-link-color="#0069D6" data-show-count="false">Follow
            @nv1ctus</a>
    </li>
    <li class="tweet-btn">
        <a href="https://twitter.com/share" class="twitter-share-button"
           data-url="https://github.com/nvictus/priority-queue-dictionary" data-count="horizontal"
           data-via="twbootstrap"
           data-related="nv1ctus:Creator of pqdict">Tweet</a>
    </li>
    <li class="plusone-container">
        <g:plusone size="medium"></g:plusone>
    </li>
</ul>  
    <div class="container">
        <div class="content row">
                <div class="span9">
                    
  <div class="section" id="priority-queue-dictionary-pqdict">
<h1>Priority Queue Dictionary (pqdict)<a class="headerlink" href="#priority-queue-dictionary-pqdict" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">pqdict</span></tt> provides a pure Python indexed priority queue data structure with a dict-like interface. <tt class="docutils literal"><span class="pre">pqdict.PQDict</span></tt> instances map hashable <em>dictionary keys</em> to rank-determining <em>priority keys</em>.</p>
<a class="reference external image-reference" href="http://pythonhosted.org/pqdict/index.html"><img alt="Latest PyPI version" src="https://pypip.in/v/pqdict/badge.png" /></a>
<a class="reference external image-reference" href="https://travis-ci.org/nvictus/priority-queue-dictionary"><img alt="CI Build State" src="https://travis-ci.org/nvictus/priority-queue-dictionary.png?branch=master" /></a>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/pqdict/"><img alt="Number of PyPI downloads" src="https://pypip.in/d/pqdict/badge.png" /></a>
<div class="section" id="what-is-an-indexed-priority-queue">
<h2>What is an &#8220;indexed&#8221; priority queue?<a class="headerlink" href="#what-is-an-indexed-priority-queue" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="http://en.wikipedia.org/wiki/Priority_queue">priority queue</a> is an
abstract data structure that allows you to serve or retrieve items in a
prioritized fashion. A vanilla priority queue lets you insert elements with priorities, and remove or peek at the top priority element.</p>
<p>An enhancement to the basic priority queue interface is to let you randomly access, insert, remove and/or alter the priority of any existing element in the queue. An <em>indexed</em> priority queue does these operations efficiently.</p>
<p>The queue is implemented as a binary heap (using a python list), which supports the standard:</p>
<ul class="simple">
<li>O(1) access to the top priority element</li>
<li>O(log n) removal of the top priority element</li>
<li>O(log n) insertion of a new element</li>
</ul>
<p>In addition, an internal dictionary or &#8220;index&#8221; maps elements to their
position in the heap. This index is synchronized with the heap as the
heap is manipulated. As a result, <tt class="docutils literal"><span class="pre">PQDict</span></tt> also supports:</p>
<ul class="simple">
<li>O(1) lookup of an arbitrary element&#8217;s priority key</li>
<li>O(log n) removal of an arbitrary element</li>
<li>O(log n) updating of an arbitrary element&#8217;s priority key</li>
</ul>
</div>
<div class="section" id="why-would-i-want-something-like-that">
<h2>Why would I want something like that?<a class="headerlink" href="#why-would-i-want-something-like-that" title="Permalink to this headline">¶</a></h2>
<p>Indexed priority queues can be used to drive simulations, priority schedulers, and optimization algorithms, merge of streams of prioritized data, and other applications where priorities of already enqueued items may frequently change.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>By default, <tt class="docutils literal"><span class="pre">PQDict</span></tt> uses a min-heap, meaning <strong>smaller</strong> priority
keys give an item <strong>higher</strong> priority. Use <tt class="docutils literal"><span class="pre">PQDict.maxpq()</span></tt> to create a
max-heap priority queue.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pqdict</span> <span class="kn">import</span> <span class="n">PQDict</span>

<span class="c"># same input signature as dict</span>
<span class="n">pq</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">pq</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">]))</span>
<span class="n">pq</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">})</span>

<span class="c"># add/update items</span>
<span class="n">pq</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">6.5</span>
<span class="n">pq</span><span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">pq</span><span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>

<span class="c"># or more stringently</span>
<span class="n">pq</span><span class="o">.</span><span class="n">additem</span><span class="p">(</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">pq</span><span class="o">.</span><span class="n">updateitem</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">pq</span><span class="o">.</span><span class="n">additem</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>       <span class="c"># KeyError</span>
<span class="n">pq</span><span class="o">.</span><span class="n">updateitem</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>    <span class="c"># KeyError</span>

<span class="c"># get an element&#39;s priority key</span>
<span class="k">print</span> <span class="s">&#39;f&#39;</span> <span class="ow">in</span> <span class="n">pq</span>          <span class="c"># True</span>
<span class="k">print</span> <span class="n">pq</span><span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">]</span>            <span class="c"># -5</span>

<span class="c"># remove elements</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">)</span>        <span class="c"># -5</span>
<span class="k">print</span> <span class="s">&#39;f&#39;</span> <span class="ow">in</span> <span class="n">pq</span>          <span class="c"># False</span>
<span class="k">del</span> <span class="n">pq</span><span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>  <span class="c"># None</span>

<span class="c"># peek at the top priority item</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>           <span class="c"># &#39;c&#39;</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">topitem</span><span class="p">()</span>       <span class="c"># (&#39;c&#39;, 1)</span>

<span class="c"># Now, let&#39;s do a manual heapsort...</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>       <span class="c"># (&#39;c&#39;, 1)</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>       <span class="c"># (&#39;a&#39;, 3)</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>       <span class="c"># (&#39;b&#39;, 5)</span>
<span class="k">print</span> <span class="n">pq</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>       <span class="c"># (&#39;d&#39;, 6.5)</span>

<span class="c"># and we&#39;re empty!</span>
<span class="n">pq</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>             <span class="c"># KeyError</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Regular iteration</strong> is <strong>NOT</strong> sorted! However, regular iteration methods are non-destructive: they don&#8217;t affect the heap. This applies to <tt class="docutils literal"><span class="pre">pq.keys()</span></tt>, <tt class="docutils literal"><span class="pre">pq.values()</span></tt>, <tt class="docutils literal"><span class="pre">pq.items()</span></tt> and using <tt class="docutils literal"><span class="pre">iter()</span></tt>:</p>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">queue</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">({</span><span class="s">&#39;Alice&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Bob&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
<span class="k">for</span> <span class="n">customer</span> <span class="ow">in</span> <span class="n">queue</span><span class="p">:</span>
    <span class="n">serve</span><span class="p">(</span><span class="n">customer</span><span class="p">)</span> <span class="c"># Bob may be served before Alice!</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">PQDict</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only <strong>destructive iteration</strong> is sorted. Destructive iteration methods return generators that pop items out of the heap, which amounts to performing a heapsort. The destructive iterators are <tt class="docutils literal"><span class="pre">pq.iterkeys()</span></tt>, <tt class="docutils literal"><span class="pre">pq.itervalues()</span></tt>, and <tt class="docutils literal"><span class="pre">pq.iteritems()</span></tt>:</p>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">customer</span> <span class="ow">in</span> <span class="n">queue</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">():</span>
    <span class="n">serve</span><span class="p">(</span><span class="n">customer</span><span class="p">)</span> <span class="c"># Customer satisfaction guaranteed :)</span>
<span class="c"># queue is now empty</span>
</pre></div>
</div>
<p>There are also additional convenience functions that use <tt class="docutils literal"><span class="pre">PQDict</span></tt> to order objects in a dictionary.</p>
</div>
<div class="section" id="module-functions">
<h2>Module functions<a class="headerlink" href="#module-functions" title="Permalink to this headline">¶</a></h2>
<p>Some additional convenience functions are also provided in addition to the <tt class="docutils literal"><span class="pre">PQDict</span></tt> class.</p>
<p><a class="reference internal" href="pqdict.html#pqdict.sort_by_value" title="pqdict.sort_by_value"><tt class="xref py py-meth docutils literal"><span class="pre">pqdict.sort_by_value()</span></tt></a> is a convenience function that returns a heapsort iterator over the items of a mapping. Generator equivalent of <tt class="docutils literal"><span class="pre">sorted(mapping.items(),</span> <span class="pre">key=itemgetter(1),</span> <span class="pre">reverse=reverse)</span></tt>.</p>
<p><a class="reference internal" href="pqdict.html#pqdict.nsmallest" title="pqdict.nsmallest"><tt class="xref py py-meth docutils literal"><span class="pre">pqdict.nsmallest()</span></tt></a> and <a class="reference internal" href="pqdict.html#pqdict.nlargest" title="pqdict.nlargest"><tt class="xref py py-meth docutils literal"><span class="pre">pqdict.nlargest()</span></tt></a> work just like the same functions in <tt class="docutils literal"><span class="pre">heapq</span></tt> but act on dictionaries and dict-like objects instead of sequences, sorting by value:</p>
<div class="code python highlight-python"><pre>from pqdict import nlargest

billionaires = {'Bill Gates': 72.7, 'Warren Buffett': 60.0, ...}
top10_richest = nlargest(10, billionaires)</pre>
</div>
<p><a class="reference internal" href="pqdict.html#pqdict.consume" title="pqdict.consume"><tt class="xref py py-meth docutils literal"><span class="pre">pqdict.consume()</span></tt></a> consumes the items from multiple priority queue dictionaries into a single sorted output stream:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pqA</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">(</span><span class="n">parse_feed</span><span class="p">(</span><span class="n">urlA</span><span class="p">))</span>
<span class="n">pqB</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">(</span><span class="n">parse_feed</span><span class="p">(</span><span class="n">urlB</span><span class="p">))</span>
<span class="n">pqC</span> <span class="o">=</span> <span class="n">PQDict</span><span class="p">(</span><span class="n">parse_feed</span><span class="p">(</span><span class="n">urlC</span><span class="p">))</span>

<span class="n">aggregator</span> <span class="o">=</span> <span class="n">pqdict</span><span class="o">.</span><span class="n">consume</span><span class="p">(</span><span class="n">pqA</span><span class="p">,</span> <span class="n">pqB</span><span class="p">,</span> <span class="n">pqC</span><span class="p">)</span>

<span class="k">for</span> <span class="n">entry</span><span class="p">,</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">aggregator</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> was posted on </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This module was written by Nezar Abdennur and is released under the MIT license. The augmented heap implementation was adapted from the <tt class="docutils literal"><span class="pre">heapq</span></tt> module in the Python standard library, which was written by Kevin O&#8217;Connor and augmented by Tim Peters and Raymond Hettinger.</p>
<a class="reference external image-reference" href="https://bitdeli.com/free"><img alt="Bitdeli badge" src="https://d2weczhvl823v0.cloudfront.net/nvictus/priority-queue-dictionary/trend.png" /></a>
<hr class="docutils" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">WARNING: Any dictionary key&#8217;s assigned priority key can be changed to a different one (i.e., the mapping is mutable), but for much the same reason that dictionary keys in Python must be immutable objects, priority keys should also be <strong>immutable</strong> objects (e.g., numbers, strings, tuples, datetime). However, this is not enforced: if you do happen to use mutable objects as priority keys, any modification to those objects could break your priority queue!</p>
</div>
</div>
</div>


                    
                        <div id="disqus_thread"></div>
                        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    
                </div>
                <div class="span3">
                    
        <div class="sphinxsidebar">
            <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Priority Queue Dictionary (pqdict)</a><ul>
<li><a class="reference internal" href="#what-is-an-indexed-priority-queue">What is an &#8220;indexed&#8221; priority queue?</a></li>
<li><a class="reference internal" href="#why-would-i-want-something-like-that">Why would I want something like that?</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#module-functions">Module functions</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Documentation for pqdict 0.5.0</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="examples.html"
                        title="next chapter">Examples</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
            </div>
        </div>
                </div>
            
        </div>
    </div>
    <div class="footer">
        
        <div class="container">
                    &copy;
                        Copyright 2013, Nezar Abdennur.
                Created using <a
                        href="http://sphinx.pocoo.org/">Sphinx</a> 1.2
                    .
                Theme <a href="https://github.com/scotch/sphinx-bootstrap">Sphinx-Bootstrap</a>
                adapted from
                <a href="http://twitter.github.com/bootstrap/">Twitter's
                    Bootstrap</a> by <a href="http://www.scotchmedia.com">Scotch
                Media</a>
        </div>
    </div>


    <!-- disqus -->
    <script type="text/javascript">
        var disqus_title = 'Priority Queue Dictionary (pqdict) &mdash; pqdict 0.5.0 documentation';
        var disqus_identifier ='code' + '.' + "pqdict-docs" + window.location.pathname.replace('/', '.');
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "pqdict-docs"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


<script type="text/javascript">
    $('.nav .active').on('click', function () {
        e.preventDefault()
        $(this).siblings().toggle()
    });
</script>

<!-- plusone -->
<script type="text/javascript">
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>

<!-- twitter -->
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>

</body>
</html>