package smarkets.seto;

import "smarkets.streaming_api.eto.proto" ;

message event {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message market {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message contract {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message order {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message entity {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message Payload {
    required PayloadType type = 1;
    required .smarkets.eto.Payload eto_payload = 2;
    optional Login login = 3;
    optional OrderCreate order_create = 4;
    optional OrderRejected order_rejected = 5;
    optional OrderAccepted order_accepted = 6;
    optional OrderExecuted order_executed = 7;
    optional OrderCancel order_cancel = 8;
    optional OrderCancelled order_cancelled = 9;
    optional OrderInvalid order_invalid = 10;
    optional MarketSubscribe market_subscribe = 11;
    optional MarketUnsubscribe market_unsubscribe = 12;
    optional MarketQuotes market_quotes = 13;
    optional ContractQuotes contract_quotes = 14;
    optional OrderCancelRejected order_cancel_rejected = 15;
    optional OrderExecutedVoid order_execute_voided = 16;
    optional MarketState market_state = 17;
}

enum PayloadType {
    PAYLOAD_ETO = 1;
    PAYLOAD_LOGIN = 2;
    PAYLOAD_ORDER_CREATE = 3;
    PAYLOAD_ORDER_REJECTED = 4;
    PAYLOAD_ORDER_ACCEPTED = 5;
    PAYLOAD_ORDER_EXECUTED = 6;
    PAYLOAD_ORDER_CANCEL = 7;
    PAYLOAD_ORDER_CANCELLED = 8;
    PAYLOAD_ORDER_INVALID = 9;
    PAYLOAD_MARKET_SUBSCRIBE = 10;
    PAYLOAD_MARKET_UNSUBSCRIBE = 11;
    PAYLOAD_MARKET_QUOTES = 12;
    PAYLOAD_CONTRACT_QUOTES = 13;
    PAYLOAD_ORDER_CANCEL_REJECTED = 14;
    PAYLOAD_ORDER_EXECUTE_VOIDED = 15;
    PAYLOAD_MARKET_STATE = 16;
}

message Uuid128 {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message Login {
    optional string username = 1;
    optional string password = 2;
    optional bytes cookie = 3;
    optional uint32 account_sequence = 4;
}

message OrderCreate {
    required OrderCreateType type = 1;
    required Uuid128 market = 2;
    required Uuid128 contract = 3;
    required Side side = 4;
    required QuantityType quantity_type = 5;
    required uint32 quantity = 6;
    optional PriceType price_type = 7;
    optional uint32 price = 8;
    optional uint32 maq = 9;
    optional TimeInForceType tif = 10;
    optional uint64 reference = 11;
}

enum OrderCreateType {
    ORDER_CREATE_LIMIT = 1;
}

enum TimeInForceType {
    GOOD_TIL_CANCELLED = 1;
    IMMEDIATE_OR_CANCEL = 2;
}

message OrderRejected {
    required uint64 seq = 1;
    required OrderRejectedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
}

message OrderCancelRejected {
    required Uuid128 order = 1;
    required OrderCancelRejectedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
}

enum OrderRejectedReason {
    ORDER_REJECTED_INSUFFICIENT_FUNDS = 1;
    ORDER_REJECTED_LIMIT_EXCEEDED = 2;
    ORDER_REJECTED_MARKET_NOT_OPEN = 3;
    ORDER_REJECTED_MARKET_SETTLED = 4;
    ORDER_REJECTED_MARKET_HALTED = 5;
    ORDER_REJECTED_CROSSED_SELF = 6;
    ORDER_REJECTED_MARKET_NOT_FOUND = 7;
    ORDER_REJECTED_SERVICE_TEMPORARILY_UNAVAILABLE = 8;
    ORDER_REJECTED_CONTRACT_NOT_FOUND = 9;
    ORDER_REJECTED_ACCOUNT_SUSPENDED = 10;
    ORDER_REJECTED_CAPACITY_REACHED = 11;
}

enum OrderCancelRejectedReason {
    ORDER_CANCEL_REJECTED_NOT_FOUND = 1;
    ORDER_CANCEL_REJECTED_NOT_LIVE = 2;
    ORDER_CANCEL_REJECTED_CAPACITY_REACHED = 3;
}

message OrderAccepted {
    required uint64 seq = 1;
    required Uuid128 order = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
}

message OrderExecuted {
    required Uuid128 order = 1;
    required uint32 price = 2;
    required QuantityType quantity_type = 3;
    required uint32 quantity = 4;
    optional uint32 account_sequence = 5;
}

message OrderCancel {
    required Uuid128 order = 1;
    optional uint64 reference = 2;
}

message OrderCancelled {
    required Uuid128 order = 1;
    required OrderCancelledReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
}

enum OrderCancelledReason {
    ORDER_CANCELLED_MEMBER_REQUESTED = 1;
    ORDER_CANCELLED_MARKET_HALTED = 2;
    ORDER_CANCELLED_INSUFFICIENT_LIQUIDITY = 3;
}

message OrderInvalid {
    required uint64 seq = 1;
    repeated OrderInvalidReason reasons = 2;
    optional uint64 reference = 3;
}

enum OrderInvalidReason {
    ORDER_INVALID_INVALID_PRICE = 1;
    ORDER_INVALID_INVALID_QUANTITY = 2;
}

message MarketSubscribe {
    required Uuid128 market = 1;
}

message MarketUnsubscribe {
    required Uuid128 market = 1;
}

message MarketQuotes {
    required Uuid128 market = 1;
    repeated ContractQuotes contract_quotes = 2;
    required PriceType price_type = 3;
    required QuantityType quantity_type = 4;
}

message ContractQuotes {
    required Uuid128 market = 1;
    required Uuid128 contract = 2;
    repeated Quote bids = 3;
    repeated Quote offers = 4;
    repeated Execution executions = 5;
    optional Execution last_execution = 6;
}

message Quote {
    required uint32 price = 1;
    required uint32 quantity = 2;
}

enum QuantityType {
    QUANTITY_PAYOFF_CURRENCY = 1;
}

enum PriceType {
    PRICE_PERCENT_ODDS = 1;
}

enum Side {
    SIDE_BUY = 1;
    SIDE_SELL = 2;
}

message Execution {
    required uint32 price = 1;
    required uint32 quantity = 2;
    required Side liquidity = 3;
    required uint64 microseconds = 4;
}

enum Currency {
    CURRENCY_GBP = 1;
    CURRENCY_EUR = 2;
    CURRENCY_USD = 3;
}

message Decimal {
    required sint64 value = 1;
    optional uint32 exponent = 2 [default = 2];
}

message OrderExecutedVoid {
    required Uuid128 order = 1;
    required uint32 price = 2;
    required QuantityType quantity_type = 3;
    required uint32 quantity = 4;
    optional uint32 account_sequence = 5;
}

enum MarketStateType {
    MARKET_STATE_NEW = 1;
    MARKET_STATE_OPEN = 2;
    MARKET_STATE_LIVE = 3;
    MARKET_STATE_HALTED = 4;
    MARKET_STATE_SETTLED = 5;
    MARKET_STATE_VOIDED = 6;
}

message MarketState {
    required Uuid128 market = 1;
    required MarketStateType state = 2;
}

