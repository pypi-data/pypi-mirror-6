

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utils Package &mdash; pynag 0.8.5 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pynag 0.8.5 documentation" href="index.html" />
    <link rel="up" title="The pynag module" href="pynag.html" />
    <link rel="prev" title="Plugins Package" href="pynag.Plugins.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pynag.Plugins.html" title="Plugins Package"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pynag 0.8.5 documentation</a> &raquo;</li>
          <li><a href="pynag.html" accesskey="U">The pynag module</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="utils-package">
<h1>Utils Package<a class="headerlink" href="#utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">Utils</span></tt> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pynag.Utils"></span><p>Misc utility classes and helper functions for pynag</p>
<p>This module contains misc classes and conveninence functions
that are used throughout the pynag library.</p>
<dl class="class">
<dt id="pynag.Utils.AttributeList">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">AttributeList</tt><big>(</big><em>value=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Parse a list of nagios attributes (e. contact_groups) into a parsable 
format.</p>
<p>This makes it handy to mangle with nagios attribute values that are in a 
comma seperated format.</p>
<p>Typical comma-seperated format in nagios configuration files looks something
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">contact_groups</span>     <span class="o">+</span><span class="n">group1</span><span class="p">,</span><span class="n">group2</span><span class="p">,</span><span class="n">group3</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;+group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">operator</span>
<span class="go">+</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;]</span>

<span class="go"># if your data is already in a list format you can use it directly:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">([</span><span class="s">&#39;group1&#39;</span><span class="p">,</span> <span class="s">&#39;group2&#39;</span><span class="p">,</span> <span class="s">&#39;group3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;]</span>

<span class="go"># white spaces will be stripped from all fields</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;+group1, group2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span>
<span class="go">+group1,group2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;]</span>
</pre></div>
</div>
<dl class="method">
<dt id="pynag.Utils.AttributeList.append">
<tt class="descname">append</tt><big>(</big><em>object</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.append():</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>object: Item to append into self.fields (typically a string)</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;group5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;, &#39;group5&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.count">
<tt class="descname">count</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.count()</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>value: Any object that might exist in self.fields (string)</dd>
<dt>Returns:</dt>
<dd>The number of occurances that &#8216;value&#8217; has in self.fields</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;group3&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.extend">
<tt class="descname">extend</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.extend()</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>iterable:   Any iterable that list.extend() supports</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s">&#39;group4&#39;</span><span class="p">,</span> <span class="s">&#39;group5&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;, &#39;group4&#39;, &#39;group5&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.index">
<tt class="descname">index</tt><big>(</big><em>value</em>, <em>start=0</em>, <em>stop=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.index()</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>value:  object to look for in self.fields
start:  start at this index point
stop:   stop at this index point</dd>
<dt>Returns:</dt>
<dd>The index of &#8216;value&#8217; (integer)</dd>
<dt>Examples:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;group2&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;group3&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.insert">
<tt class="descname">insert</tt><big>(</big><em>index</em>, <em>object</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.insert()</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>object: Any object that will be inserted into self.fields (usually a string)</dd>
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;group4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group4&#39;, &#39;group2&#39;, &#39;group3&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.remove">
<tt class="descname">remove</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.remove()</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>value:  The object that is to be removed</dd>
<dt>Examples:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.reverse">
<tt class="descname">reverse</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.reverse()</p>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group1,group2,group3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">fields</span>
<span class="go">[&#39;group3&#39;, &#39;group2&#39;, &#39;group1&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.AttributeList.sort">
<tt class="descname">sort</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.AttributeList.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as list.sort()</p>
<dl class="docutils">
<dt>Examples:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">AttributeList</span><span class="p">(</span><span class="s">&#39;group3,group1,group2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
<span class="go">[&#39;group1&#39;, &#39;group2&#39;, &#39;group3&#39;]</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynag.Utils.GitRepo">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">GitRepo</tt><big>(</big><em>directory</em>, <em>auto_init=True</em>, <em>author_name='Pynag User'</em>, <em>author_email=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="pynag.Utils.GitRepo.add">
<tt class="descname">add</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Run git add on filename</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>filename (str): name of one file to add,</dd>
<dt>Returns:</dt>
<dd>str. The stdout from &#8220;git add&#8221; shell command.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.commit">
<tt class="descname">commit</tt><big>(</big><em>message='commited by pynag'</em>, <em>filelist=None</em>, <em>author=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit files with &#8220;git commit&#8221;</p>
<p>Arguments:</p>
<blockquote>
<div><p>message (str): Message used for the git commit</p>
<dl class="docutils">
<dt>filelist (list of strings): List of filenames to commit (if None, </dt>
<dd>then commit all files in the repo)</dd>
<dt>author (str): Author to use for git commit. If any is specified, </dt>
<dd>overwrite self.author_name and self.author_email</dd>
</dl>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div>stdout from the &#8220;git commit&#8221; shell command.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.diff">
<tt class="descname">diff</tt><big>(</big><em>commit_id_or_filename=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns diff (as outputted by &#8220;git diff&#8221;) for filename or commit id.</p>
<p>If commit_id_or_filename is not specified. show diff against all uncommited files.</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>commit_id_or_filename (str): git commit id or file to diff with</dd>
<dt>Returns:</dt>
<dd>str. git diff for filename or commit id</dd>
<dt>Raises:</dt>
<dd>PynagError: Invalid commit id or filename was given</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.get_uncommited_files">
<tt class="descname">get_uncommited_files</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.get_uncommited_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of files that are have unstaged changes</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>List. All files that have unstaged changes.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.get_valid_commits">
<tt class="descname">get_valid_commits</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.get_valid_commits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all commit ids from git log</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>List of all valid commit hashes</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initilizes a new git repo (i.e. run &#8220;git init&#8221;)</p>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.is_dirty">
<tt class="descname">is_dirty</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.is_dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if filename needs to be committed to git</p>
<p>Arguments:</p>
<blockquote>
<div>filename (str): file to check</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.is_up_to_date">
<tt class="descname">is_up_to_date</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.is_up_to_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if all files in git repo are fully commited</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><p class="first">bool. Git repo is up-to-date</p>
<blockquote class="last">
<div><p>True &#8211; All files are commited</p>
<p>False &#8211; At least one file is not commited</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.log">
<tt class="descname">log</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a log of previous commits. Log is is a list of dict objects.</p>
<p>Any arguments provided will be passed directly to pynag.Utils.grep() to filter the results.</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>kwargs: Arguments passed to pynag.Utils.grep()</dd>
<dt>Returns:</dt>
<dd>List of dicts. Log of previous commits.</dd>
<dt>Examples:</dt>
<dd>self.log(author_name=&#8217;nagiosadmin&#8217;)
self.log(comment__contains=&#8217;localhost&#8217;)</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.pre_save">
<tt class="descname">pre_save</tt><big>(</big><em>object_definition</em>, <em>message</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.pre_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Commits object_definition.get_filename() if it has any changes. This
function is called by <a class="reference internal" href="pynag.Model.EventHandlers.html#module-pynag.Model.EventHandlers" title="pynag.Model.EventHandlers"><tt class="xref py py-class docutils literal"><span class="pre">pynag.Model.EventHandlers</span></tt></a> before
calling <a class="reference internal" href="#pynag.Utils.GitRepo.save" title="pynag.Utils.GitRepo.save"><tt class="xref py py-meth docutils literal"><span class="pre">pynag.Utils.GitRepo.save()</span></tt></a></p>
<p>Arguments:</p>
<blockquote>
<div><p>object_definition (pynag.Model.ObjectDefinition): object to commit changes</p>
<p>message (str): git commit message as specified in  <tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span></tt></p>
</div></blockquote>
<dl class="docutils">
<dt>A message from the authors:</dt>
<dd><em>&#8220;Since this is still here, either i forgot to remove it, or because
it is here for backwards compatibility, palli&#8221;</em></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.revert">
<tt class="descname">revert</tt><big>(</big><em>commit</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.revert" title="Permalink to this definition">¶</a></dt>
<dd><p>Revert some existing commits works like &#8220;git revert&#8221;</p>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.save">
<tt class="descname">save</tt><big>(</big><em>object_definition</em>, <em>message</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Commits object_definition.get_filename() if it has any changes. This
function is called by <a class="reference internal" href="pynag.Model.EventHandlers.html#module-pynag.Model.EventHandlers" title="pynag.Model.EventHandlers"><tt class="xref py py-class docutils literal"><span class="pre">pynag.Model.EventHandlers</span></tt></a></p>
<p>Arguments:</p>
<blockquote>
<div><p>object_definition (pynag.Model.ObjectDefinition): object to commit changes</p>
<p>message (str): git commit message as specified in  <tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span></tt></p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.show">
<tt class="descname">show</tt><big>(</big><em>commit_id</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns output from &#8220;git show&#8221; for a specified commit_id</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>commit_id (str): Commit id of the commit to display (<tt class="docutils literal"><span class="pre">git</span> <span class="pre">show</span></tt>)</dd>
<dt>Returns:</dt>
<dd>str. Output of <tt class="docutils literal"><span class="pre">git</span> <span class="pre">show</span> <span class="pre">commit_id</span></tt></dd>
<dt>Raises: </dt>
<dd>PynagError: Invalid commit_id was given</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.GitRepo.write">
<tt class="descname">write</tt><big>(</big><em>object_definition</em>, <em>message</em><big>)</big><a class="headerlink" href="#pynag.Utils.GitRepo.write" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called whenever <a class="reference internal" href="pynag.Model.EventHandlers.html#module-pynag.Model.EventHandlers" title="pynag.Model.EventHandlers"><tt class="xref py py-class docutils literal"><span class="pre">pynag.Model.EventHandlers</span></tt></a>
is called.</p>
<p>Arguments</p>
<blockquote>
<div><p>object_definition (pynag.Model.ObjectDefinition): Object to write to file.</p>
<p>message (str): git commit message as specified in  <tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span></tt></p>
</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynag.Utils.PerfData">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">PerfData</tt><big>(</big><em>perfdatastring=''</em><big>)</big><a class="headerlink" href="#pynag.Utils.PerfData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Data Structure for a nagios perfdata string with multiple perfdata metric</p>
<p>Example string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">perf</span> <span class="o">=</span> <span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;load1=10 load2=10 load3=20 &#39;label with spaces&#39;=5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">perf</span><span class="o">.</span><span class="n">metrics</span>
<span class="go">[&#39;load1&#39;=10;;;;, &#39;load2&#39;=10;;;;, &#39;load3&#39;=20;;;;, &#39;label with spaces&#39;=5;;;;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">perf</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
<span class="go">load1 10</span>
<span class="go">load2 10</span>
<span class="go">load3 20</span>
<span class="go">label with spaces 5</span>
</pre></div>
</div>
<dl class="method">
<dt id="pynag.Utils.PerfData.add_perfdatametric">
<tt class="descname">add_perfdatametric</tt><big>(</big><em>perfdatastring=''</em>, <em>label=''</em>, <em>value=''</em>, <em>warn=''</em>, <em>crit=''</em>, <em>min=''</em>, <em>max=''</em>, <em>uom=''</em><big>)</big><a class="headerlink" href="#pynag.Utils.PerfData.add_perfdatametric" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new perfdatametric to existing list of metrics.</p>
<p>Arguments:</p>
<blockquote>
<div><p>perfdatastring (str): Complete perfdata string</p>
<p>label (str): Label section of the perfdata string</p>
<p>value (str): Value section of the perfdata string</p>
<p>warn (str): WARNING threshold</p>
<p>crit (str): CRITICAL threshold</p>
<p>min (str): Minimal value of control</p>
<p>max (str): Maximal value of control</p>
<p>uom (str): Measure unit (octets, bits/s, volts, ...)</p>
</div></blockquote>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">PerfData</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add_perfdatametric</span><span class="p">(</span><span class="s">&quot;a=1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">add_perfdatametric</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;utilization&quot;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">,</span><span class="n">uom</span><span class="o">=</span><span class="s">&quot;%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfData.get_perfdatametric">
<tt class="descname">get_perfdatametric</tt><big>(</big><em>metric_name</em><big>)</big><a class="headerlink" href="#pynag.Utils.PerfData.get_perfdatametric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get one specific perfdatametric</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>metric_name (str): Name of the metric to return</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;cpu=90% memory=50</span><span class="si">% d</span><span class="s">isk_usage=20%&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_metric</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_perfdatametric</span><span class="p">(</span><span class="s">&#39;cpu&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_metric</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">my_metric</span><span class="o">.</span><span class="n">value</span>
<span class="go">(&#39;cpu&#39;, &#39;90&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfData.is_valid">
<tt class="descname">is_valid</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfData.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the every metric in the string is valid</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;load1=10 load2=10 load3=20&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;10b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;load1=&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfData</span><span class="p">(</span><span class="s">&quot;load1=10 10&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfData.reconsile_thresholds">
<tt class="descname">reconsile_thresholds</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfData.reconsile_thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert all thresholds in new_threshold_syntax to the standard one</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynag.Utils.PerfDataMetric">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">PerfDataMetric</tt><big>(</big><em>perfdatastring=''</em>, <em>label=''</em>, <em>value=''</em>, <em>warn=''</em>, <em>crit=''</em>, <em>min=''</em>, <em>max=''</em>, <em>uom=''</em><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Data structure for one single Nagios Perfdata Metric</p>
<p>Attributes:</p>
<blockquote>
<div><p>perfdatastring (str): Complete perfdata string</p>
<p>label (str): Label section of the perfdata string</p>
<p>value (str): Value section of the perfdata string</p>
<p>warn (str): WARNING threshold</p>
<p>crit (str): CRITICAL threshold</p>
<p>min (str): Minimal value of control</p>
<p>max (str): Maximal value of control</p>
<p>uom (str): Measure unit (octets, bits/s, volts, ...)</p>
</div></blockquote>
<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.crit">
<tt class="descname">crit</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.crit" title="Permalink to this definition">¶</a></dt>
<dd><p>str CRITICAL threshold</p>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfDataMetric.get_dict">
<tt class="descname">get_dict</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric.get_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary which contains this class&#8217; attributes.</p>
<p>Returned dict example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&#39;label&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="s">&#39;uom&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uom</span><span class="p">,</span>
    <span class="s">&#39;warn&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">,</span>
    <span class="s">&#39;crit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">crit</span><span class="p">,</span>
    <span class="s">&#39;min&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">,</span>
    <span class="s">&#39;max&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfDataMetric.get_status">
<tt class="descname">get_status</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return nagios-style exit code (int 0-3) by comparing</p>
<p>Example:</p>
<p>self.value with self.warn and self.crit</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;label1=10;20;30&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;label2=25;20;30&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;label3=35;20;30&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Invalid metrics always return unknown</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;label3=35;invalid_metric&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfDataMetric.is_valid">
<tt class="descname">is_valid</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if all Performance data is valid. Otherwise False</p>
<p>Example Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;load1=2&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;load1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&#39;invalid_value=invalid&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&#39;invalid_min=0;0;0;min;0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&#39;invalid_min=0;0;0;0;max&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&#39;label with spaces=0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PerfDataMetric</span><span class="p">(</span><span class="s">&quot;&#39;label with spaces=0&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.label">
<tt class="descname">label</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.label" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Label section of the perfdata string</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.max">
<tt class="descname">max</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.max" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Maximal value of control</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.min">
<tt class="descname">min</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.min" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Minimal value of control</p>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfDataMetric.reconsile_thresholds">
<tt class="descname">reconsile_thresholds</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric.reconsile_thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert threshold from new threshold syntax to current one, for backwards compatibility</p>
</dd></dl>

<dl class="method">
<dt id="pynag.Utils.PerfDataMetric.split_value_and_uom">
<tt class="descname">split_value_and_uom</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#pynag.Utils.PerfDataMetric.split_value_and_uom" title="Permalink to this definition">¶</a></dt>
<dd><p>Example:</p>
<p>get value=&#8221;10M&#8221; and return (10,&#8221;M&#8221;)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">PerfDataMetric</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10c&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10B&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;B&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10MB&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;MB&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10KB&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;KB&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10TB&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;TB&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10%&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;%&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10s&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;s&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10us&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;us&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">split_value_and_uom</span><span class="p">(</span> <span class="s">&quot;10ms&quot;</span> <span class="p">)</span>
<span class="go">(&#39;10&#39;, &#39;ms&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.uom">
<tt class="descname">uom</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.uom" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Measure unit (octets, bits/s, volts, ...)</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.value">
<tt class="descname">value</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.value" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Value section of the perfdata string</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PerfDataMetric.warn">
<tt class="descname">warn</tt><em class="property"> = ''</em><a class="headerlink" href="#pynag.Utils.PerfDataMetric.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>str. WARNING threshold</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynag.Utils.PluginOutput">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">PluginOutput</tt><big>(</big><em>stdout</em><big>)</big><a class="headerlink" href="#pynag.Utils.PluginOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>This class parses a typical stdout from a nagios plugin</p>
<p>It splits the output into the following fields:</p>
<ul class="simple">
<li>Summary</li>
<li>Long Output</li>
<li>Perfdata</li>
</ul>
<p>Attributes:</p>
<blockquote>
<div><p>summary (str): Summary returned by the plugin check</p>
<p>long_output (str)</p>
<p>perfdata (str): Data returned by the plugin as a string</p>
<p>parsed_perfdata: perfdata parsed and split</p>
</div></blockquote>
<p>Example Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">PluginOutput</span><span class="p">(</span><span class="s">&quot;Everything is ok | load1=15 load2=10&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">summary</span>
<span class="go">&#39;Everything is ok &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">long_output</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">perfdata</span>
<span class="go">&#39;load1=15 load2=10&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">parsed_perfdata</span><span class="o">.</span><span class="n">metrics</span>
<span class="go">[&#39;load1&#39;=15;;;;, &#39;load2&#39;=10;;;;]</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="pynag.Utils.PluginOutput.long_output">
<tt class="descname">long_output</tt><em class="property"> = None</em><a class="headerlink" href="#pynag.Utils.PluginOutput.long_output" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PluginOutput.parsed_perfdata">
<tt class="descname">parsed_perfdata</tt><em class="property"> = None</em><a class="headerlink" href="#pynag.Utils.PluginOutput.parsed_perfdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Perfdata parsed and split</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PluginOutput.perfdata">
<tt class="descname">perfdata</tt><em class="property"> = None</em><a class="headerlink" href="#pynag.Utils.PluginOutput.perfdata" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Data returned by the plugin as a string</p>
</dd></dl>

<dl class="attribute">
<dt id="pynag.Utils.PluginOutput.summary">
<tt class="descname">summary</tt><em class="property"> = None</em><a class="headerlink" href="#pynag.Utils.PluginOutput.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>str. Summary returned by the plugin check</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="pynag.Utils.PynagError">
<em class="property">exception </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">PynagError</tt><big>(</big><em>message</em>, <em>errorcode=None</em>, <em>errorstring=None</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pynag.Utils.PynagError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>The default pynag exception.</p>
<p>Exceptions raised within the pynag library should aim
to inherit this one.</p>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.cache_only">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">cache_only</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#pynag.Utils.cache_only" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="pynag.Utils.defaultdict">
<em class="property">class </em><tt class="descclassname">pynag.Utils.</tt><tt class="descname">defaultdict</tt><big>(</big><em>default_factory=None</em>, <em>*a</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#pynag.Utils.defaultdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></p>
<p>This is an alternative implementation of collections.defaultdict.</p>
<p>Used as a fallback if using python 2.4 or older.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pynag.Utils</span> <span class="kn">import</span> <span class="n">defaultdict</span>
</pre></div>
</div>
<dl class="method">
<dt id="pynag.Utils.defaultdict.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#pynag.Utils.defaultdict.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pynag.Utils.grep">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">grep</tt><big>(</big><em>objects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pynag.Utils.grep" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the elements from array that match the keywords in <a href="#id2"><span class="problematic" id="id3">**</span></a>kwargs</p>
<p>See documentation for pynag.Model.ObjectDefinition.objects.filter() for 
example how to use this.</p>
<p>Arguments:</p>
<blockquote>
<div><p>objects (list of dict): list to be searched</p>
<p>kwargs (str): Any search argument provided will be checked against every dict</p>
</div></blockquote>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">array</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="s">&#39;host_name&#39;</span><span class="p">:</span> <span class="s">&#39;examplehost&#39;</span><span class="p">,</span> <span class="s">&#39;state&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
<span class="p">{</span><span class="s">&#39;host_name&#39;</span><span class="p">:</span> <span class="s">&#39;example2&#39;</span><span class="p">,</span> <span class="s">&#39;state&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">grep_dict</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c"># should return [{&#39;host_name&#39;: &#39;examplehost&#39;, &#39;state&#39;:0},]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.grep_to_livestatus">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">grep_to_livestatus</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pynag.Utils.grep_to_livestatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts from pynag style grep syntax to livestatus filter syntax.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">host_name</span><span class="o">=</span><span class="s">&#39;test&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: host_name = test&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__contains</span><span class="o">=</span><span class="s">&#39;serv&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: service_description ~ serv&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__isnot</span><span class="o">=</span><span class="s">&#39;serv&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: service_description != serv&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__contains</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;serv&#39;</span><span class="p">,</span><span class="s">&#39;check&#39;</span><span class="p">])</span>
<span class="go">[&#39;Filter: service_description ~ serv&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__contains</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">contacts__has_field</span><span class="o">=</span><span class="s">&#39;admin&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: contacts &gt;= admin&#39;, &#39;Filter: service_description ~ foo&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__has_field</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: service_description &gt;= foo&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__startswith</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: service_description ~ ^foo&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grep_to_livestatus</span><span class="p">(</span><span class="n">service_description__endswith</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">[&#39;Filter: service_description ~ foo$&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.reconsile_threshold">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">reconsile_threshold</tt><big>(</big><em>threshold_range</em><big>)</big><a class="headerlink" href="#pynag.Utils.reconsile_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Take threshold string as and normalize it to the format supported by plugin 
development team</p>
<p>The input (usually a string in the form of &#8216;the new threshold syntax&#8217;) is a 
string in the form of x..y</p>
<p>The output will be a compatible string in the older nagios plugin format 
&#64;x:y</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;0..5&quot;</span><span class="p">)</span>
<span class="go">&#39;@0:5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;inf..5&quot;</span><span class="p">)</span>
<span class="go">&#39;5:&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;5..inf&quot;</span><span class="p">)</span>
<span class="go">&#39;~:5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;inf..inf&quot;</span><span class="p">)</span>
<span class="go">&#39;@~:&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;^0..5&quot;</span><span class="p">)</span>
<span class="go">&#39;0:5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;10..20&quot;</span><span class="p">)</span>
<span class="go">&#39;@10:20&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reconsile_threshold</span><span class="p">(</span><span class="s">&quot;10..inf&quot;</span><span class="p">)</span>
<span class="go">&#39;~:10&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.runCommand">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">runCommand</tt><big>(</big><em>command</em>, <em>raise_error_on_fail=False</em>, <em>shell=True</em>, <em>env=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.runCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Run command from the shell prompt. Wrapper around subprocess.</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>command (str): string containing the command line to run
raise_error_on_fail (bool): Raise PynagError if returncode &gt; 0</dd>
<dt>Returns:</dt>
<dd>string: stdout/stderr of the command run</dd>
<dt>Raises:</dt>
<dd>PynagError if returncode &gt; 0</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.send_nsca">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">send_nsca</tt><big>(</big><em>code</em>, <em>message</em>, <em>nscahost</em>, <em>hostname=None</em>, <em>service=None</em>, <em>nscabin='send_nsca'</em>, <em>nscaconf=None</em><big>)</big><a class="headerlink" href="#pynag.Utils.send_nsca" title="Permalink to this definition">¶</a></dt>
<dd><p>Send data via send_nsca for passive service checks</p>
<p>Arguments:</p>
<blockquote>
<div><p>code (int): Return code of plugin.</p>
<p>message (str): Message to pass back.</p>
<p>nscahost (str): Hostname or IP address of NSCA server.</p>
<p>hostname (str): Hostname the check results apply to.</p>
<p>service (str): Service the check results apply to.</p>
<dl class="docutils">
<dt>nscabin (str): Location of send_nsca binary. If none specified whatever</dt>
<dd>is in the path will be used.</dd>
</dl>
<p>nscaconf (str): Location of the NSCA configuration to use if any.</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div>[result,stdout,stderr] of the command being run</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="pynag.Utils.synchronized">
<tt class="descclassname">pynag.Utils.</tt><tt class="descname">synchronized</tt><big>(</big><em>lock</em><big>)</big><a class="headerlink" href="#pynag.Utils.synchronized" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronization decorator</p>
<p>Use this to make a multi-threaded method synchronized and thread-safe.</p>
<p>Use the decorator like so:</p>
<div class="highlight-python"><pre>@pynag.Utils.synchronized(pynag.Utils.rlock)</pre>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Utils Package</a><ul>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">Utils</span></tt> Package</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pynag.Plugins.html"
                        title="previous chapter">Plugins Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pynag.Utils.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pynag.Plugins.html" title="Plugins Package"
             >previous</a> |</li>
        <li><a href="index.html">pynag 0.8.5 documentation</a> &raquo;</li>
          <li><a href="pynag.html" >The pynag module</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Pall Sigurdsson and Tomas Edwardsson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>