<metal:header_macro use-macro="context/@@plonetabs-header-macro/macros/header" />

  <div id="autogeneration_section"
       i18n:domain="quintagroup.plonetabs"
       tal:define="category options/category;
                   errors options/errors|nothing;
                   portal_state context/@@plone_portal_state;
                   portal_url portal_state/portal_url;
                   test nocall:view/test">

    <form name="generated_tabs_form"
          action="@@plonetabs-controlpanel"
          method="post"
          tal:attributes="action string:${portal_url}/${attrs/action}"
          tal:condition="python:category == 'portal_tabs'">

      <input type="hidden" name="form.submitted:boolean" value="True" />

      <div class="field"
           tal:define="generated_tabs request/generated_tabs|view/isGeneratedTabs;
                       error errors/generated_tabs|nothing"
           tal:attributes="class python:test(error, 'field error', 'field')">
        <input type="checkbox"
               id="generated_tabs"
               name="generated_tabs"
               value="1"
               tal:attributes="checked python:test(generated_tabs, 'checked', None)" />
        <label for="generated_tabs"
               i18n:translate="label_generated_tabs_enable"
               i18n:domain="plone">Automatically generate tabs</label>
        <div class="formHelp" i18n:translate="help_generated_tabs"
             i18n:domain="plone">
          By default, all folders created at the root level will have global section
          navigation generated. You can turn this off if you prefer manually constructing
          this part of the navigation.
        </div>
      </div>

      <div class="field"
           tal:define="nonfolderish_tabs request/nonfolderish_tabs|view/isNotFoldersGenerated;
                       error errors/nonfolderish_tabs|nothing"
           tal:attributes="class python:test(error, 'field error', 'field')">
        <input type="checkbox"
               id="nonfolderish_tabs"
               name="nonfolderish_tabs"
               value="1"
               tal:attributes="checked python:test(nonfolderish_tabs, 'checked', None)" />
        <label for="nonfolderish_tabs"
               i18n:translate="label_nonfolderish_tabs_enable">Generate tabs for items other than folders</label>
        <div class="formHelp"
             i18n:domain="plone"
             i18n:translate="help_nonfolderish_tabs">
          By default, any content item in the root of the portal will be shown as
          a global section. If you turn this option off, only folders will be shown.
          This only has an effect if "Automatically generate tabs" is enabled
        </div>
      </div>

      <ul class="csshover" id="roottabs"
          tal:content="structure view/getGeneratedTabs" />

      <div id="autogeneration_controls">
          <input class="submit-button context" type="submit" name="autogenerated.save" i18n:attributes="value" value="Save" />
      </div>

    </form>

  </div>