
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>json_delta.py &mdash; JSON-delta 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="JSON-delta 0.1 documentation" href="index.html" />
    <link rel="next" title="json_diff" href="json_diff.1.html" />
    <link rel="prev" title="JSON-delta: a diff/patch pair for JSON-serialized data structures" href="index.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="json_diff.1.html" title="json_diff"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="JSON-delta: a diff/patch pair for JSON-serialized data structures"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">JSON-delta 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-json_delta">
<span id="json-delta-py"></span><h1>json_delta.py<a class="headerlink" href="#module-json_delta" title="Permalink to this headline">¶</a></h1>
<p>This is the main &#8220;library&#8221; for json_delta&#8217;s functionality.  If it gets
any bigger, I&#8217;ll probably split it out into at least four separate
modules.  As it is, the functionality divides into four main headings:
diff, patch, udiff and upatch, plus entry points for the above,
utility functions common to all four, and basic shell functionality as
documented below.</p>
<p>The library is kept as one module for ease of distribution: if you
want to use it from another program, this file is all you need.  The
full package includes three CLI scripts that offer more versatile
access to the functionality this module makes available.  The
json_diff and json_patch scripts have syntax and options that mimic
standard diff(1) and patch(1) where it is appropriate to do so.  Also,
there is json_cat, a script I wrote for testing purposes which may
prove useful.</p>
<p>Requires Python 2.7 or newer (including Python 3).</p>
<div class="section" id="main-entry-points">
<h2>Main entry points<a class="headerlink" href="#main-entry-points" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="json_delta.diff">
<tt class="descclassname">json_delta.</tt><tt class="descname">diff</tt><big>(</big><em>left_struc</em>, <em>right_struc</em>, <em>minimal=True</em>, <em>verbose=True</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#json_delta.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose a sequence of diff stanzas sufficient to convert the
structure <tt class="docutils literal"><span class="pre">left_struc</span></tt> into the structure <tt class="docutils literal"><span class="pre">right_struc</span></tt>.  (The
goal is to add &#8216;necessary and&#8217; to &#8216;sufficient&#8217; above!).</p>
<dl class="docutils">
<dt>Flags: </dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">verbose</span></tt>: if this is set <tt class="docutils literal"><span class="pre">True</span></tt> (the default), a line of
compression statistics will be printed to stderr.</p>
<p class="last"><tt class="docutils literal"><span class="pre">minimal</span></tt>: if <tt class="docutils literal"><span class="pre">True</span></tt>, the function will try harder to find
the diff that encodes as the shortest possible JSON string, at
the expense of a possible performance penalty (as alternatives
are computed and compared).</p>
</dd>
</dl>
<p>The parameter <tt class="docutils literal"><span class="pre">key</span></tt> is present because this function is mutually
recursive with <a class="reference internal" href="#json_delta.needle_diff" title="json_delta.needle_diff"><tt class="xref py py-func docutils literal"><span class="pre">needle_diff()</span></tt></a> and <a class="reference internal" href="#json_delta.keyset_diff" title="json_delta.keyset_diff"><tt class="xref py py-func docutils literal"><span class="pre">keyset_diff()</span></tt></a>.
If set to a list, it will be prefixed to every keypath in the
output.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.patch">
<tt class="descclassname">json_delta.</tt><tt class="descname">patch</tt><big>(</big><em>struc</em>, <em>diff</em>, <em>in_place=True</em><big>)</big><a class="headerlink" href="#json_delta.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the sequence of diff stanzas <tt class="docutils literal"><span class="pre">diff</span></tt> to the structure
<tt class="docutils literal"><span class="pre">struc</span></tt>.</p>
<p>By default, this function modifies <tt class="docutils literal"><span class="pre">struc</span></tt> in place; set
<tt class="docutils literal"><span class="pre">in_place</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt> to return a patched copy of struc
instead.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.udiff">
<tt class="descclassname">json_delta.</tt><tt class="descname">udiff</tt><big>(</big><em>left</em>, <em>right</em>, <em>patch=None</em>, <em>indent=0</em>, <em>entry=True</em><big>)</big><a class="headerlink" href="#json_delta.udiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the difference between the structures <tt class="docutils literal"><span class="pre">left</span></tt> and
<tt class="docutils literal"><span class="pre">right</span></tt> as a string in a fashion inspired by <strong class="command">diff -u</strong>.</p>
<p>Generating a udiff is strictly slower than generating a normal
diff, since the udiff is computed on the basis of a normal diff
between <tt class="docutils literal"><span class="pre">left</span></tt> and <tt class="docutils literal"><span class="pre">right</span></tt>.  If such a diff has already been
computed (e.g. by calling <a class="reference internal" href="#json_delta.diff" title="json_delta.diff"><tt class="xref py py-func docutils literal"><span class="pre">diff()</span></tt></a>), pass it as the
<tt class="docutils literal"><span class="pre">patch</span></tt> parameter.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.upatch">
<tt class="descclassname">json_delta.</tt><tt class="descname">upatch</tt><big>(</big><em>struc</em>, <em>udiff</em>, <em>reverse=False</em>, <em>in_place=True</em><big>)</big><a class="headerlink" href="#json_delta.upatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a patch of the form output by udiff() to the structure
<tt class="docutils literal"><span class="pre">struc</span></tt>.</p>
<p>By default, this function modifies <tt class="docutils literal"><span class="pre">struc</span></tt> in place; set
<tt class="docutils literal"><span class="pre">in_place</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt> to return a patched copy of <tt class="docutils literal"><span class="pre">struc</span></tt>
instead.</p>
</dd></dl>

</div>
<div class="section" id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="json_delta.compact_json_dumps">
<tt class="descclassname">json_delta.</tt><tt class="descname">compact_json_dumps</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#json_delta.compact_json_dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the most compact possible JSON representation of the
serializable object <tt class="docutils literal"><span class="pre">obj</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s">&#39;baz&#39;</span><span class="p">:</span> 
<span class="gp">... </span>               <span class="p">[</span><span class="s">&#39;quux&#39;</span><span class="p">,</span> <span class="s">&#39;spam&#39;</span><span class="p">,</span> 
<span class="gp">... </span>      <span class="s">&#39;eggs&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compact_json_dumps</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="go">&#39;{&quot;foo&quot;:&quot;bar&quot;,&quot;baz&quot;:[&quot;quux&quot;,&quot;spam&quot;,&quot;eggs&quot;]}&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="json_delta.all_paths">
<tt class="descclassname">json_delta.</tt><tt class="descname">all_paths</tt><big>(</big><em>struc</em><big>)</big><a class="headerlink" href="#json_delta.all_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate key-paths to every node in <tt class="docutils literal"><span class="pre">struc</span></tt>.</p>
<p>Both terminal and non-terminal nodes are visited, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_paths</span><span class="p">({</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">]})]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[]</span> <span class="ow">in</span> <span class="n">paths</span> <span class="c"># ([] is the path to struc itself.)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">paths</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">paths</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">paths</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">paths</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="json_delta.follow_path">
<tt class="descclassname">json_delta.</tt><tt class="descname">follow_path</tt><big>(</big><em>struc</em>, <em>path</em><big>)</big><a class="headerlink" href="#json_delta.follow_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value found at the key-path <tt class="docutils literal"><span class="pre">path</span></tt> within <tt class="docutils literal"><span class="pre">struc</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.in_one_level">
<tt class="descclassname">json_delta.</tt><tt class="descname">in_one_level</tt><big>(</big><em>diff</em>, <em>key</em><big>)</big><a class="headerlink" href="#json_delta.in_one_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subset of <tt class="docutils literal"><span class="pre">diff</span></tt> whose key-paths begin with
<tt class="docutils literal"><span class="pre">key</span></tt>, expressed relative to the structure at <tt class="docutils literal"><span class="pre">[key]</span></tt>
(i.e. with the first element of each key-path stripped off).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">diff</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">],</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">&#39;cheese&#39;</span><span class="p">],</span>
<span class="gp">... </span>         <span class="p">[[</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&#39;quux&#39;</span><span class="p">],</span> <span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_one_level</span><span class="p">(</span><span class="n">diff</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="go">[[[3], &#39;cheese&#39;], [[4, &#39;quux&#39;], &#39;foo&#39;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="json_delta.check_diff_structure">
<tt class="descclassname">json_delta.</tt><tt class="descname">check_diff_structure</tt><big>(</big><em>diff</em><big>)</big><a class="headerlink" href="#json_delta.check_diff_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <tt class="docutils literal"><span class="pre">diff</span></tt> (or <tt class="docutils literal"><span class="pre">True</span></tt>) if it is structured as a sequence
of <tt class="docutils literal"><span class="pre">diff</span></tt> stanzas.  Otherwise return <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">[]</span></tt> is a valid diff, so if it is passed to this function, the
return value is <tt class="docutils literal"><span class="pre">True</span></tt>, so that the return value is always true
in a Boolean context if <tt class="docutils literal"><span class="pre">diff</span></tt> is valid.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">check_diff_structure</span><span class="p">([])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_diff_structure</span><span class="p">([</span><span class="bp">None</span><span class="p">])</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_diff_structure</span><span class="p">([[[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12815316313</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">],</span> <span class="bp">None</span><span class="p">]])</span>
<span class="go">[[[&#39;foo&#39;, 6, 12815316313, &#39;bar&#39;], None]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_diff_structure</span><span class="p">([[[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12815316313</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">],</span> <span class="bp">None</span><span class="p">],</span>
<span class="gp">... </span>                      <span class="p">[[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">],</span> <span class="bp">True</span><span class="p">]])</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="functions-for-computing-normal-diffs">
<h2>Functions for computing normal diffs.<a class="headerlink" href="#functions-for-computing-normal-diffs" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="json_delta.commonality">
<tt class="descclassname">json_delta.</tt><tt class="descname">commonality</tt><big>(</big><em>left_struc</em>, <em>right_struc</em><big>)</big><a class="headerlink" href="#json_delta.commonality" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a float between 0.0 and 1.0 representing the amount
that the structures left_struc and right_struc have in common.</p>
<p>If left_struc and right_struc are of the same type, this is
computed as the fraction (elements in common) / (total elements).
Otherwise, commonality is 0.0.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.compute_keysets">
<tt class="descclassname">json_delta.</tt><tt class="descname">compute_keysets</tt><big>(</big><em>left_seq</em>, <em>right_seq</em><big>)</big><a class="headerlink" href="#json_delta.compute_keysets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare the keys of <tt class="docutils literal"><span class="pre">left_seq</span></tt> vs. <tt class="docutils literal"><span class="pre">right_seq</span></tt>.</p>
<p>Determines which keys <tt class="docutils literal"><span class="pre">left_seq</span></tt> and <tt class="docutils literal"><span class="pre">right_seq</span></tt> have in
common, and which are unique to each of the structures.  Arguments
should be instances of the same basic type, which must be a
non-terminal: i.e. list or dict.  If they are lists, the keys
compared will be integer indices.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>Return value is a 3-tuple of sets <tt class="docutils literal"><span class="pre">({overlap},</span> <span class="pre">{left_only},</span>
<span class="pre">{right_only})</span></tt>.  As their names suggest, <tt class="docutils literal"><span class="pre">overlap</span></tt> is a set
of keys <tt class="docutils literal"><span class="pre">left_seq</span></tt> have in common, <tt class="docutils literal"><span class="pre">left_only</span></tt> represents
keys only found in <tt class="docutils literal"><span class="pre">left_seq</span></tt>, and <tt class="docutils literal"><span class="pre">right_only</span></tt> holds keys
only found in <tt class="docutils literal"><span class="pre">right_seq</span></tt>.</dd>
<dt>Raises:</dt>
<dd>AssertionError if <tt class="docutils literal"><span class="pre">left_seq</span></tt> is not an instance of
<tt class="docutils literal"><span class="pre">type(right_seq)</span></tt>, or if they are not of a non-terminal
type.</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_keysets</span><span class="p">({</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">})</span>
<span class="go">(set([]), set([&#39;foo&#39;]), set([&#39;bar&#39;]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_keysets</span><span class="p">({</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;bar&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">})</span>
<span class="go">(set([&#39;baz&#39;]), set([&#39;foo&#39;]), set([&#39;bar&#39;]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_keysets</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">])</span>
<span class="go">(set([0, 1]), set([]), set([]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_keysets</span><span class="p">([</span><span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">])</span>
<span class="go">(set([0]), set([]), set([1]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_keysets</span><span class="p">([],</span> <span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">])</span>
<span class="go">(set([]), set([]), set([0, 1]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="json_delta.keyset_diff">
<tt class="descclassname">json_delta.</tt><tt class="descname">keyset_diff</tt><big>(</big><em>left_struc</em>, <em>right_struc</em>, <em>key</em>, <em>minimal=True</em><big>)</big><a class="headerlink" href="#json_delta.keyset_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a diff between <tt class="docutils literal"><span class="pre">left_struc</span></tt> and <tt class="docutils literal"><span class="pre">right_struc</span></tt>.</p>
<p>It is assumed that <tt class="docutils literal"><span class="pre">left_struc</span></tt> and <tt class="docutils literal"><span class="pre">right_struc</span></tt> are both
non-terminal types (serializable as arrays or objects).  Sequences
are treated just like mappings by this function, so the diffs will
be correct but not necessarily minimal.  For a minimal diff
between two sequences, use <a class="reference internal" href="#json_delta.needle_diff" title="json_delta.needle_diff"><tt class="xref py py-func docutils literal"><span class="pre">needle_diff()</span></tt></a>.</p>
<p>This function probably shouldn&#8217;t be called directly.  Instead, use
<a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a>, which will call <a class="reference internal" href="#json_delta.keyset_diff" title="json_delta.keyset_diff"><tt class="xref py py-func docutils literal"><span class="pre">keyset_diff()</span></tt></a> if appropriate
anyway.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.needle_penalty">
<tt class="descclassname">json_delta.</tt><tt class="descname">needle_penalty</tt><big>(</big><em>left</em>, <em>right</em><big>)</big><a class="headerlink" href="#json_delta.needle_penalty" title="Permalink to this definition">¶</a></dt>
<dd><p>Penalty function for Needleman-Wunsch alignment.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.needle_diff">
<tt class="descclassname">json_delta.</tt><tt class="descname">needle_diff</tt><big>(</big><em>left_struc</em>, <em>right_struc</em>, <em>key</em>, <em>minimal=True</em><big>)</big><a class="headerlink" href="#json_delta.needle_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a diff between <tt class="docutils literal"><span class="pre">left_struc</span></tt> and <tt class="docutils literal"><span class="pre">right_struc</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">left_struc</span></tt> and <tt class="docutils literal"><span class="pre">right_struc</span></tt> are both serializable as
arrays, this function will use Needleman-Wunsch sequence alignment
to find a minimal diff between them.  Otherwise, returns the same
result as <a class="reference internal" href="#json_delta.keyset_diff" title="json_delta.keyset_diff"><tt class="xref py py-func docutils literal"><span class="pre">keyset_diff()</span></tt></a>.</p>
<p>This function probably shouldn&#8217;t be called directly.  Instead, use
<a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a>, which will call <a class="reference internal" href="#json_delta.keyset_diff" title="json_delta.keyset_diff"><tt class="xref py py-func docutils literal"><span class="pre">keyset_diff()</span></tt></a> if appropriate
anyway.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.this_level_diff">
<tt class="descclassname">json_delta.</tt><tt class="descname">this_level_diff</tt><big>(</big><em>left_struc</em>, <em>right_struc</em>, <em>key=None</em>, <em>common=None</em><big>)</big><a class="headerlink" href="#json_delta.this_level_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a sequence of diff stanzas between the structures
left_struc and right_struc, assuming that they are each at the
key-path <tt class="docutils literal"><span class="pre">key</span></tt> within the overall structure.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.split_deletions">
<tt class="descclassname">json_delta.</tt><tt class="descname">split_deletions</tt><big>(</big><em>diff</em><big>)</big><a class="headerlink" href="#json_delta.split_deletions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of length 3, of which the first element is a
list of stanzas from <tt class="docutils literal"><span class="pre">diff</span></tt> that modify objects (dicts when
deserialized), the second is a list of stanzas that add or change
elements in sequences, and the second is a list of stanzas which
delete elements from sequences.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.sort_stanzas">
<tt class="descclassname">json_delta.</tt><tt class="descname">sort_stanzas</tt><big>(</big><em>diff</em><big>)</big><a class="headerlink" href="#json_delta.sort_stanzas" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the stanzas in <tt class="docutils literal"><span class="pre">diff</span></tt>: node changes can occur in any
order, but deletions from sequences have to happen last node
first: [&#8216;foo&#8217;, &#8216;bar&#8217;, &#8216;baz&#8217;] -&gt; [&#8216;foo&#8217;, &#8216;bar&#8217;] -&gt; [&#8216;foo&#8217;] -&gt;
[] and additions to sequences have to happen
leftmost-node-first: [] -&gt; [&#8216;foo&#8217;] -&gt; [&#8216;foo&#8217;, &#8216;bar&#8217;] -&gt;
[&#8216;foo&#8217;, &#8216;bar&#8217;, &#8216;baz&#8217;].</p>
<p>Note that this will also sort changes to objects (dicts) so that
they occur first of all, then modifications/additions on
sequences, followed by deletions from sequences.</p>
</dd></dl>

</div>
<div class="section" id="functions-for-applying-normal-patches">
<h2>Functions for applying normal patches<a class="headerlink" href="#functions-for-applying-normal-patches" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="json_delta.patch_stanza">
<tt class="descclassname">json_delta.</tt><tt class="descname">patch_stanza</tt><big>(</big><em>struc</em>, <em>diff</em><big>)</big><a class="headerlink" href="#json_delta.patch_stanza" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the diff stanza <tt class="docutils literal"><span class="pre">diff</span></tt> to the structure <tt class="docutils literal"><span class="pre">struc</span></tt> as
a patch.</p>
<p>Note that this function modifies <tt class="docutils literal"><span class="pre">struc</span></tt> in-place into the
target of <tt class="docutils literal"><span class="pre">diff</span></tt>.</p>
</dd></dl>

</div>
<div class="section" id="functions-for-computing-udiffs">
<h2>Functions for computing udiffs.<a class="headerlink" href="#functions-for-computing-udiffs" title="Permalink to this headline">¶</a></h2>
<p>The data structure representing a udiff that these functions all
manipulate is a pair of lists of iterators <tt class="docutils literal"><span class="pre">(left_lines,</span>
<span class="pre">right_lines)</span></tt>.  These lists are expected (principally by
<a class="reference internal" href="#json_delta.generate_udiff_lines" title="json_delta.generate_udiff_lines"><tt class="xref py py-func docutils literal"><span class="pre">generate_udiff_lines()</span></tt></a>, which processes them), to be of the
same length.  A pair of iterators <tt class="docutils literal"><span class="pre">(left_lines[i],</span> <span class="pre">right_lines[i])</span></tt>
may yield exactly the same sequence of output lines, each with <tt class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></tt>
as the first character (representing parts of the structure the input
and output have in common).  Alternatively, they may each yield zero
or more lines (referring to parts of the structure that are unique to
the inputs they represent).  In this case, all lines yielded by
<tt class="docutils literal"><span class="pre">left_lines[i]</span></tt> should begin with <tt class="docutils literal"><span class="pre">'-'</span></tt>, and all lines yielded by
<tt class="docutils literal"><span class="pre">right_lines[i]</span></tt> should begin with <tt class="docutils literal"><span class="pre">'+'</span></tt>.</p>
<dl class="function">
<dt id="json_delta.patch_bands">
<tt class="descclassname">json_delta.</tt><tt class="descname">patch_bands</tt><big>(</big><em>indent</em>, <em>material</em>, <em>sigil=u' '</em><big>)</big><a class="headerlink" href="#json_delta.patch_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate appropriately indented patch bands, with <tt class="docutils literal"><span class="pre">sigil</span></tt> as
the first character.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.single_patch_band">
<tt class="descclassname">json_delta.</tt><tt class="descname">single_patch_band</tt><big>(</big><em>indent</em>, <em>line</em>, <em>sigil=u' '</em><big>)</big><a class="headerlink" href="#json_delta.single_patch_band" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function returning an iterable that generates a
single patch band.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.commafy">
<tt class="descclassname">json_delta.</tt><tt class="descname">commafy</tt><big>(</big><em>gen</em>, <em>comma=True</em><big>)</big><a class="headerlink" href="#json_delta.commafy" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields every result of <tt class="docutils literal"><span class="pre">gen</span></tt>, with a comma concatenated onto
the final result iff <tt class="docutils literal"><span class="pre">comma</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.add_matter">
<tt class="descclassname">json_delta.</tt><tt class="descname">add_matter</tt><big>(</big><em>seq</em>, <em>matter</em>, <em>indent</em><big>)</big><a class="headerlink" href="#json_delta.add_matter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add material to <tt class="docutils literal"><span class="pre">seq</span></tt>, treating it appropriately for its
type.</p>
<p><tt class="docutils literal"><span class="pre">matter</span></tt> may be an iterator, in which case it is appended to
<tt class="docutils literal"><span class="pre">seq</span></tt>.  If it is a sequence, it is assumed to be a sequence of
iterators, the sequence is concatenated onto <tt class="docutils literal"><span class="pre">seq</span></tt>.  If
<tt class="docutils literal"><span class="pre">matter</span></tt> is a string, it is turned into a patch band using
<a class="reference internal" href="#json_delta.single_patch_band" title="json_delta.single_patch_band"><tt class="xref py py-func docutils literal"><span class="pre">single_patch_band()</span></tt></a>, which is appended.  Finally, if
<tt class="docutils literal"><span class="pre">matter</span></tt> is None, an empty iterable is appended to <tt class="docutils literal"><span class="pre">seq</span></tt>.</p>
<p>This function is a udiff-forming primitive, called by more
specific functions defined within <a class="reference internal" href="#json_delta.udiff_dict" title="json_delta.udiff_dict"><tt class="xref py py-func docutils literal"><span class="pre">udiff_dict()</span></tt></a> and
<a class="reference internal" href="#json_delta.udiff_list" title="json_delta.udiff_list"><tt class="xref py py-func docutils literal"><span class="pre">udiff_list()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.udiff_dict">
<tt class="descclassname">json_delta.</tt><tt class="descname">udiff_dict</tt><big>(</big><em>left</em>, <em>right</em>, <em>diff</em>, <em>indent=0</em><big>)</big><a class="headerlink" href="#json_delta.udiff_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a pair of iterator sequences representing <tt class="docutils literal"><span class="pre">diff</span></tt> as
a delta between dictionaries <tt class="docutils literal"><span class="pre">left</span></tt> and <tt class="docutils literal"><span class="pre">right</span></tt>.</p>
<p>This function probably shouldn&#8217;t be called directly.  Instead, use
<a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a> with the same arguments.  <a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a>
and <a class="reference internal" href="#json_delta.udiff_dict" title="json_delta.udiff_dict"><tt class="xref py py-func docutils literal"><span class="pre">udiff_dict()</span></tt></a> are mutually recursive, anyway.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.reconstruct_alignment">
<tt class="descclassname">json_delta.</tt><tt class="descname">reconstruct_alignment</tt><big>(</big><em>left</em>, <em>right</em>, <em>diff</em><big>)</big><a class="headerlink" href="#json_delta.reconstruct_alignment" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct the sequence alignment between the lists <tt class="docutils literal"><span class="pre">left</span></tt>
and <tt class="docutils literal"><span class="pre">right</span></tt> implied by <tt class="docutils literal"><span class="pre">diff</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.udiff_list">
<tt class="descclassname">json_delta.</tt><tt class="descname">udiff_list</tt><big>(</big><em>left</em>, <em>right</em>, <em>diff</em>, <em>indent=0</em><big>)</big><a class="headerlink" href="#json_delta.udiff_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a pair of iterator sequences representing <tt class="docutils literal"><span class="pre">diff</span></tt> as
a delta between the lists <tt class="docutils literal"><span class="pre">left</span></tt> and <tt class="docutils literal"><span class="pre">right</span></tt>.</p>
<p>This function probably shouldn&#8217;t be called directly.  Instead, use
<a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a> with the same arguments.  <a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a>
and <a class="reference internal" href="#json_delta.udiff_list" title="json_delta.udiff_list"><tt class="xref py py-func docutils literal"><span class="pre">udiff_list()</span></tt></a> are mutually recursive, anyway.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.generate_udiff_lines">
<tt class="descclassname">json_delta.</tt><tt class="descname">generate_udiff_lines</tt><big>(</big><em>left</em>, <em>right</em><big>)</big><a class="headerlink" href="#json_delta.generate_udiff_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the diff lines from <tt class="docutils literal"><span class="pre">left</span></tt> and <tt class="docutils literal"><span class="pre">right</span></tt>, and
generate the lines of the resulting udiff.</p>
</dd></dl>

</div>
<div class="section" id="functions-for-applying-udiffs-as-patches">
<h2>Functions for applying udiffs as patches.<a class="headerlink" href="#functions-for-applying-udiffs-as-patches" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="json_delta.extended_json_decoder">
<tt class="descclassname">json_delta.</tt><tt class="descname">extended_json_decoder</tt><big>(</big><big>)</big><a class="headerlink" href="#json_delta.extended_json_decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a decoder for the superset of JSON understood by the
upatch function.</p>
<p>The exact nature of this superset is documented in the manpage for
json_patch(1).  Briefly, the string <tt class="docutils literal"><span class="pre">...</span></tt> is accepted where
standard JSON expects a <tt class="docutils literal"><span class="pre">{&lt;property</span> <span class="pre">name&gt;}:</span> <span class="pre">{&lt;object&gt;}</span></tt>
construction, and the string <tt class="docutils literal"><span class="pre">...</span></tt>, optionally followed by a
number in parentheses, is accepted where standard JSON expects an
array element.</p>
<p>The superset is implemented by parsing <tt class="docutils literal"><span class="pre">...</span></tt> in JSON objects as
a key/value pair <tt class="docutils literal"><span class="pre">Ellipsis:</span> <span class="pre">True</span></tt> in the resulting dictionary,
and <tt class="docutils literal"><span class="pre">...({num}){?}</span></tt> as a subsequence of <tt class="docutils literal"><span class="pre">{num}</span></tt> <tt class="docutils literal"><span class="pre">Ellipsis</span></tt>
objects, or one ellipsis object if <tt class="docutils literal"><span class="pre">({num})</span></tt> is not present.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span> <span class="o">=</span> <span class="n">extended_json_decoder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">dec</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;{&quot;foo&quot;: &quot;bar&quot;,...,&quot;baz&quot;: &quot;quux&quot;}&#39;</span><span class="p">)</span> <span class="o">==</span>
<span class="gp">... </span> <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="s">&quot;baz&quot;</span><span class="p">:</span> <span class="s">&quot;quux&quot;</span><span class="p">,</span> <span class="bp">Ellipsis</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;[...]&#39;</span><span class="p">)</span>
<span class="go">[Ellipsis]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;[&quot;foo&quot;,...(3),&quot;bar&quot;]&#39;</span><span class="p">)</span>
<span class="go">[u&#39;foo&#39;, Ellipsis, Ellipsis, Ellipsis, u&#39;bar&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="json_delta.fill_in_ellipses">
<tt class="descclassname">json_delta.</tt><tt class="descname">fill_in_ellipses</tt><big>(</big><em>struc</em>, <em>left_part</em>, <em>right_part</em><big>)</big><a class="headerlink" href="#json_delta.fill_in_ellipses" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace Ellipsis objects parsed out of a udiff with elements
from struc.</p>
</dd></dl>

<dl class="function">
<dt id="json_delta.split_udiff_parts">
<tt class="descclassname">json_delta.</tt><tt class="descname">split_udiff_parts</tt><big>(</big><em>udiff</em><big>)</big><a class="headerlink" href="#json_delta.split_udiff_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Split <tt class="docutils literal"><span class="pre">udiff</span></tt> into parts representing subsets of the left and
right structures that were used to create it.</p>
<p>The return value is a 2-tuple <tt class="docutils literal"><span class="pre">(left_json,</span> <span class="pre">right_json)</span></tt>.  If
<tt class="docutils literal"><span class="pre">udiff</span></tt> is a string representing a valid udiff, then each member of
the tuple will be a structure formatted in the superset of JSON that
can be interpreted using <a class="reference internal" href="#json_delta.extended_json_decoder" title="json_delta.extended_json_decoder"><tt class="xref py py-func docutils literal"><span class="pre">extended_json_decoder()</span></tt></a>.</p>
<p>The function itself works by stripping off the first character of
every line in the udiff, and composing <tt class="docutils literal"><span class="pre">left_json</span></tt> out of those
lines which begin with <tt class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></tt> or <tt class="docutils literal"><span class="pre">'-'</span></tt>, and <tt class="docutils literal"><span class="pre">right_json</span></tt> out
of those lines which begin with <tt class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></tt> or <tt class="docutils literal"><span class="pre">'+'</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">udiff</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;--- &lt;stdin&gt;[0]</span>
<span class="gp">... </span><span class="s">+++ &lt;stdin&gt;[1]</span>
<span class="gp">... </span><span class="s"> {</span>
<span class="gp">... </span><span class="s">  &quot;foo&quot;: &quot;bar&quot;</span>
<span class="gp">... </span><span class="s">  ...</span>
<span class="gp">... </span><span class="s">  &quot;baz&quot;: </span>
<span class="gp">... </span><span class="s">-  &quot;quux&quot;,</span>
<span class="gp">... </span><span class="s">+  &quot;quordle&quot;,</span>
<span class="gp">... </span><span class="s"> </span>
<span class="gp">... </span><span class="s">- &quot;bar&quot;: null</span>
<span class="gp">... </span><span class="s"> </span>
<span class="gp">... </span><span class="s">+ &quot;quux&quot;: false</span>
<span class="gp">... </span><span class="s"> }&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">left_json</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{</span>
<span class="gp">... </span><span class="s"> &quot;foo&quot;: &quot;bar&quot;</span>
<span class="gp">... </span><span class="s"> ...</span>
<span class="gp">... </span><span class="s"> &quot;baz&quot;: </span>
<span class="gp">... </span><span class="s">  &quot;quux&quot;,</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s"> &quot;bar&quot;: null</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">right_json</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{</span>
<span class="gp">... </span><span class="s"> &quot;foo&quot;: &quot;bar&quot;</span>
<span class="gp">... </span><span class="s"> ...</span>
<span class="gp">... </span><span class="s"> &quot;baz&quot;: </span>
<span class="gp">... </span><span class="s">  &quot;quordle&quot;,</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s"> &quot;quux&quot;: false</span>
<span class="gp">... </span><span class="s">}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_udiff_parts</span><span class="p">(</span><span class="n">udiff</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">left_json</span><span class="p">,</span> <span class="n">right_json</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="basic-script-functionality">
<h2>Basic script functionality<a class="headerlink" href="#basic-script-functionality" title="Permalink to this headline">¶</a></h2>
<p>json_delta.py can be run as a script.  The usage syntax is
<tt class="docutils literal"><span class="pre">json_delta.py</span> <span class="pre">(diff</span> <span class="pre">|</span> <span class="pre">patch)</span> <span class="pre">[-u]</span></tt>, and the script then runs as a
filter: standard input is expected to read as a JSON structure
<tt class="docutils literal"><span class="pre">[&lt;arg1&gt;,</span> <span class="pre">&lt;arg2&gt;]</span></tt>.  The two arguments are fed to one of the
functions <a class="reference internal" href="#json_delta.diff" title="json_delta.diff"><tt class="xref py py-func docutils literal"><span class="pre">diff()</span></tt></a>, <a class="reference internal" href="#json_delta.patch" title="json_delta.patch"><tt class="xref py py-func docutils literal"><span class="pre">patch()</span></tt></a>, <a class="reference internal" href="#json_delta.udiff" title="json_delta.udiff"><tt class="xref py py-func docutils literal"><span class="pre">udiff()</span></tt></a> or
<a class="reference internal" href="#json_delta.upatch" title="json_delta.upatch"><tt class="xref py py-func docutils literal"><span class="pre">upatch()</span></tt></a>, as appropriate from the command-line arguments, and
the result is written to standard output.</p>
<p>The package available from pypi also installs the scripts
<cite>json_diff &lt;json_diff.1&gt;</cite> and <cite>json_patch &lt;json_patch.1&gt;</cite>,
which make available a more versatile and useful command-line
interface to <a class="reference internal" href="#module-json_delta" title="json_delta"><tt class="xref py py-mod docutils literal"><span class="pre">json_delta</span></tt></a>.  Their manpages are included in this
documentation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">json_delta.py</a><ul>
<li><a class="reference internal" href="#main-entry-points">Main entry points</a></li>
<li><a class="reference internal" href="#utility-functions">Utility functions</a></li>
<li><a class="reference internal" href="#functions-for-computing-normal-diffs">Functions for computing normal diffs.</a></li>
<li><a class="reference internal" href="#functions-for-applying-normal-patches">Functions for applying normal patches</a></li>
<li><a class="reference internal" href="#functions-for-computing-udiffs">Functions for computing udiffs.</a></li>
<li><a class="reference internal" href="#functions-for-applying-udiffs-as-patches">Functions for applying udiffs as patches.</a></li>
<li><a class="reference internal" href="#basic-script-functionality">Basic script functionality</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">JSON-delta: a diff/patch pair for JSON-serialized data structures</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="json_diff.1.html"
                        title="next chapter">json_diff</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="json_diff.1.html" title="json_diff"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="JSON-delta: a diff/patch pair for JSON-serialized data structures"
             >previous</a> |</li>
        <li><a href="index.html">JSON-delta 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Philip J. Roberts.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>