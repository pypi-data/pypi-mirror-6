<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bastionledger">
 
<body>
 
    <div metal:fill-slot="main"
         tal:define="errors options/state/getErrors;
                     lockable python:hasattr(here, 'wl_isLocked');
                     utool context/@@plone_portal_state/portal_url;
                     isLocked python:lockable and here.wl_isLocked();">


      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="here/prettyTitle"/></h1>

      <div class="formHelp">You may edit details that affect credit and payment terms here.</div>

      <form name="edit_form" action="." method="post" tal:attributes="action template/getId">

          <div class="field"
               tal:define="error errors/notes|nothing;
                           Notes request/notes | here/notes;"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="subtype" i18n:translate="label_notes">Notes</label>

            <div tal:content="error">Validation error output</div>

            <div class="formHelp" i18n:translate="help_notes">
                 Any note to appear on invoices etc - such as payment instructions for example.
            </div>

            <textarea id="notes:text" name="notes:text" value=""  rows="10"
                      tal:content="Notes"/>

          </div>

          <div class="field"
               tal:define="error errors/terms|nothing;
                           Terms request/terms | here/terms;"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="type" i18n:translate="label_terms">Terms</label>

            <div class="formHelp" i18n:translate="help_terms">
                 The default number of days in which to expect payment.
            </div>

            <div tal:content="error">Validation error output</div>
            <input type="text" id="terms" name="terms" value="" size="3"
                    tal:attributes="value Terms;"/>

          </div>

          <div class="field"
               tal:define="error errors/discount|nothing;
                           Discount request/discount | here/discount;"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="discount" i18n:translate="label_discount">Discount</label>

            <div tal:content="error">Validation error output</div>

            <div class="formHelp" i18n:translate="help_discount">
                 Any discount (percentage expressed as a decimal) to be applied to gross order value
            </div>

            <input type="text" name="discount:float" value="" size="5"
                         tal:attributes="value here/discount"/>
          </div>

          <div class="field"
               tal:define="error errors/taxincluded|nothing;
                           Taxincluded request/taxincluded | here/taxincluded;"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="taxincluded" i18n:translate="label_taxincluded">Tax Included</label>

            <div tal:content="error">Validation error output</div>

            <div class="formHelp" i18n:translate="help_tax_included">
                 Whether or not the gross amount incorporates tax.  If unchecked, we calculate the
                 tax amount from our tax tables.
            </div>

            <input type="checkbox" name="taxincluded:boolean" value="1"
                   tal:attributes="checked here/taxincluded"/>
          </div>

          <div class="field"
               tal:define="error errors/creditlimit|nothing;
                           Creditlimit request/creditlimit | here/creditlimit;"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="creditlimit" i18n:translate="label_creditlimit">Creditlimit</label>

            <span class="fieldRequired" title="Required"
                  i18n:attributes="creditlimit"
                  i18n:translate="label_required">(Required)</span>

            <div tal:content="error">Validation error output</div>

            <div class="formHelp" i18n:translate="help_credit_limit">
                 An amount which if the account balance exceeds, no more orders may be taken.
            </div>

            <input type="text" name="creditlimit:currency" value="" size="12"
                         tal:attributes="value here/creditlimit"/>
          </div>

        <input type="hidden" name="form.submitted" value="1" />
          <div class="formControls"
               tal:define="process_creation request/process_creation|nothing;">

            <img src="" class="context"
                   tal:define="portal context/portal_url/getPortalObject; locked portal/lock_icon.png;"
                   tal:condition="isLocked"
                   tal:replace="structure python:locked.tag(title='This item is locked')"
                   alt="Object locked"
                   i18n:attributes="alt"/>

            <input class="context"
                   
                   type="submit"
                   name="form.button.Save"
                   value="Save"
                   i18n:attributes="value"
                   tal:attributes="disabled python:isLocked and 'disabled' or None;" />

          </div>
      </form>

      <!--div tal:replace="structure provider:plone.belowcontenttitle">
        Get the byline - contains details about author and modification date.
      </div-->

    </div>
 
</body>
</html>
