<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pootle API &mdash; Pootle 2.5.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.5.1 documentation" href="../index.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.5.1</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../users/index.html">User&#8217;s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Administering a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Pootle API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_docs.html">External documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Pootle API</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#use-cases">Use Cases</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a><ul>
<li><a class="reference internal" href="#abilities-required">Abilities required</a><ul>
<li><a class="reference internal" href="#language-related">Language related</a></li>
<li><a class="reference internal" href="#user-related">User related</a></li>
<li><a class="reference internal" href="#project-related">Project related</a></li>
<li><a class="reference internal" href="#translation-project-language-in-project-related">Translation project (language in project) related</a></li>
<li><a class="reference internal" href="#permissions-in-translation-project-related">Permissions in translation project related</a></li>
<li><a class="reference internal" href="#file-store-related">File (store) related</a></li>
<li><a class="reference internal" href="#unit-related">Unit related</a></li>
<li><a class="reference internal" href="#suggestion-related">Suggestion related</a></li>
</ul>
</li>
<li><a class="reference internal" href="#django-side">Django side</a></li>
<li><a class="reference internal" href="#zero-stage">Zero stage</a></li>
<li><a class="reference internal" href="#first-stage">First stage</a></li>
<li><a class="reference internal" href="#second-stage">Second stage</a></li>
<li><a class="reference internal" href="#third-stage">Third stage</a></li>
<li><a class="reference internal" href="#fourth-stage">Fourth stage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-stability">API stability</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="pootle-api">
<h1>Pootle API<a class="headerlink" href="#pootle-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Mozilla wants to be able to get status and contribution information from
Pootle; what needs to be done, what has someone contributed.</li>
<li>We want Solas to be able to interact with Pootle and initiate and publish
translatable jobs to Pootle so that it can provide a web based translation
environment to Solas translation projects.</li>
<li>Users and system administrations want to be able to interact with Pootle
without needing shell access.</li>
</ol>
</div>
<div class="section" id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Barry has a project hosted on pootle.locamotion.org and wants to automate
pushing and updating strings.  At the moment he can&#8217;t since he has no command
line access but with an API and CLI tool he can automate this in bash scripts
or in other programming languages.</li>
</ul>
<p><strong>Mozilla related</strong></p>
<ul class="simple">
<li>Mozilla wants to be able to retrieve the contributions from a given
translator to display them in its telephone directory.</li>
<li>Mozilla wants to be able to report work that still needs to be done.</li>
</ul>
<p><strong>Solas related</strong></p>
<ul class="simple">
<li>Solas has a new project that it wants to initiate on Pootle.  When initiating
it wants to supply the languages, files, descriptions and translators
assigned to the project.</li>
<li>Solas wants to update descriptions on Pootle to match those in the upstream
project.</li>
<li>Solas wants to update files following a refresh of the source document.</li>
<li>Solas wants an information about the progress being made on Pootle to report
to its users.</li>
<li>When a project is complete Solas wants to remove it from Pootle.</li>
</ul>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Projects should be defined in a <tt class="docutils literal"><span class="pre">.pootle</span></tt> configuration folder for the
command line tool or in the API.</p>
<div class="section" id="abilities-required">
<h3>Abilities required<a class="headerlink" href="#abilities-required" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;LANG&gt;</span></tt> is the language PK (not the code)</li>
<li><tt class="docutils literal"><span class="pre">&lt;USER&gt;</span></tt> is the user PK (not the username)</li>
<li><tt class="docutils literal"><span class="pre">&lt;PROJ&gt;</span></tt> is the project PK (not the code)</li>
<li><tt class="docutils literal"><span class="pre">&lt;TRAP&gt;</span></tt> is the translation project PK</li>
<li><tt class="docutils literal"><span class="pre">&lt;STOR&gt;</span></tt> is the store PK</li>
<li><tt class="docutils literal"><span class="pre">&lt;UNIT&gt;</span></tt> is the unit PK</li>
<li><tt class="docutils literal"><span class="pre">&lt;SUGG&gt;</span></tt> is the suggestion PK</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li><p class="first"><strong>Q:</strong> I think it would make sense to allow codes to be used.</p>
</li>
<li><p class="first"><strong>A:</strong> Tried but was problematic. Perhaps I was told to change how the
resource URI is generated.</p>
<p><strong>TODO</strong>: I need to check
<a class="reference external" href="http://django-tastypie.readthedocs.org/en/latest/resources.html#get-resource-uri">http://django-tastypie.readthedocs.org/en/latest/resources.html#get-resource-uri</a>
but this will be left for the future.</p>
</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>TODO</strong>: Need to look at caching. But this will be left for the
future.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><strong>Q:</strong> Review all command names because might be inconsistent. Also need to
talk about the commands, because this is not an API thing but something
used in <tt class="docutils literal"><span class="pre">pootle-cli</span></tt> perhaps.</li>
<li><strong>A:</strong> Makes sense to split off the CLI implementation beyond a basic tool
for now.  The tool will have a very different interaction with the server I
think.  I think we should at least align the command names. E.g. to create
a new &lt;LANG&gt; we had <em>add</em>, while a &lt;USER&gt; we have <em>create</em>.</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li><p class="first"><strong>Q:</strong> Need to make clear at which levels translations can be pushed or
retrieved. I assume that the original idea was to push files.</p>
<p>Perhaps we should start with a low level API and then add that ability at
upper levels. By that I mean pushing single units and then add the ability
for sending/retrieving files (stores), and after that perhaps add at upper
levels (TP, project or subsets of those two).</p>
</li>
<li><p class="first"><strong>A:</strong> Yes, the original idea in ttk-get and ttk-put is to push and pull
files.  Also for Solas it would be that ability.</p>
<p>I&#8217;m not sure what the lowest level should be, I guess unit for live
interaction e.g. Virtaal translating live against Pootle DB. Or a live
website wanting to see flow of translations.</p>
<p>But for most project related I would see this as a store, while a store is
a collection of units it is what Pootle is using. Unit level allows clearer
abstraction of searching and checks I would guess.</p>
<p>Some <strong>discussion needed here</strong> I think.</p>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>DB</strong>: Should we call get and put, push and pull to match DVCS
semantics?  I&#8217;m leaning to pull and push.</p>
</div>
<ul class="simple">
<li>get (pull) &#8211; retrieve translations from Pootle <a class="footnote-reference" href="#solas" id="id1">[2]</a> <a class="footnote-reference" href="#saas" id="id2">[4]</a></li>
<li>put (push) &#8211; publish translations to Pootle <a class="footnote-reference" href="#solas" id="id3">[2]</a> <a class="footnote-reference" href="#saas" id="id4">[4]</a></li>
</ul>
<div class="section" id="language-related">
<h4>Language related<a class="headerlink" href="#language-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="10%" />
<col width="43%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list</td>
<td>List all
languages</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/languages/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>create</td>
<td>Create a
language</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/languages/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>show</td>
<td>Get the data
for a language
(including its
projects)</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/languages/&lt;LANG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>change</td>
<td>Change the data
for a language</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/languages/&lt;LANG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>delete</td>
<td>Remove a
language</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/languages/&lt;LANG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>stats</td>
<td>Get statistics
for a language</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/languages/&lt;LANG&gt;/statistics/</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="user-related">
<h4>User related<a class="headerlink" href="#user-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="21%" />
<col width="11%" />
<col width="39%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>create</td>
<td>Create a new
user</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/users/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id5">[2]</a></td>
</tr>
<tr class="row-odd"><td>show</td>
<td>Show the data
for a user</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/users/&lt;USER&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>change</td>
<td>Change the data
for a user</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/users/&lt;USER&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>password</td>
<td>Change/set the
password</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/users/&lt;USER&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id6">[2]</a></td>
</tr>
<tr class="row-even"><td>delete</td>
<td>Delete a user
from the server
(is_active will
be set to
False)</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/users/&lt;USER&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id7">[2]</a></td>
</tr>
<tr class="row-odd"><td>stats</td>
<td>Data for that
user within
given dates:
projects,
translations,
suggestions,
etc.</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/users/&lt;USER&gt;/statistics/</span></tt></td>
<td><a class="footnote-reference" href="#moz" id="id8">[1]</a>
<a class="footnote-reference" href="#solas" id="id9">[2]</a></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Users won&#8217;t be listed for security reasons.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>TODO</strong>: Still need to define if PootleProfile, or User, or a
mixture is exposed.</p>
</div>
</div>
<div class="section" id="project-related">
<h4>Project related<a class="headerlink" href="#project-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="10%" />
<col width="43%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list</td>
<td>List all
projects</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/projects/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>init</td>
<td>Create a
project</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/projects/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id10">[2]</a>
<a class="footnote-reference" href="#saas" id="id11">[4]</a></td>
</tr>
<tr class="row-even"><td>show</td>
<td>Get a project
data or
description</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/projects/&lt;PROJ&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>describe</td>
<td>Change data
for a project</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/projects/&lt;PROJ&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id12">[2]</a>
<a class="footnote-reference" href="#saas" id="id13">[4]</a></td>
</tr>
<tr class="row-even"><td>rm</td>
<td>Remove a
project</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/projects/&lt;PROJ&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id14">[2]</a></td>
</tr>
<tr class="row-odd"><td>stats</td>
<td>Get statistics
for a project:
languages, avg
completion,
etc.</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/projects/&lt;PROJ&gt;/statistics/</span></tt></td>
<td><a class="footnote-reference" href="#moz" id="id15">[1]</a>
<a class="footnote-reference" href="#solas" id="id16">[2]</a>
<a class="footnote-reference" href="#saas" id="id17">[4]</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="translation-project-language-in-project-related">
<h4>Translation project (language in project) related<a class="headerlink" href="#translation-project-language-in-project-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="21%" />
<col width="8%" />
<col width="48%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>langs</td>
<td>List languages
(translation
projects) in a
project</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/projects/&lt;PROJ&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id18">[2]</a>
<a class="footnote-reference" href="#saas" id="id19">[4]</a></td>
</tr>
<tr class="row-odd"><td>projs</td>
<td>List projects
(translation
projects) in a
language</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/languages/&lt;LANG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>add</td>
<td>Add a translation
project (add a
language to a
project, or a
project to a
language)</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id20">[2]</a>
<a class="footnote-reference" href="#saas" id="id21">[4]</a></td>
</tr>
<tr class="row-odd"><td>show</td>
<td>Show translation
project data</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>change</td>
<td>Change translation
project data</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>drop</td>
<td>Drop translation
project (from a
project and a
language)</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id22">[2]</a>
<a class="footnote-reference" href="#saas" id="id23">[4]</a></td>
</tr>
<tr class="row-even"><td>stats</td>
<td>Get statistics for
a translation
project</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/statistics/</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="permissions-in-translation-project-related">
<h4>Permissions in translation project related<a class="headerlink" href="#permissions-in-translation-project-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="8%" />
<col width="50%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>listtrans</td>
<td>List translators
in a translation
project</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/users/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>assign</td>
<td>Assign a
translator to
a language
with certain
rights</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/users/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id24">[2]</a>
<a class="footnote-reference" href="#saas" id="id25">[4]</a></td>
</tr>
<tr class="row-even"><td>ls_perm</td>
<td>Show permissions
for a translator
in a project</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/users/&lt;USER&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id26">[2]</a>
<a class="footnote-reference" href="#saas" id="id27">[4]</a></td>
</tr>
<tr class="row-odd"><td>ch_perm</td>
<td>Change permissions
for a translator
in a project</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/users/&lt;USER&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>remove</td>
<td>Remove a translator
from a language</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/users/&lt;USER&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#solas" id="id28">[2]</a>
<a class="footnote-reference" href="#saas" id="id29">[4]</a></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="simple">
<li><strong>Q:</strong> Make clear if users are assigned/removed to a &#8220;translation project&#8221;
and/or in other levels (languages or projects or stores).</li>
<li><strong>A:</strong> We have this problem in Pootle.  Do you have rights because you are
site admin, manage a project, manage a language or given rights in this TP.</li>
</ul>
<p class="last"><strong>TODO</strong>: This could need more discussion.</p>
</div>
</div>
<div class="section" id="file-store-related">
<h4>File (store) related<a class="headerlink" href="#file-store-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="19%" />
<col width="10%" />
<col width="44%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list</td>
<td>List of
available
files in a
translation
project</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/translation-projects/&lt;TRAP&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id30">[3]</a></td>
</tr>
<tr class="row-odd"><td>filter</td>
<td>List stores by
using a given
filter(s)</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>show</td>
<td>Show the data
for the store</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>get</td>
<td>Download the
translation
file for the
store</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/file/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id31">[3]</a></td>
</tr>
<tr class="row-even"><td>put</td>
<td>Upload a
translation
file for the
store</td>
<td>PUT</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/file/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id32">[3]</a></td>
</tr>
<tr class="row-odd"><td>stats</td>
<td>Statistics for
a given file</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/statistics/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id33">[3]</a></td>
</tr>
<tr class="row-even"><td>checks</td>
<td>Shows the
failing checks
for a file</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/checks/</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><strong>Q:</strong> Are we going to allow deleting/adding/changing Files using the API?</li>
<li><strong>A:</strong> Upload/download files yes. Deleting files not, at least for now.
Stores won&#8217;t be added/deleted/changed.</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul>
<li><p class="first"><strong>Q:</strong> Need to define which filters could be used.</p>
<p>Dwayne Bailey said (in previous chat):</p>
<ul class="simple">
<li>In Pootle we have directories which also help filter which stores we&#8217;re
talking about.</li>
<li>We also filter and are able to find units matching some criterion.</li>
<li>So being able to know about the directory layout would be one issue, I
guess it could be part of the store data.</li>
<li>And then being able to find units from a certain level or matching some
criterion.</li>
</ul>
<p><strong>NOTE:</strong> The store saves the <tt class="docutils literal"><span class="pre">pootle_path</span></tt> and <tt class="docutils literal"><span class="pre">parent</span></tt> directory. So
perhaps
<a class="reference external" href="http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering">http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering</a>
could be useful. Need to make checks first in Units.</p>
</li>
<li><p class="first"><strong>A:</strong> The directory structure is just a special way of grouping
stores. So if the store know it&#8217;s paths and parents if would be quite easy.
And if we are maybe able to filter and say show me all stores at this
level.</p>
<p>The one issue would be directories, that is how do we show that at this
level there is a directory, not a store.  For checks, if you are able to
say, show me stores or units failing this check that are at this level then
that would work.  Also realise that we show stats at various levels of a
hierarchy, so not sure what that would need in the API.</p>
</li>
</ul>
<p><strong>TODO:</strong> need to talk more about filtering stores. The discussion about
filtering units is a different one.</p>
<p class="last"><strong>TODO:</strong> need to talk about filtering at other levels (not store, not unit).</p>
</div>
</div>
<div class="section" id="unit-related">
<h4>Unit related<a class="headerlink" href="#unit-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="21%" />
<col width="11%" />
<col width="36%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list_all</td>
<td>List all units
in a file</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/stores/&lt;STOR&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>list_units</td>
<td>Get a list of
units that
match a
criterion</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/units/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id34">[3]</a></td>
</tr>
<tr class="row-even"><td>get_unit</td>
<td>Retrieve a
unit for
translation</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/units/&lt;UNIT&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id35">[3]</a></td>
</tr>
<tr class="row-odd"><td>translate</td>
<td>Provide or
change a
translation
for a unit</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/units/&lt;UNIT&gt;/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id36">[3]</a></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><strong>Q:</strong> Are we going to allow deleting/adding Units using the API?</li>
<li><strong>A:</strong> No, at least for now. Units though would be added/deleted based on a
store upload.</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>TODO</strong>: Criterion would include:</p>
<ul>
<li><p class="first">Search &#8211; match (regex?) in source, target, location, comments</p>
<p><strong>NOTE:</strong> none of the following has been tested.</p>
<ul class="simple">
<li>Starts with: <tt class="docutils literal"><span class="pre">/units/?target__startswith=window</span></tt></li>
<li>Contains (insensitive): <tt class="docutils literal"><span class="pre">/units/?source__icontains=window</span></tt></li>
<li>Ends with (insensitive): <tt class="docutils literal"><span class="pre">/units/?location__iendswith=window.py</span></tt></li>
<li>Match with regex: <tt class="docutils literal"><span class="pre">/units/?comments__regex=r'^(An?|The)</span> <span class="pre">+'</span></tt></li>
<li>Other <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups">https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups</a></li>
</ul>
</li>
<li><p class="first">Completion &#8211; translated, untranslated, fuzzy (other XLIFF states or format
specific states?)</p>
<ul class="simple">
<li>Obsolete: <tt class="docutils literal"><span class="pre">/units/?state=-100</span></tt></li>
<li>Untranslated: <tt class="docutils literal"><span class="pre">/units/?state=0</span></tt></li>
<li>Fuzzy: <tt class="docutils literal"><span class="pre">/units/?state=50</span></tt></li>
<li>Translated: <tt class="docutils literal"><span class="pre">/units/?state=200</span></tt></li>
</ul>
</li>
<li><p class="first">Check &#8211; failing checks</p>
<p><strong>TODO:</strong> need to see how to implement this.</p>
</li>
<li><p class="first">Untranslated units from some deeper level in the hierarchy.</p>
<p><strong>TODO:</strong> need to see how to implement this.</p>
</li>
</ul>
<p>There are some others that we haven&#8217;t implemented in Pootle e.g. Units that
belong to a certain goal.  Julen&#8217;s user page work exposes things like units
that have suggestions, units that I translated, units that where overwritten
by someone else.</p>
<p><strong>TODO:</strong> Does Pootle have goals?</p>
<p><strong>TODO:</strong> Will need time to complete that list of filters.</p>
<p class="last"><strong>TODO:</strong> For all this is necessary to first implement
<a class="reference external" href="http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering">http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering</a></p>
</div>
</div>
<div class="section" id="suggestion-related">
<h4>Suggestion related<a class="headerlink" href="#suggestion-related" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="21%" />
<col width="11%" />
<col width="36%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">Method</th>
<th class="head">URL</th>
<th class="head">Needed for</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list_sugg</td>
<td>List all
suggestions
for a unit</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/units/&lt;UNIT&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>suggest</td>
<td>Provide a
suggestion
for a unit</td>
<td>POST</td>
<td><tt class="docutils literal"><span class="pre">/suggestions/</span></tt></td>
<td><a class="footnote-reference" href="#virtaal" id="id37">[3]</a></td>
</tr>
<tr class="row-even"><td>show</td>
<td>Show a
suggestion</td>
<td>GET</td>
<td><tt class="docutils literal"><span class="pre">/suggestions/&lt;SUGG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>suggest</td>
<td>Change an
existing
suggestion
for a unit</td>
<td>PATCH
or PUT</td>
<td><tt class="docutils literal"><span class="pre">/suggestions/&lt;SUGG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>reject</td>
<td>Reject a
suggestion</td>
<td>DELETE</td>
<td><tt class="docutils literal"><span class="pre">/suggestions/&lt;SUGG&gt;/</span></tt></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><strong>Q:</strong> Are we going to accept/reject Suggestions using the API?</li>
<li><strong>A:</strong> Not in the immediate future.  But I could imagine an Android app
that makes it easy to review suggestions from volunteers.</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="simple">
<li>Stats about suggestions,</li>
<li>Find all suggestions matching some criterion.</li>
</ul>
<p class="last"><strong>TODO:</strong> Need to clarify this two items raised by Dwayne.</p>
</div>
<p class="rubric">Command footnotes</p>
<table class="docutils footnote" frame="void" id="moz" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id8">1</a>, <a class="fn-backref" href="#id15">2</a>)</em> Needed by Mozilla</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="solas" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id3">2</a>, <a class="fn-backref" href="#id5">3</a>, <a class="fn-backref" href="#id6">4</a>, <a class="fn-backref" href="#id7">5</a>, <a class="fn-backref" href="#id9">6</a>, <a class="fn-backref" href="#id10">7</a>, <a class="fn-backref" href="#id12">8</a>, <a class="fn-backref" href="#id14">9</a>, <a class="fn-backref" href="#id16">10</a>, <a class="fn-backref" href="#id18">11</a>, <a class="fn-backref" href="#id20">12</a>, <a class="fn-backref" href="#id22">13</a>, <a class="fn-backref" href="#id24">14</a>, <a class="fn-backref" href="#id26">15</a>, <a class="fn-backref" href="#id28">16</a>)</em> Needed for Solas integration</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="virtaal" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id30">1</a>, <a class="fn-backref" href="#id31">2</a>, <a class="fn-backref" href="#id32">3</a>, <a class="fn-backref" href="#id33">4</a>, <a class="fn-backref" href="#id34">5</a>, <a class="fn-backref" href="#id35">6</a>, <a class="fn-backref" href="#id36">7</a>, <a class="fn-backref" href="#id37">8</a>)</em> Using Virtaal to translate offline</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="saas" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id4">2</a>, <a class="fn-backref" href="#id11">3</a>, <a class="fn-backref" href="#id13">4</a>, <a class="fn-backref" href="#id17">5</a>, <a class="fn-backref" href="#id19">6</a>, <a class="fn-backref" href="#id21">7</a>, <a class="fn-backref" href="#id23">8</a>, <a class="fn-backref" href="#id25">9</a>, <a class="fn-backref" href="#id27">10</a>, <a class="fn-backref" href="#id29">11</a>)</em> Delivering Pootle as a service</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="django-side">
<h3>Django side<a class="headerlink" href="#django-side" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ll use <a class="reference external" href="http://tastypieapi.org/">tastypie</a> to handle the RESTful API.</p>
<ul class="simple">
<li>Authentication &#8211; Will use BasicHTTPAuth. More methods can be added in the
future.</li>
</ul>
</div>
<div class="section" id="zero-stage">
<h3>Zero stage<a class="headerlink" href="#zero-stage" title="Permalink to this headline">¶</a></h3>
<p>Initial tastypie implementation that puts in all the infrastructure for the
API. Including updates to <tt class="docutils literal"><span class="pre">requirements/</span></tt>, documentation, etc.</p>
<p>API version will be <tt class="docutils literal"><span class="pre">0.9</span></tt> until stabilised.</p>
<p>Basic API implementation for list_languages and a command line tool that could
call it.</p>
</div>
<div class="section" id="first-stage">
<h3>First stage<a class="headerlink" href="#first-stage" title="Permalink to this headline">¶</a></h3>
<p>Provide stats for Mozilla in terms of translations contributed. Provide a
linkable badge for users to brag about translations that makes use of this API.</p>
</div>
<div class="section" id="second-stage">
<h3>Second stage<a class="headerlink" href="#second-stage" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ll address the command line approach as a test implementation.  Thus
allowing all actions from a <tt class="docutils literal"><span class="pre">pootle-cli</span></tt> tool.  This will allow us to iron
out issues and easily test error reporting and failures. When it passes that
would mean that we can safely expose this to external tools.</p>
</div>
<div class="section" id="third-stage">
<h3>Third stage<a class="headerlink" href="#third-stage" title="Permalink to this headline">¶</a></h3>
<p>Actual Pootle &lt;&#8211;&gt; Solas interaction.  So expose the API and give feedback to
the team on collaboration.</p>
</div>
<div class="section" id="fourth-stage">
<h3>Fourth stage<a class="headerlink" href="#fourth-stage" title="Permalink to this headline">¶</a></h3>
<p>Using Virtaal. Some ideas:</p>
<ul class="simple">
<li>Ability to list public Pootle servers</li>
<li>Ability to drill into projects</li>
<li>Request a language</li>
<li>See list of files and completion like a catalog manager</li>
<li>Perform translations</li>
</ul>
</div>
</div>
<div class="section" id="api-stability">
<h2>API stability<a class="headerlink" href="#api-stability" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>There are no plans for a stable API until v1.0</li>
<li>Once we declare v1.0 we&#8217;ll keep a stable API for that until deprecated by v2.0</li>
</ul>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2014, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>