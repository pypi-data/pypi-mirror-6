<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <div metal:fill-slot="main"
       tal:define="utool context/@@plone_portal_state/portal_url;
                   ledger nocall: context/Ledger;
                   prev context/prevPeriod; 
                   next context/nextPeriod">
 
      <h1 class="documentFirstHeading"><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;
          <span tal:replace="context/Title | context/getId"/></h1>

    <p class="formHelp">This page collates, compares and contrasts period-end statistics 
        so that you can easily verify the information displayed in your reports and accounts 
        moving forward.</p>

    <table cellpadding="2" cellspacing="0" summary="">
        <tr>
          <td align="left" colspan="4" class="field">
              <a tal:condition="nocall: prev"
                 tal:attributes="href string:${prev/absolute_url}/stats"><strong>&laquo;</strong></a>
          </td>
          <td align="right" class="field">
              <a tal:condition="nocall: next"
                 tal:attributes="href string:${next/absolute_url}/stats"><strong>&raquo;</strong></a>
          </td>
        </tr>
        <tr>
          <td/>
          <td class="field" colspan="2" align="center"><span class="label">Reported</span></td>
          <td class="field" colspan="2" align="center"><span class="label">Computed</span></td>
        </tr>
        <tr>
           <td class="field"><span class="label">Gross Profit</span></td>
           <td class="field" colspan="2" align="right" tal:content="context/gross_profit"/>
           <td class="field" colspan="2" align="center">
              -
           </td>
        </tr>
        <tr>
           <td class="field"><span class="label">Losses Recognised</span></td>
           <td class="field" colspan="2" align="right" tal:content="context/losses_recognised"/>
           <td class="field" colspan="2" align="right">
              <i tal:content="context/lossesRecognised"/>
           </td>
        </tr>
        <tr>
           <td class="field"><span class="label">Losses Forward</span></td>
           <td class="field" colspan="2"  align="right" tal:content="context/losses_forward"/>
           <td class="field" colspan="2" align="right">
              <i tal:content="context/lossesForward"/>
           </td>
        </tr>
        <tr>
           <td class="field"><span class="label">Company Tax</span></td>
           <td class="field" colspan="2" align="right" tal:content="context/company_tax"/>
           <td class="field" colspan="2" align="right">
              <i tal:content="context/companyTax"/>
           </td>
        </tr>
        <tr>
           <td class="field"><span class="label">Net Profit</span></td>
           <td class="field" colspan="2" align="right" tal:content="context/net_profit"/>
           <td class="field" colspan="2" align="right">
               <i tal:content="context/netProfit"/>
           </td>
        </tr>
        <tr><td colspan="5">&nbsp;</td></tr>
        <tr><td colspan="5">&nbsp;</td></tr>
        <tr>
            <td/>
            <td class="field" colspan="2" align="center"><span class="label">Closing</span></td>
            <td class="field" colspan="2" align="center"><span class="label">Reported</span></td>
        </tr>
        <tr>
            <td class="field"><span class="label">Assets</span></td>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('balance', ('Asset',))"/>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('reporting_balance', ('Asset',))"/>
            <td/>
        </tr>       
        <tr>
            <td class="field"><span class="label">Liabilities</span></td>
            <td class="field" align="right"
                tal:content="python: ledger.sum('balance', ('Liability',))"/>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('reporting_balance', ('Liability',))"/>
            <td/>
        </tr>       
        <tr>
            <td class="field"><span class="label">Proprietorship</span></td>
            <td class="field" align="right"
                tal:content="python: ledger.sum('balance', ('Proprietorship',))"/>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('reporting_balance', ('Proprietorship',))"/>
            <td/>
        </tr>       
        <tr>
            <td/>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('balance', ('Liability', 'Proprietorship',))"/>
            <td/>
            <td class="field" align="right"
                tal:content="python: ledger.sum('reporting_balance', ('Liability', 'Proprietorship',))"/>
        </tr>       
        <tr>
           <td class="field" colspan="5"><hr/></td>
        </tr>
        <tr>
            <td/>
            <td/>
            <td class="field" align="right">
               <b tal:content="python: ledger.sum('balance', ('Asset', 'Liability', 'Proprietorship',))"/>
            </td>
            <td/>
            <td class="field" align="right">
               <b tal:content="python: ledger.sum('reporting_balance', ('Asset', 'Liability', 'Proprietorship',))"/>
            </td>
        </tr>       
     </table>

      <div tal:replace="structure provider:plone.belowcontentbody">
           Document actions (print, sendto etc)
      </div>

  </div>
</html>
