 <dl class="portlet" id="portlet-shoppingcart"
      tal:define="order view/order;
                  utool view/site_url">

    <dt class="portletHeader">
         <span class="portletTopLeft"></span>

         <a href="" tal:attributes="href string:${utool}/blshoppingcart_view">
             <tal:block i18n:translate="box_shoppingcart">Shopping Cart</tal:block>
         </a>
         <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem lastItem">                

        <table summary="" width="100%" border="0" cellpadding="0" cellspacing="0" 
               style="padding-left: 1em; padding-right: 1em">
           <tr class="row">
              <td valign="top">
                  <img alt="Cart" src="blcart.gif" 
                       tal:attributes="src string:${utool}/blcart.gif">
              </td>
              <td valign="top" tal:condition="python: not order"
                  tal:content="view/emptyphrase"/>
              <td valign="top" tal:condition="python: order" tal:content="order/getNet"/>
              <td valign="top" tal:condition="python: order" align="right">
                 <form action="pay" method="post" 
                       tal:condition="python: order and order.getNet() > 0"
                       tal:attributes="action string:${order/absolute_url}/content_status_modify">
                     <input type="hidden" name="workflow_action" value="pay"/>
                     <input class="context" type="submit"
                            name="form.button.Pay" value=" Pay "
                            i18n:attributes="value" />
                     <input type="hidden" name="form.submitted" value="1" />
                  </form>
               </td>
            </tr>
        </table>

        <form action="blshoppingcart_remove_items" 
              tal:condition="python: order and order.orderValues()">
           <tal:block tal:repeat="item order/objectValues">
              <div tal:define="oddrow repeat/item/odd;
                               product item/getReference"
                   style="padding-left: 1em">
                 <input type="checkbox" name="ids:list" value=""
                        tal:attributes="value item/getId"/>
                 <a href="" tal:on-error="string:${item/getId}"
                    tal:attributes="href product/absolute_url;
                                    title item/getId">
                     <img alt="Part" tal:define="icon python: product.getIcon(1)"
                          tal:attributes="src string:${utool}/${icon}"/>
                     <span tal:replace="product/title_or_id"/>
                  </a>
               </div>
            </tal:block>
            <div class="formControls" style="padding-left: 1em">
                <input class="context"  type="submit"
                       name="form.button.Delete"
                       value=" Remove Items " i18n:attributes="value" />
            </div>
         </form>

         <form action="blshoppingcart_add_items" method="post"
               tal:define="parts view/parts" tal:condition="parts">
             <table summary="">
                 <tr tal:repeat="part parts">
		     <td><input type="checkbox" name="part_ids:list" value=""
                                tal:attributes="value part/getId"/></td>
                     <td><img src="" alt="Part"
                              tal:define="icon python: part.getIcon(1)"
                              tal:attributes="src string:${utool}/${icon}"/></td>
                     <td tal:content="part/getId"/>
                     <td nowrap tal:content="part/sellprice"/>
                 </tr>
                 <tr>
                     <td colspan="4" class="formControls">
                         <input class="context"  type="submit"
                                name="form.button.Add"
                                value=" Add Item " i18n:attributes="value" />
                     </td>
                 </tr>
             </table>
             <input type="hidden" name="form.submitted" value="1" />
             <input tal:condition="python: order"
                    type="hidden" name="order_id" value=""
                    tal:attributes="value order_id"/>
             <input type="hidden" name="reference" value=""
                    tal:attributes="value python: context.absolute_url(1)"/>
         </form>

         <span class="portletBottomLeft"></span>
         <span class="portletBottomRight"></span>

       </dd>
    </dl>
