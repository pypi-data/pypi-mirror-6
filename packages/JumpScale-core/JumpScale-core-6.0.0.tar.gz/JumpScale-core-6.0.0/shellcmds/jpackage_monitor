#!/usr/bin/env python
from JumpScale import j
j.application.start("jpackages")
from JumpScale.baselib import cmdutils
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-a', '--all', required=False, action='store_true', help='do also for dependencies (all jpackages)')

packages, args = cmdutils.getJPackage(parser,installed=True)
result=[]
for package in packages:
    if package.monitor(dependencies=args.all)==True:
        result.append("OK    :%s"%package)
    else:
        result.append("ERROR :%s"%package)

print "\n\nMONITORING RESULTS:"
print "\n".join(result)

j.application.stop()
