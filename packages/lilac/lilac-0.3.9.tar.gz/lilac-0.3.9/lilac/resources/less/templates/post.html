{% extends "layout.html" %}
{% block css_this_page %}post.css{% endblock %}
{% block title %}{{post.title}}{% endblock %}

{% block content %}
 {# title picture #}
 {% if post.title_pic %}
  <div class="title-pic-container">
    <img src="{{root_path}}/{{blog.theme}}/static/images/spinner-circle-fade.gif" class="loader"/>
    <a href="{{post.title_pic}}" title="{{post.title}}">
      <img src="{{post.title_pic}}" alt="{{post.title}}" class="title-pic"/>
    </a>
  </div>
  {% endif %}

  <h1 class="title">{{post.title}}</h1>
  <div class="post-html">
    {{post.html}}
  </div>
  <!-- meta -->
  <div class="meta">
    <span class="date">
      <i class="icon-clock"></i>
      <a class="datetime" title="{{post.datetime.strftime("%Y-%m-%d %H:%M")}}">{{post.datetime.strftime("%b  %d, %y")}}</a>
    </span>
    {% if post.tags %}
    <span class="tags">
      <i class="icon-tag"></i>
      {% set tag_counter = 0 %}
      {% for tag in post.tags %}
      {% set tag_counter = tag_counter + 1%}
      <a href="{{root_path}}/tag/{{tag}}.html" class="tag" title="{{tag}}">{{tag}}</a>
      {% if tag_counter < post.tags|length %}
      ,&nbsp;
      {% endif %}
      {% endfor %}
    </span>
    {% endif %}
  </div>

  <!--disqus-->
  {% if config.disqus.shortname and not config.disqus.shortname.isspace() %}
    <!-- Disqus Begin-->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = '{{config.disqus.shortname}}'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <!-- Disqus End-->
  {% endif %}
{% endblock %}

{% block header_extra %}
<!-- lazyload background images-->
<script src="{{root_path}}/{{blog.theme}}/static/js/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="{{root_path}}/{{blog.theme}}/static/js/jquery.lazyload.background.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function () {
      $("div.item div.title-pic-preview").lazyload({effect: 'fadeIn'});
  });
</script>
<!-- end lazyload -->
{% endblock %}
