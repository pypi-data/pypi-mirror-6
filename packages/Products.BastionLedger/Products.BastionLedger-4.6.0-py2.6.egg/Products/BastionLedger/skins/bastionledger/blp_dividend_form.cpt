<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>
 
 
<body>
  <div metal:fill-slot="main"
       tal:define="utool context/@@plone_portal_state/portal_url">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)"
                tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/></h1>

      <form name="edit_form" action="" method="post" tal:attributes="action template/getId">

         <fieldset>

             <legend>Process Parameters</legend>


          <div class="field"
               tal:define="error errors/share_type |nothing;
                           share_type request/share_type | nothing">

            <label for="address" 
                   i18n:translate="label_address">Share Type</label>

            <div class="formHelp" i18n:translate="help_share_type">
              The stock type to post dividends against.
            </div>

            <div tal:content="error">Validation error output</div>

            <select name="share_type">
                <option tal:repeat="c context/shareDefinitionValues"
                        tal:content="c/title"
                        tal:attributes="value c/getId;
                                        selected python: c==share_type"/>
            </select>

          </div>

          <div class="field"
               tal:define="error errors/total_amount|nothing;
                           Total_Amount request/total_amount | nothing;"
               tal:attributes="class python:error and 'field error' or 'field'">

              <label for="total_amount" i18n:translate="label_total_amount">Total Amount</label>

            <div class="formHelp" i18n:translate="help_total_amount">
              The full amount of the dividend to be paid to all parties holding that stock.
            </div>


              <div tal:content="error">Validation error output</div>

              <input type="text" id="total_amount" name="total_amount" value="" size="12"
                      tal:attributes="value Total_Amount;"/>
          </div>

          <div class="field"
               tal:define="error errors/effective|nothing;
                           Effective request/effective | python: DateTime();
                           inputvalue Effective;
                           formname string:edit_form;
                           show_hm python: False;
                           inputname string:effective;"
               tal:attributes="class python:error and 'field error' or 'field'">

              <label for="effective" 
                     i18n:translate="label_effective">Effective Date</label>

              <div tal:content="error">Validation error output</div>

              <span metal:use-macro="context/calendar_macros/macros/calendarDatePickerBox"/>

          </div>

          <div class="field"
               tal:define="error errors/do_payment|nothing;
                           do_payment request/do_payment| nothing;"
               tal:attributes="class python:error and 'field error' or 'field'">

              <label for="secretary" i18n:translate="label_do_payment">Do Payment</label>

            <div class="formHelp" i18n:translate="help_do_payment">
              Also generate a corresponding entry against the bank account immediately paying
              out the shareholders
            </div>

              <div tal:content="error">Validation error output</div>

              <input type="checkbox" id="secretary" name="do_payment" value="1"
                      tal:attributes="selected do_payment;"/>
          </div>

         </fieldset>


         <div class="formControls" colspan="2">
               <input class="context"  type="submit" name="form.button.Run"
                      value="Run" i18n:attributes="Run" />
         </div>

         <input type="hidden" name="form.submitted" value="1"/>
      </form>
 
  </div>
 
</body>
</html>
