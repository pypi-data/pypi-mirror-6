<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>

 
<body>
  <div metal:fill-slot="main"
       tal:define="len_text python:len(context.text);
                   is_editable context/@@plone_context_state/is_editable;
                   utool context/@@plone_portal_state/portal_url;">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)"
               tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/></h1>

      <tal:byline tal:on-error="string:">
         <div tal:replace="structure provider:plone.belowcontenttitle"/>
      </tal:byline>

      <div class="documentDescription" tal:content="context/description"/>

      <fieldset>

          <legend tal:content="context/title"/>

           <div class="field">
             <label for="id" i18n:translate="label_unit">Unit</label>
             <span tal:replace="context/unit"/>
           </div>

           <div class="field">
             <label for="id" i18n:translate="label_weight">Weight</label>
             <span tal:replace="context/weight"/>
           </div>

           <div class="field">
             <label for="id" i18n:translate="label_onhand">Onhand</label>
             <span tal:replace="context/onhand"/>
           </div>

           <div class="field">
             <label for="id" i18n:translate="label_price">Sale Price</label>
             <span tal:replace="context/sellprice"/>
           </div>

           <div class="field">
             <label for="id" i18n:translate="label_price">Purchase Price</label>
             <span tal:replace="context/listprice"/>
           </div>

           <div class="field">
             <label for="id" i18n:translate="label_price">Last Cost</label>
             <span tal:replace="context/lastcost"/>
           </div>
     
           <p tal:condition="python: not len_text and is_editable"
              i18n:translate="no_body_text" class="discreet">
               This part does not have any body text, click the edit tab to change it.
           </p>
     
           <div class="stx"
                tal:condition="len_text"
                tal:attributes="class python:context.Format() in ('text/structured', 'text/x-rst', ) and 'stx' or 'plain'">
                <div tal:replace="structure python:context.CookedBody(stx_level=2)" />
           </div>

           <div class="field" tal:define="urls context/urls" tal:condition="urls">
             <label for="id" i18n:translate="label_urls">Additional URLs</label>
             <ul>
                <li tal:repeat="url urls">
                    <a href="" tal:attributes="href url" tal:content="url"/>
                </li>
             </ul>
           </div>     

      </fieldset>

      <fieldset>

           <legend>Order Management</legend>

           <div class="label">Inventory Account</div>
           <div class="field" tal:define="acct python: context.inventory_account()">
              <img src="" alt="" tal:define="icon python: acct.getIcon(1)"
                          tal:attributes="src string:${utool}/${icon}">
              <a href="" tal:attributes="href acct/absolute_url" tal:content="acct/prettyTitle"/>
           </div>


           <div class="label">Cost of Goods Sold Account</div>
           <div class="field" tal:define="acct python: context.expense_account()">
              <img src="" alt="" tal:define="icon python: acct.getIcon(1)"
                          tal:attributes="src string:${utool}/${icon}">
              <a href="" tal:attributes="href acct/absolute_url" tal:content="acct/prettyTitle"/>
           </div>

           <div class="label">Income Account</div>
           <div class="field" tal:define="acct python: context.income_account()">
              <img src="" alt="" tal:define="icon python: acct.getIcon(1)"
                          tal:attributes="src string:${utool}/${icon}">
              <a href="" tal:attributes="href acct/absolute_url" tal:content="acct/prettyTitle"/>
           </div>

      </fieldset>

      <div tal:replace="structure provider:plone.belowcontentbody">
           Document actions (print, sendto etc)
      </div>

  </div>
 
</body>
</html>
