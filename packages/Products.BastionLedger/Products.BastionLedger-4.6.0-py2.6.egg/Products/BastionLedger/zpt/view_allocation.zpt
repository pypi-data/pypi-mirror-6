<html tal:replace="structure context/manage_page_header"
      tal:define="global entries container/objectItems" />


     <span tal:replace="structure python:container.manage_tabs(help_topic='ObjectManager_Contents.stx',
                                                               help_product='OFSP')"/>

       <table border="0" width="100%" cellspacing="0" cellpadding="0"
              tal:define="products python:container.filtered_meta_types(request)">
          <tr>
              <td align="right" valign="top" class="form-element">
                 <form method="get" action="" tal:attributes="action request/URL1">
                     <div tal:condition="python: len(products) > 1">
                         <select class="form-element" name=":action"
                                 onchange="" tal:attributes="onchange string:location.href='${request/URL1}/'+this.options[this.selectedIndex].value">
                             <option value="manage_workspace" disabled>Select type to add...</option>
                             <option tal:repeat="product products"
                                     value="" tal:attributes="value product/action"
                                     tal:content="product/name"/>
                          </select>
                          <input class="form-element" type="submit" value=" Add ">
                      </div>
                      <div tal:condition="python: len(products) == 1">
                          <span tal:define="product python:products[0]">
                             <input type="hidden" name=":method" value="" tal:attributes="value product/action"/>
                             <input class="form-element" type="submit" name="submit" value=""
                                    tal:attributes="value string: Add ${product/name}" />
                          </span>
                      </div>
                 </form>
              </td>
          </tr>
       </table>
       <br/>
      <form action="" tal:attributes="action request/URL1" method="post">
       <table border="0" cellpadding="2" cellspacing="0" width="100%">
           <tr class="list-header" tal:condition="entries">
               <td width="16"  class="list-item">&nbsp;</td>
               <td width="25"  class="list-item">Type</td>
               <td width="20%" class="list-item">Name</td>
               <td width="15%" class="list-item" align="right">Quantity</td>
               <td width="15%" class="list-item" align="right">Face</td>
               <td width="15%" class="list-item" align="right">Total</td>
               <td>&nbsp;</td>
               <td width="25%" class="list-item">Last Modified</td>
     	       <td width="5%"  class="list-item">&nbsp;</td>
           </tr>
           <div tal:repeat="item_tuple entries">
               <tr tal:condition="repeat/item_tuple/even" class="row-hilite"
                   tal:define="item python:item_tuple[1]; 
                               item_id python: item_tuple[0];
                               definition item/getDefinition">
                   <td class="list-item" width="16">
                      <input type="checkbox" name="ids:list" value="" tal:attributes="value item_id">
                   </td>
                   <td class="list-item" tal:condition="exists: item/om_icons">
                     <span tal:repeat="icon item/om_icons" tal:omit-tag="">
                       <img src="" alt="" title=""
                            tal:attributes="src string:${request/BASEPATH1}/${icon/path}; alt icon/alt; title icon/title"/>
                     </span>
                   </td>
                   <td class="list-item" tal:condition="not: item/om_icons | nothing">
                       <img src="" tal:attributes="src item/icon"/>
                   </td>
                   <td class="list-item">
                       <a href="" tal:attributes="href string:${item/getId}/manage_workspace">
                          <span tal:replace="item/getId"/>
                          <span tal:condition="item/title" tal:replace="string:(${item/title})"/>
                       </a>
                   </td>
                   <td class="list-item" align="right" tal:content="item/quantity"/>
                   <td class="list-item" align="right" tal:content="definition/face"/>
                   <td class="list-item" align="right" tal:content="python: definition.face * item.quantity"/>
                   <td>&nbsp;</td>
                   <td class="list-item" tal:on-error="string:"
                       tal:content="python: item.bobobase_modification_time().strftime('%Y-%m-%d %H:%M')"/>
                   <td class="list-item">&nbsp;</td>
               </tr>
               <tr tal:condition="repeat/item_tuple/odd" class="row-normal"
                   tal:define="item python:item_tuple[1]; item_id python: item_tuple[0]">
                   <td class="list-item" width="16">
                      <input type="checkbox" name="ids:list" value="" tal:attributes="value item_id">
                   </td>
                   <td class="list-item" tal:condition="not: item/om_icons | nothing">
                       <img src="" tal:attributes="src item/icon"/>
                   </td>
                   <td class="list-item" tal:condition="exists: item/om_icons">
                     <span tal:repeat="icon item/om_icons" tal:omit-tag="">
                       <img src="" alt="" title="" 
                            tal:attributes="src string:${request/BASEPATH1}/${icon/path}; alt icon/alt; title icon/title"/>
                     </span>
                   </td>
                   <td class="list-item">
                       <a href="" tal:attributes="href string:${item/getId}/manage_workspace">
                          <span tal:replace="item/getId"/>
                          <span tal:condition="item/title" tal:replace="string:(${item/title})"/>
                       </a>
                   </td>
                   <td class="list-item" tal:content="item/quantity"/>
                   <td class="list-item" tal:on-error="string:"
                       tal:content="python: item.bobobase_modification_time().strftime('%Y-%m-%d %H:%M')"/>
                   <td class="list-item">&nbsp;</td>
               </tr>
           </div>
           <tr>
               <td colspan="9" class="form-element">
                  <input tal:condition="python: entries and container.SecurityCheckPermission('Delete objects',
                                                                                   context)"
                         class="form-element" type="submit"
                         name="manage_delObjects:method" value="Delete" />
               </td>
           </tr>
         </table>
      </form>

<html tal:replace="structure context/manage_page_footer"/>




