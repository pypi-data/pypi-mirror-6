<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bastionledger">
 
  <div metal:fill-slot="main"
      tal:define="errors options/state/getErrors;
                  utool context/@@plone_portal_state/portal_url;
                  member context/@@plone_portal_state/member;
                  editor python:member.getProperty('wysiwyg_editor',None);
                  wysiwyg python:editor and editor!=None and 'editor' or 'None';
                  lockable python:hasattr(here, 'wl_isLocked');
                  isLocked python:lockable and here.wl_isLocked();">

      <h1>
           <img src="" tal:define="icon python: context.getIcon(1)" alt=""
                tal:attributes="src string:${utool}/${icon}; alt context/meta_type">&nbsp;
           <span tal:replace="context/title_or_id"/>
      </h1>

      <form name="edit_form" action="" enctype="multipart/form-data"
            tal:attributes="action string:${here/getId}/${template/getId}" method="post">

         <div class="row"
              tal:define="error errors/title|nothing;
                           Title request/title | here/Title;"
               tal:attributes="class python: error and 'field error' or 'field'">
             <div class="label" i18n:translate="label_title">Title</div>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>

             <div tal:content="error">Validation error output</div>
             
             <div class="field"> 
                 <input type="text" id="title" name="title" value="" size="80" 
                        tal:attributes="value Title"/>
             </div>
         </div>

         <div class="row"
              tal:define="error errors/description|nothing;
                          Description request/description | here/Description;"
               tal:attributes="class python: error and 'field error' or 'field'">
             <div class="label" i18n:translate="label_description">Description</div>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>

             <div tal:content="error">Validation error output</div>
             
             <div class="field"> 
                 <textarea id="description" name="description" value="" rows="4" 
                           tal:content="Description"/>
             </div>
         </div>

         <div class="row"
              tal:define="text request/form/text | context/text;
                          cooked_text request/form/text | context/cooked_text">

            <label for="description" i18n:translate="label_text">Text</label>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>

            <tal:editor define="inputname  string:text;
                                formname   string:edit_form;
                                inputvalue text;
                                cooked_inputvalue cooked_text;">
              <div metal:use-macro="here/wysiwyg_support/macros/wysiwygEditorBox">
                The WYSIWYG code
              </div>
            </tal:editor>
                                                                                
            <div metal:use-macro="here/wysiwyg_support/macros/textFormatSelector">
              Format box, if needed
            </div>
                                                                                
         </div>
                                   
         <div class="formControls" colspan="2">
              <input class="context"  type="submit" name="form.button.ContentEdit"
                     value="Edit" i18n:attributes="value"
                     tal:attributes="disabled python:isLocked and 'disabled' or None;" />
              <input class="standalone"  type="submit" name="form.button.Cancel"
                     value="Cancel" i18n:attributes="value" />
         </div>

          <input type="hidden" name="form.submitted" value="1" />
                                                                                               
      </form>

  </div>
</html>

