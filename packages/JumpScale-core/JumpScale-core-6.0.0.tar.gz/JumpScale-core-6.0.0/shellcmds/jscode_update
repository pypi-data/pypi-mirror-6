#!/usr/bin/env python
from JumpScale import j
j.application.start("jspush")
import JumpScale.baselib.mercurial

for subdir in ["jumpscale","incubaid"]:
    if j.system.fs.exists("/opt/code/%s"%subdir):
        bitbucket=j.clients.bitbucket.getBitbucketConnection(subdir)
        for item in j.system.fs.listDirsInDir("/opt/code/%s"%subdir):
            cl=bitbucket.getMercurialClient(j.system.fs.getBaseName(item))
            # cl=j.clients.mercurial.getClient(item)
            cl.updatemerge()

j.application.stop()
