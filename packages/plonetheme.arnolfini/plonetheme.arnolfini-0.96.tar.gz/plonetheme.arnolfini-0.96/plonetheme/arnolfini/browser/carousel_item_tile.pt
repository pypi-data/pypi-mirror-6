<tal:block define="item_url context/getURL|context/absolute_url;
                  item_type context/portal_type;
                  use_view_action site_properties/typesUseViewActionInListings|python:();
                  item_description context/Description;
                  item_title_or_id context/pretty_title_or_id;
                ">
<div class="" tal:attributes="class python:'carousel_inner_item ' + view.getTagsAsClass(context)">
      <a class="imagelink" tal:condition="python: view.containsMedia(context)" href="" tal:attributes="href  item_url"><tal:image replace="structure python:view.getLeadMediaTag(context, scale='crop')"></tal:image></a>
      <div class="res-info">
	  <h2 class="summary">
	      <a href="#"
		 tal:attributes="href item_url;"
		 tal:content="context/Title">
		  Item Title
	      </a>
	  </h2>
	  
	  <div id="eventBooking" tal:condition="python: context.portal_type == 'Event' or context.portal_type == 'Media Event'">  
	      <p class="dates" tal:replace="structure python: view.getFormattedEventDate(context)">
		    Thursday 14 February 2013, 7.30 to 9.30pm
	      </p>
	      
	      <p class="booking" tal:condition="python:not context.getBooking() and not view.isEventPast(context)">
		      <span class="price">Free</span>
	      </p>
	      <p class="booking" tal:condition="python: context.getBooking() and not view.isEventPast(context)">
		    <span class="price" tal:content="python: context.getPrice() or 'Free'">Free</span> <span class="arrow" tal:condition="python: context.getLink() != ''">&rarr;</span> <a href="" class="bookLink" tal:condition="python: context.getLink() != ''" tal:attributes="href python:view.getEventBookingLink(context); onCLick string: return Arnolfini.trackEcommerce('${context/Title}', '0.00', 'Event')">Book</a>
	      </p>
	      
	      <div class="buyable" tal:condition="python: view.isBuyable(context)">
		   <div class="buyableInfo">
			 <span tal:define="price python:getattr(view.payable(context),'price',0) or 0">&pound;<span tal:replace="python: '%.2f'%price">29.00</span> &rarr; <span tal:replace="structure python:view.addPaypalButton('Buy' ,context.Title(), price)"></span></span>
		   </div>
	       </div>
	</div>
      
	  <div class="description">
	      <span tal:condition="python:context.Description() != '' " tal:replace="python:context.Description()"></span>
	      <tal:bodyfallback condition="python:context.Description() == ''">
		  <span tal:condition="python: getattr(context, 'text', False)" tal:replace="python:view.trimText(context.text, 200, strip=True)"></span>
	      </tal:bodyfallback>
	  </div>
      </div>
</div>
</tal:block>