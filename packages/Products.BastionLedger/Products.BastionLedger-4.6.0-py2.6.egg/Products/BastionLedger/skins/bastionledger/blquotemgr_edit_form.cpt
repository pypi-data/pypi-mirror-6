<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">

<body>
  <div metal:fill-slot="main" 
       tal:define="errors options/state/getErrors;
                   utool context/@@plone_portal_state/portal_url;">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/></h1>

     <form name="edit_form"  action="."  method="post" 
           tal:define="errors options/state/getErrors;"
           tal:attributes="action string:${template/getId}">


          <div class="field"
               tal:condition="python:site_properties.getProperty('visible_ids', None)"
               tal:define="error errors/id | nothing;
                           id python:request.get('id', here.show_id() and here.getId() or '');"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="id" i18n:translate="label_short_name">Short Name</label>

            <div class="formHelp" i18n:translate="help_shortname">
                   Short Name is part of the item's web address.
                           For accessibility reasons, do not use spaces, upper case,
                   underscores, or special characters.
            </div>

            <div tal:content="error">Validation error output</div>

            <input type="text"
                   id="id"
                   name="id"
                   value=""
                   tal:attributes="value id"
                   />

          <input type="hidden"
                 name="id"
                 tal:condition="python:not site_properties.getProperty('visible_ids', '')"
                 tal:attributes="value python:request.get('id', here.getId())"
                 />


          </div>

             <div tal:define="error errors/title|nothing;
                  Title request/title | context/Title"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="title" i18n:translate="label_title">Title</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="title title_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="title" name="title" value="" size="50"
                         tal:attributes="value Title;"/>
             </div>

             <div tal:define="error errors/Description|nothing;
                  Description request/description | context/Description"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Description</div>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_description">
                    A brief description of the item.
                 </div>

                 <textarea rows="5" cols="80" id="description" name="description"
                           tal:content="Description" ></textarea>
             </div>

             <div tal:define="error errors/Disclaimer|nothing;
                  Disclaimer request/disclaimer | context/disclaimer"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Disclaimer</div>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_disclaimer">
                    A signature message explaining legal rights and obligations surrounding
                    each quote.
                 </div>

                 <textarea rows="5" cols="80" id="disclaimer" name="disclaimer"
                           tal:content="Disclaimer" ></textarea>
             </div>

             <div tal:define="error errors/email|nothing;
                  Email request/email | context/email | nothing"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="email" i18n:translate="label_email">Email</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="email email_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_disclaimer">
                    Your correspondence email address for quotations.
                 </div>

                 <input type="text" id="email" name="email" value="" size="50"
                         tal:attributes="value Email;"/>
             </div>


             <div tal:define="error errors/base_currency|nothing;
                  Base_Currency request/base_currency | context/base_currency"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="base_currency" i18n:translate="label_base_currency">Base Currency</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="base_currency base_currency_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_base_currency">
                    The default currency to quote in.
                 </div>

                 <select name="base_currency">
                    <option tal:repeat="book context/currencies"
                            tal:content="book"
                            tal:attributes="selected python: book in Base_Currency and 1 or 0"/>
                 </select>
             </div>

             <div tal:define="error errors/orderbooks|nothing;
                  Orderbooks request/orderbooks | context/orderbooks"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="orderbooks" i18n:translate="label_orderbooks">Orderbooks</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="orderbooks orderbooks_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_orderbooks">
                    A list of orderbooks associated with this quote manager.  These are used
                    to assign inventory to quotes and to upgrade into order accounts.
                 </div>

                 <select name="orderbooks:list" multiple>
                    <option tal:repeat="book context/orderbookIds"
                            tal:content="book"
                            tal:attributes="selected python: book in Orderbooks and 1 or 0"/>
                 </select>
             </div>
             <div tal:define="error errors/expiry_days|nothing;
                  Expiry_Days request/expiry_days | context/expiry_days"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="expiry_days" i18n:translate="label_expiry_days">Expiry Days</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="expiry_days expiry_days_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_expiry_days">
                     The number of days each quotation will be considered valid.
                 </div>

                 <input type="text" id="expiry_days" name="expiry_days" value="" size="3"
                         tal:attributes="value Expiry_Days;"/>
             </div>

           <input class="context"
                         
                         type="submit"
                         name="form.button.Edit"
                         value="Edit"
                         i18n:attributes="value" />

        <input type="hidden" name="form.submitted" value="1" />
     </form>

      <div tal:replace="structure provider:plone.belowcontentbody">
           Document actions (print, sendto etc)
      </div>

  </div>
 
</body>
</html>
