#!/bin/sh

. new_install/stp_tools

err=false

while read line
do
	eval `echo $line | split_line `
	echo XXXXXXXX
	echo pkg $pkg
	echo scm $scm
	echo url $url
	echo ''
	case "$pkg"
	in
	new_install)
		echo skipping new_install - not a real package
		;;
	*)
		case "$scm"
		in
		svn)
			if ( set -x ; svn checkout -q $url $pkg )
			then
				:
			else
				err=true
			fi
			;;
		*)
			echo unknown source control system
			;;
		esac
	esac
done

if $err
then
	echo ERROR in checkout
	exit 1
fi
