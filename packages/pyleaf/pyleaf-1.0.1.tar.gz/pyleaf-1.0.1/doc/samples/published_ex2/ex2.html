
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>ex2</title>
<meta http-equiv="Content-Language" content="English" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>

<div id="wrap">
<div id="top"></div>
<div id="content">

<div class="header">
<img src="leaf.png">
<br><br><br><br><br>
</div>	

<div class="breadcrumbs"><h1>ex2</h1></div><div class="middle"><h2>Project
   Summary</h2><div style="width: 90%"><b>Description:</b> This is a
   very simple protocol whose aim is to drive an example of Python/R
   integration.  We just plot the R's <i>cars</i> dataset together
   with a linear regression using R's <i>lm</i> and a
   boxplot. The <i>[F]</i>-s in the protocol are <i>flags</i>
   indicating that the flagged node (rectangular in the graphical
   representation) produces a file on the disk. Such nodes must always
   return the name of the file they create (as a simple <i>str</i>),
   or a list of file names if they produce more than one file (as a
   <i>list</i> of <i>str</>). <br><b>Number of nodes:</b> 4<br><b>Number of <i>[F]</i>-nodes:</b> 2<br><b>Total number of output files:</b> 3<br><b>Total size of output files:</b> 29.09K<br><b>Total CPU time required:</b> 00:00:0.30<br></div><br><h2>Protocol map</h2><div align = "center"><IMG SRC="ex2.gif" USEMAP="#G" />
</div><map id="G" name="G">
<area shape="rect" id="plots" href="#plots_details" title="&lt;TABLE&gt;" alt="" coords="553,140,651,156"/>
<area shape="rect" id="plots" href="#plots_details" title="Multiple outputs: click to go to details" alt="" coords="653,140,749,156"/>
<area shape="rect" id="exportCSV" href="#exportCSV_details" title="&lt;TABLE&gt;" alt="" coords="288,109,381,125"/>
<area shape="rect" id="exportCSV" href="carsdata.csv" title="Open output file" alt="" coords="384,109,476,125"/>
<area shape="rect" id="getData" href="#getData_details" title="&lt;TABLE&gt;" alt="" coords="20,109,115,125"/>
<area shape="rect" id="regression" href="#regression_details" title="&lt;TABLE&gt;" alt="" coords="287,248,381,264"/>
</map>
<h2>Nodes details<h2>
<h3><a name="plots_details">plots</a></h3>
Plots the dataset with a regression line and a boxplot using R.<br>Output files: <a href="car_regress.pdf">car_regress.pdf</a> , <a href="car_hist.pdf">car_hist.pdf</a> .<br><br><b>Last build was:</b> Sun Jan  8 15:51:57 2012.<br><b>Required CPU time:</b> 00:00:0.15.<br><div class="code"><pre>def plots(getData_o, regression_o):<br>    """Plots the dataset with a regression line and a boxplot using R."""<br>    fname1 = 'car_regress.pdf'<br>    r.pdf(fname1)<br>    r.plot(getData_o, ylab='dist', xlab='speed')<br>    r.abline(regression_o['(Intercept)'], regression_o['y'], col='red')<br>    r.dev_off()<br><br>    fname2 = 'car_hist.pdf'<br>    r.pdf(fname2)<br>    r.boxplot(getData_o, names=['dist', 'speed'])<br>    r.dev_off()<br><br>    return fname1, fname2<br></pre></div><hr><h3><a name="exportCSV_details">exportCSV</a></h3>
Exports Car's data to a CSV file.<br>Output file: <a href="carsdata.csv">carsdata.csv</a><br><br><b>Last build was:</b> Sun Jan  8 15:51:57 2012.<br><b>Required CPU time:</b> 00:00:0.03.<br><div class="code"><pre>def exportCSV(data):<br>    """Exports Car's data to a CSV file."""<br>    fname = 'carsdata.csv'<br>    f = open(fname, 'w')<br>    for point in data:<br>        f.write(str(point[0]) + ', ' +<br>                str(point[1]) + '\n')<br>    f.close()<br>    return fname<br></pre></div><hr><h3><a name="getData_details">getData</a></h3>
Calls R to get and normalize the cars dataset.<br><br><b>Last build was:</b> Sun Jan  8 15:51:56 2012.<br><b>Required CPU time:</b> 00:00:0.07.<br><div class="code"><pre>def getData():<br>    """Calls R to get and normalize the cars dataset."""<br>    return r("scale(cars)")<br></pre></div><hr><h3><a name="regression_details">regression</a></h3>
Calls R's lm to make a linear regression on each of its inputs.<br><br><b>Last build was:</b> Sun Jan  8 15:51:57 2012.<br><b>Required CPU time:</b> 00:00:0.05.<br><div class="code"><pre>def regression(data):<br>    """Calls R's lm to make a linear regression on each of its inputs."""<br><br>    reg = r.lm(r('x ~ y'),<br>            data = r.data_frame(x=data[:,0], y=data[:,1])<br>            )['coefficients']<br><br>    return reg<br></pre></div><hr><div id="footer"><br><br><i>Automatically generated on Tue Jan 10 15:19:12 2012 using Leaf</i></div>
</body>
</html>
