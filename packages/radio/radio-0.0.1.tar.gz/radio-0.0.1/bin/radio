#!/usr/bin/python
# -*- coding: UTF-8 -*-

from sys import argv
from os import walk, path, system
from radio.lists import radios


#
# Usage
#

usage = """
Usage:
$ radio <radio_id>			Plays radio_id. Press q to quit.
$ radio -l				Lists available radios.
$ radio -a radio_id "radio name" url	Add radio_id to radio list.
"""


#
# if something is missing, prints help, else plays the radio
#

if len(argv) < 2:
    # prints help
    print(usage)
elif argv[1] == '-l':
    # lists available radios
    rl = list(radios.urls.keys())
    rl.sort()
    for radio_id in rl:
        if len(radio_id) >= 8:
            tab = '\t'
        else:
            tab = '\t\t'
        print('%s%s%s' % (radio_id, tab, radios.urls[radio_id][0]))
else:
    if radios.urls.get(argv[1], 'error') == 'error':
        print(usage)
    else:
        # plays the radio
        radio_id = argv[1]
        url = 1
        system('mplayer ' + radios.urls[radio_id][url])

