

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Architectural Overview &mdash; plone.app.event 1.0dev documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="plone.app.event 1.0dev documentation" href="index.html" />
    <link rel="next" title="Developer documentation" href="development.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="development.html" title="Developer documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">plone.app.event 1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="architectural-overview">
<h1>Architectural Overview<a class="headerlink" href="#architectural-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="design-goals">
<h2>Design goals<a class="headerlink" href="#design-goals" title="Permalink to this headline">¶</a></h2>
<p>The development of plone.app.event was done with following design goals in
mind:</p>
<blockquote>
<div><p>[a] Encapsulation and independence: All event related code should reside in a
seperate package (splitted into other packages, where appropriate). Plone
should be least dependend on plone.app.event. Best would be that one can
deinstall this feature completly.</p>
<p>[b] Archetypes and Dexterity awareness: plone.app.event should provide the
ATEvent content type (factored out from ATContentTypes) and also Dexterity
behaviors, which can be used in Dexterity types.</p>
<p>[c] Standards compliancy: the iCalendar / <a class="reference external" href="http://tools.ietf.org/html/rfc5545">RFC5545</a> standard is wonderful flexible, so
plone.app.event should provide support for it by allowing ical exports. This
is also available for the current ATContentType based implementation, but
plone.app.event aims to improve it. A future goal is to support CalDAV also.</p>
<p>[d] Recurring events support based on the RFC5545 standard.</p>
<p>[e] A modern dateinput widget.</p>
<p>[f] Features like whole-day-events.</p>
<p>[g] Timezone support.</p>
</div></blockquote>
<p>Encapsulation and independence: plone.app.event provides the Archetypes based
type and the Dexterity behaviors via two other subpackages in that package: at
and dx. Based on installed features (Products.ATContentTypes or
plone.dexterity, respectively), eather of those subpackages are included via
the zcml:condition statement. The calendar and event portlets were moved from
plone.app.portlets into plone.app.event, where they belong semantically - thus
improving encapsulation and independence and reducing interwoven dependencies.
The calendar portlet was completly refactored. The functionality of the
CalendarTool (portal_calendar) was reimplenented. Important settings from the
calendar-controlpanel are now available in the event configlet. Since the
calendar portlet was the only consumer of the CalendarTool, the CalendarTool,
the calendar controlpanel and the dependency to Products.CMFCalendar can be
dropped. The new plone.formwidget.datetime implements archetypes and z3cform
based widgets, so the old datetime widget can be dropped. Python-dateutil
provides recurrence calculations based on the RFC5545 standard -
plone.formwidget.recurrence provides a awidget for recurrence and
Products.DateRecurringIndex an appropriate index as a drop-in replacement for
Zope&#8217;s DateIndex. The iCalendar package was improved and is now used for
plone.app.event to provide icalendar serialization. The timezone support is
based on the pytz package. Plone now haves a portal timezone, User timezones
and every event can define another timezone, if wished. User timezones are
planned. Whole day events get their starttime set to
0:00 and endtime set to 23:59:59 - thats should be feasable in most cases</p>
<blockquote>
<div>(excluding any scientific events...).</div></blockquote>
</div>
<div class="section" id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plone-app-event">
<h3>plone.app.event<a class="headerlink" href="#plone-app-event" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/plone/plone.app.event">https://github.com/plone/plone.app.event</a></p>
<p>The &#8220;at&#8221; submodule provides the Archetypes based ATEvent content type as a
drop-in replacement of the ATContentType based ATEvent. Ical, recurrence and
generic event accessor adapters and some event subscribers related to the
ATEvent.</p>
<p>The &#8220;dx&#8221; submodule provides Dexterity behaviors (some granular ones) and a
Dexterity based content type (Generic Setup). Like in the &#8220;at&#8221; submodule, ical,
recurrence and generic event accessor adapters as well as some event
subscribers are provided.</p>
<p>Both subpackages are only loaded, if the neccassary features are installed.</p>
<p>plone.app.event does not depend on CMFCalendar and the portal_calendar tool
any more. Plone core&#8217;s only consumer of this package was the calendar portlet
anyways, which was completly rewritten.</p>
<p>base.py provides some basic event related functionality. Many of them need a
context in order to get the correct timezone.</p>
<p>The &#8220;browser&#8221; submodule provides the new &#8220;event&#8221; controlpanel (the &#8220;calendar&#8221;
controlpanel can be dropped, since we do not need CMFCalendar any more). The
settings are stored in plone.registry.
The event view is generic to ATEvent and DX based event types.</p>
<p>The ical submodule provides adapters and views for export and import to and
from icalendar resources.</p>
<p>The locales directory which holds locale files.</p>
<p>In the portlets subpackage there are portlet_calendar (a complete rewrite) and
portlet_events, both from plone.app.portlets, where only BBB imports exist, so
that existing installations do not break.</p>
<p>The tests are all ported to plone.app.testing.</p>
</div>
<div class="section" id="plone-event">
<h3>plone.event<a class="headerlink" href="#plone-event" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/plone/plone.event">https://github.com/plone/plone.event</a></p>
<p>Date/time related utilities, recurrence calculations based on python-dateutil.</p>
</div>
<div class="section" id="plone-formwidget-datetime">
<h3>plone.formwidget.datetime<a class="headerlink" href="#plone-formwidget-datetime" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/plone/plone.formwidget.datetime">https://github.com/plone/plone.formwidget.datetime</a></p>
<p>Derived from collective.z3cform.datetimewidget and archetypes.datetimewidget
(which itself was derived from the former). It is splitted into &#8220;at&#8221; and
&#8220;z3cform&#8221; subpackages, like plone.app.event.</p>
</div>
<div class="section" id="plone-formwidget-recurrence">
<h3>plone.formwidget.recurrence<a class="headerlink" href="#plone-formwidget-recurrence" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/plone/plone.formwidget.recurrence">https://github.com/plone/plone.formwidget.recurrence</a></p>
<p>Recurrence widget based on jquery.recurrenceinput.js. Supports complex
recurrence rules with exclusion and inclusion dates, automatically updated
occurrences display within the widget and a nicely formatted string which
explains the recurrence rule.
The recurrence rule is stored as a RFC5545/icalendar compatible recurrence
string.</p>
</div>
<div class="section" id="products-daterecurringindex">
<h3>Products.DateRecurringIndex<a class="headerlink" href="#products-daterecurringindex" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/collective/Products.DateRecurringIndex">https://github.com/collective/Products.DateRecurringIndex</a></p>
<p>A drop-in replacement for Zope&#8217;s DateIndex with support for recurring events.
Each recurrence get&#8217;s an index entry.</p>
</div>
<div class="section" id="icalendar">
<h3>icalendar<a class="headerlink" href="#icalendar" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/collective/icalendar">https://github.com/collective/icalendar</a></p>
<p>icalendar parser/generator framework.</p>
</div>
</div>
<div class="section" id="other-external-packages">
<h2>Other, external packages<a class="headerlink" href="#other-external-packages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plone-app-eventindex">
<h3>plone.app.eventindex<a class="headerlink" href="#plone-app-eventindex" title="Permalink to this headline">¶</a></h3>
<p>Github: <a class="reference external" href="https://github.com/regebro/plone.app.eventindex">https://github.com/regebro/plone.app.eventindex</a></p>
<p>A possible alternative to Products.DateRecurringindex, which supports late
indexing and which does not have problems with unlimited occurrences. This
eventindex is currently not used by plone.app.event.</p>
</div>
<div class="section" id="python-dateutil">
<h3>Python-dateutil<a class="headerlink" href="#python-dateutil" title="Permalink to this headline">¶</a></h3>
<p>Documentation: <a class="reference external" href="http://labix.org/python-dateutil">http://labix.org/python-dateutil</a>
Repository: <a class="reference external" href="https://launchpad.net/dateutil">https://launchpad.net/dateutil</a></p>
<p>Useful extensions to the standard Python datetime features. plone.app.event
uses it mainly for recurrence calculations.</p>
</div>
<div class="section" id="pytz">
<h3>Pytz<a class="headerlink" href="#pytz" title="Permalink to this headline">¶</a></h3>
<p>Documentation: <a class="reference external" href="http://pytz.sourceforge.net/">http://pytz.sourceforge.net/</a>
Pypi page: <a class="reference external" href="https://pypi.python.org/pypi/pytz/">https://pypi.python.org/pypi/pytz/</a></p>
<p>World timezone definitions, modern and historical. Based on the Olson database.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Architectural Overview</a><ul>
<li><a class="reference internal" href="#design-goals">Design goals</a></li>
<li><a class="reference internal" href="#packages">Packages</a><ul>
<li><a class="reference internal" href="#plone-app-event">plone.app.event</a></li>
<li><a class="reference internal" href="#plone-event">plone.event</a></li>
<li><a class="reference internal" href="#plone-formwidget-datetime">plone.formwidget.datetime</a></li>
<li><a class="reference internal" href="#plone-formwidget-recurrence">plone.formwidget.recurrence</a></li>
<li><a class="reference internal" href="#products-daterecurringindex">Products.DateRecurringIndex</a></li>
<li><a class="reference internal" href="#icalendar">icalendar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-external-packages">Other, external packages</a><ul>
<li><a class="reference internal" href="#plone-app-eventindex">plone.app.eventindex</a></li>
<li><a class="reference internal" href="#python-dateutil">Python-dateutil</a></li>
<li><a class="reference internal" href="#pytz">Pytz</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="development.html"
                        title="next chapter">Developer documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/architectural-overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="development.html" title="Developer documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">plone.app.event 1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Plone Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>