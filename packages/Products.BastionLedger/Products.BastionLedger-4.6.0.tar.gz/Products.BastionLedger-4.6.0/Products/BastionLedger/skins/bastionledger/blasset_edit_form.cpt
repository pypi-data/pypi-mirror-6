<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">


<body>
   <div metal:fill-slot="main"
        tal:define="errors options/state/getErrors;
                   utool context/@@plone_portal_state/portal_url;">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/></h1>

      <br/>

      <form name="edit_form" action="" method="post"
            tal:attributes="action string:${context/getId}/${template/getId}">


          <div class="field"
               tal:condition="python:site_properties.getProperty('visible_ids', None)"
               tal:define="error errors/id | nothing;
                           id python:request.get('id', here.show_id() and here.getId() or '');"
               tal:attributes="class python:error and 'field error' or 'field'">

            <label for="id" i18n:translate="label_short_name">Short Name</label>

            <div class="formHelp" i18n:translate="help_shortname">
                   Short Name is part of the item's web address.
                           For accessibility reasons, do not use spaces, upper case,
                   underscores, or special characters.
            </div>

            <div tal:content="error">Validation error output</div>

            <input type="text"
                   id="id"
                   name="id"
                   value=""
                   tal:attributes="value id"
                   />

          <input type="hidden"
                 name="id"
                 tal:condition="python:not site_properties.getProperty('visible_ids', '')"
                 tal:attributes="value python:request.get('id', here.getId())"
                 />


          </div>

             <div tal:define="error errors/title|nothing;
                  Title request/title | context/Title"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="title" i18n:translate="label_title">Title</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="title title_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="title" name="title" value="" size="50"
                         tal:attributes="value Title;"/>
             </div>

             <div tal:define="error errors/Description|nothing;
                  Description request/description | context/Description"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <div class="label">Description</div>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_description">
                    A brief description of the item.
                 </div>

                 <textarea rows="5" cols="80" id="description" name="description"
                           tal:content="Description"></textarea>
             </div>

             <div tal:define="error errors/purchase_price|nothing;
                              Purchase_Price request/purchase_price | context/purchase_price"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="purchase_price" i18n:translate="label_purchase_price">Purchase Price</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="purchase_price purchase_price_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_purchase_price">
                    The amount paid for the asset
                 </div>

                 <input type="text" id="purchase_price" name="purchase_price:currency" value="" size="12"
                         tal:attributes="value Purchase_Price;"/>
             </div>

             <div tal:define="error errors/purchase_date|nothing;
                              Purchase_Date request/purchase_date | context/purchase_date;
	                      inputvalue Purchase_Date;
                              formname string:edit_form;
                              show_hm python: False;
                              inputname string:purchase_date;"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="purchase_date" i18n:translate="label_purchase_date">Purchase Date</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="purchase_date purchase_date_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_purchase_date">
                    Date asset was acquired for depreciation purposes.
                 </div>

                 <span metal:use-macro="here/calendar_macros/macros/calendarDatePickerBox"/>
             </div>

             <div tal:define="error errors/improvement_costs|nothing;
                              Improvement_Costs request/improvement_costs | context/improvement_costs"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="improvement_costs" 
                        i18n:translate="label_improvement_costs">Improvement Costs</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="improvement_costs improvement_costs_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_improvement_costs">
                    Any improvements to the asset that also attract depreciation
                 </div>

                 <input type="text" id="improvement_costs" name="improvement_costs:currency" 
                        value="" size="12"  
                        tal:attributes="value Improvement_Costs;"/>
             </div>

             <div tal:define="error errors/tax_credits|nothing;
                              Tax_Credits request/tax_credits | context/tax_credits"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="tax_credits" i18n:translate="label_tax_credits">Tax Credits</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="tax_credits tax_credits_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_tax_credits">
                    Any tax credits discounting the asset value
                 </div>

                 <input type="text" id="tax_credits" name="tax_credits:currency" value="" size="12"
                         tal:attributes="value Tax_Credits;"/>
             </div>

             <div tal:define="error errors/relief_credits|nothing;
                              Relief_Credits request/relief_credits | context/relief_credits"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="relief_credits" i18n:translate="label_relief_credits">Relief Credits</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="relief_credits relief_credits_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>
                 <div class="formHelp" i18n:translate="help_relief_credits">
                    Any discount to be applied to the asset's value eg loan interest write-offs
                 </div>


                 <input type="text" id="relief_credits" name="relief_credits:currency" value="" size="12"
                         tal:attributes="value Relief_Credits;"/>
             </div>

             <div tal:define="error errors/disposal_date|nothing;
                              Disposal_Date request/disposal_date | context/disposal_date;
	                      inputvalue Disposal_Date;
                              formname string:edit_form;
                              show_hm python: False;
                              inputname string:disposal_date;"
                  tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="disposal_date" i18n:translate="label_disposal_date">Disposal Date</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="disposal_date disposal_date_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_disposal_date">
                    Date asset sold (1970/01/01 represents no sale...)
                 </div>

                 <span metal:use-macro="here/calendar_macros/macros/calendarDatePickerBox"/>

             </div>

             <div tal:define="error errors/disposal_price|nothing;
                              Disposal_Price request/disposal_price | context/disposal_price"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="disposal_price" i18n:translate="label_disposal_price">Disposal Price</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="disposal_price disposal_price_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_disposal_price">
                    Price from disposing of asset.
                 </div>

                 <input type="text" id="disposal_price" name="disposal_price:currency" value="" size="12"
                         tal:attributes="value Disposal_Price;"/>
             </div>

             <div tal:define="error errors/depreciation_to_date|nothing;
                              Depreciation request/depreciation_to_date | context/depreciation_to_date"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="depreciation_to_date" 
                        i18n:translate="label_depreciation_to_date">Depreciation To Date</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="depreciation_to_date depreciation_to_date_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_depreciation_to_date">
                    Amount of depreciation applied to this asset so far (you probably shouldn't 
                    be touching this value unless you know what you're doing).
                 </div>

                 <input type="text" id="depreciation_to_date" name="depreciation_to_date:currency" 
                        value="" size="12"  
                        tal:attributes="value Depreciation;"/>
             </div>

             <div tal:define="error errors/depreciation_method|nothing;
                              Depreciation_Method request/depreciation_method | context/depreciation_method"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="depreciation_method" 
                        i18n:translate="label_depreciation_method">Depreciation_Method</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="depreciation_method depreciation_method_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_depreciation_method">
                    The depreciation method to apply to this asset
                 </div>

                 <select id="depreciation_method" name="depreciation_method"
                          >
                    <option tal:repeat="method context/depreciationMethods"
                            tal:attributes="selected python: Depreciation_Method==method and 1 or 0"
                            tal:content="method"/>
                 </select>
 
             </div>

             <div tal:define="error errors/effective_life|nothing;
                              Effective_Life request/effective_life | context/effective_life"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="effective_life" i18n:translate="label_effective_life">Effective Life</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="effective_life effective_life_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_effective_life">
                    Effective life of the item (used only for diminishing rate)
                 </div>

                 <input type="text" id="effective_life" name="effective_life:float" value="" size="5"
                         tal:attributes="value Effective_Life;"/>
             </div>

             <div tal:define="error errors/percentage_rates|nothing;
                              Percentage_Rates request/percentage_rates | context/percentage_rates"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="percentage_rates" 
                        i18n:translate="label_percentage_rates">Percentage Rates</label>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_percentage_rates">
                    A list of percentage rates (one per line) to apply as annual depreciation tiers 
                    (used only for prime rate calculations)
                 </div>

                 <textarea id="percentage_rates" name="percentage_rates:lines" rows="5" cols="10"
                            tal:content="python: '\n'.join(Percentage_Rates)"></textarea>
             </div>

             <div tal:define="error errors/asset_account|nothing;
                              Asset_Account request/asset_account | context/asset_account"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="asset_account" i18n:translate="label_asset_account">Asset Account</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="asset_account asset_account_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_asset_account">
                    General ledger account to which depreciation of this asset will apply
                 </div>

                 <select id="asset_account" name="asset_account" value=""
                         tal:attributes="value Asset_Account;">
                      <option tal:repeat="acct context/aq_parent/assetAccountValues"
                              tal:content="acct/prettyTitle"
                              tal:attributes="value acct/getId;
                                              selected python: acct.getId() == Asset_Account and 1 or 0"/>
                 </select>

             </div>
             <div tal:define="error errors/percentage_owned|nothing;
                              Percentage_Owned request/percentage_owned | context/percentage_owned"
                              tal:attributes="class python:error and 'field error' or 'field'">

                 <label for="percentage_owned" 
                        i18n:translate="label_percentage_owned">Percentage Owned</label>

                 <span class="fieldRequired" title="Required"
                       i18n:attributes="percentage_owned percentage_owned_required;"
                       i18n:translate="label_required">(Required)</span>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_percentage_owned">
                    Percentage of asset owned by this entity for depreciation purposes
                 </div>

                 <input type="text" id="percentage_owned" name="percentage_owned:float" value="" size="6"
                         tal:attributes="value Percentage_Owned;"/>
             </div>


         <div class="formControls" colspan="2">
               <input class="context"  type="submit" name="form.button.Edit"
                      value="Edit" i18n:attributes="Edit" />
         </div>

         <input type="hidden" name="form.submitted" value="1"/>
      </form>
 
  </div>
 
</body>
</html>
