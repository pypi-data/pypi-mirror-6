<html tal:replace="structure context/manage_page_header"/>
     <span tal:replace="structure context/manage_tabs"/>

     <br/>
       <form action="" method="post" tal:attributes="action request/URL1">
         <table cellspacing="0" cellpadding="2" border="0">
           <metal:fields define-macro="ledgerprops">
              <tr>
                  <td class="form-label">Title</td>
                  <td class="form-element">
                      <input type="text" name="title" size="35" value=""
                            tal:attributes="value context/title | nothing">
                  </td>
              </tr>
              <tr>
                  <td class="form-label" valign="top">Description</td>
                  <td class="form-element">
                      <textarea type="text" name="description:text" rows="2" cols="50"
                                tal:content="context/description | nothing"/>
                  </td>
              </tr>
              <tr>
                  <td class="form-label" valign="top">Account Types</td>
                  <td class="form-element">
                      <ul>
                         <li tal:repeat="t context/account_types" tal:content="t"/>
                      </ul>
                  </td>
              </tr>
              <tr>
                  <td class="form-label" valign="top">Transaction Types</td>
                  <td class="form-element">
                      <ul>
                         <li tal:repeat="t context/transaction_types" tal:content="t"/>
                      </ul>
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Next Account Number</td>
                  <td class="form-element">
                      <input type="text" name="account_prefix" size="5" value=""
                            tal:attributes="value context/account_prefix | nothing">
                      <input type="text" name="account_id" size="12" value=""
                            tal:attributes="value context/currentAccountId">
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Next Transaction Number</td>
                  <td class="form-element">
                      <input type="text" name="txn_prefix" size="5" value=""
                            tal:attributes="value context/txn_prefix | nothing">
                      <input type="text" name="txn_id" size="12" value=""
                            tal:attributes="value context/currentTxnId">
                  </td>
              </tr>
              <tr tal:condition="exists: context/controlAccounts">
                  <td class="form-label" valign="top">Control Account</td>
                  <td class="form-element" valign="top"
                      tal:define="controlAccounts context/controlAccounts">
                     <select name="control_accounts:list" size="3" multiple>
                          <option tal:repeat="account python: context.Ledger.accountValues(sort_on='accno')"
                                  tal:content="account/prettyTitle"
                                  tal:attributes="value account/getId;
                                                  selected python: account in controlAccounts and 1 or 0"/>
                     </select>
                     <input class="form-element" type="submit" name="manage_changeControl:method"
                            value=" Change "/>
                     <input type="text" name="effective:date" value="" size="12"
                            tal:attributes="value request/effective | python: DateTime()"/>
                     <input class="form-element" type="submit" name="manage_recalculateControls:method" 
                            value=" Recalculate "/>
                  </td>
              </tr>
               <tr>
                  <td class="form-label" valign="top">Supported Currencies</td>
                  <td class="form-element">
                      <select name="currencies:list" multiple size="3"> 
                          <option tal:repeat="cur context/allCurrencies"
                                  tal:attributes="selected python: cur in context.currencies and 1 or 0"
                                  tal:content="cur"/>
                      </select>
                  </td>
              </tr>
              <tr>
                  <td class="form-label">Default Currency</td>
                  <td class="form-element" tal:content="context/defaultCurrency" 
                      tal:on-error="string:"/>
              </tr>
            </metal:fields>
              <tr><td colspan="2">
                     <input type="submit"  value="  Edit  " name="manage_edit:method" class="form-element"/>
                  </td>
              </tr>
         </table>
       </form>

<html tal:replace="structure context/manage_page_footer"/>




