<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="content-type">
<title>XSQ report</title>
<script src="http://mbostock.github.com/d3/d3.v2.js?2.8.0" type="text/javascript">
</script>
<script type="text/javascript" src="readqual.js">
</script>

<style>
  html {
    background-color: #d0d0d0;
  }
  body {
    margin: 2em;
    padding: 3em;
    background-color: #fff;
  }
  .chart rect {
   fill: steelblue;
   stroke: white;
 }

  .chart line.p90 {
   stroke: steelblue;
  }

  table tr td.odd {
    background-color: #f0f0ff;
  }

  ul.lean li {
    list-style: none;
  }
  ul.lean li.odd {
    background-color: #f0f0ff;
  }
  .rule {
    font-size: 70%;
  }
</style>

</head>
<body>

<h1>File: {{ filename }}<h1>

<h2>XSQ Info</h2>
<table class="xsqinfo">
<tbody>
{% for field, value in xsqinfo %}
<tr>
<td class="{{ loop.cycle('odd', 'even') }}">{{ field }}:</td>
<td><i>{{ value }} </i></td>
</tr>
{% endfor %}
</tbody>
</table>
<p>
<i>NA can occur with older XSQ files, or XSQ files generated outside of the software running a SOLiD.</i>
</p>
<h2>File content</h2>
<ul class="lean">
{% for lib in libs %}
<li class="{{ loop.cycle('odd', 'even') }}"><a href="#{{ lib.lib_i}}">{{ lib.name }}</a></li>
{% endfor %}
</ul>

<h2>Libraries</h2>
{% for lib in libs %}
<h3 name="{{ lib.lib_i }}">Library: "{{ lib.name }}"</h3>

<h4>Sequencing data</h4>
<table>
<tbody>
<tr><td class="even">Number of reads</td><td>{{ '{:,}'.format(lib.readcount) }}</td></tr>
<tr><td class="odd">Fragments per read</td><td>{% for frg in lib.fragments %} {{frg.name}}, {% endfor %}</td><tr>
</tbody>
</table>
<h4>Read quality (sampling {{ sample_percent * 100 }}&#37; of the data)</h4>
{% for frg in lib.fragments %}
<h5>{{ frg.name }}</h5>
<div id="qualityplot_{{ frg.name }}_{{ lib.lib_i }}">
<script type="text/javascript">
csv_fn = "{{ frg.csv_fn }}";
d3.csv(csv_fn, function(data) { qualityplot(data, "{{ frg.name }}_{{ lib.lib_i }}") }); 
</script>
</div>
{% endfor %}
{% endfor %}

</body>
</html>
