<html tal:replace="structure context/manage_page_header"/>
     <tal:block tal:define="entries context/objectItems">

<script type="text/javascript">
<!-- 

isSelected = false;

function toggleSelect() {
  if (isSelected == false) {
    for (i = 0; i < document.objectItems.length; i++)
      document.objectItems.elements[i].checked = true ;
    isSelected = true;
    document.objectItems.selectButton.value = "Deselect All";
    return isSelected;
  }
  else {
    for (i = 0; i < document.objectItems.length; i++)
      document.objectItems.elements[i].checked = false ;
    isSelected = false;
    document.objectItems.selectButton.value = "Select All";
    return isSelected;       
  }
}

//-->
</script>


     <span tal:replace="structure here/manage_tabs"/>

       <table border="0" width="100%" cellspacing="0" cellpadding="0"
              tal:define="products python:context.filtered_meta_types(request)">
          <tr>
              <td align="right" valign="top" class="form-element">
                 <form method="get" action="" tal:attributes="action request/URL1">
                     <div tal:condition="python: len(products) > 1" tal:omit-tag="">
                         <select class="form-element" name=":action"
                                 onchange="" tal:attributes="onchange string:location.href='${request/URL1}/'+this.options[this.selectedIndex].value">
                             <option value="manage_workspace" disabled>Select type to add...</option>
                             <option tal:repeat="product products"
                                     value="" tal:attributes="value product/action"
                                     tal:content="product/name"/>
                          </select>
                          <input class="form-element" type="submit" value=" Add ">
                      </div>
                      <div tal:condition="python: len(products) == 1" tal:omit-tag="">
                          <span tal:define="product python:products[0]" tal:omit-tag="">
                             <input type="hidden" name=":method" value="" tal:attributes="value product/action"/>
                             <input class="form-element" type="submit" name="submit" value=""
                                    tal:attributes="value string: Add ${product/name}" />
                          </span>
                      </div>
                 </form>
              </td>
          </tr>
       </table>
       <br/>
      <form action="" tal:attributes="action request/URL1" method="post" name="objectItems">
       <table border="0" cellpadding="2" cellspacing="0" width="100%">
           <tr class="list-header" tal:condition="entries">
               <td width="16"  class="list-item">&nbsp;</td>
               <td width="25"  class="list-item">Type</td>
               <td width="50%" class="list-item">Name</td>
               <td width="15%" class="list-item">Size</td>
               <td width="19%" class="list-item">Last Modified</td>
     	       <td class="list-item">&nbsp;</td>
           </tr>
           <tal:block tal:repeat="item_tuple entries">
               <tr class="row-hilite"
                   tal:define="item python:item_tuple[1]; 
                               item_id python: item_tuple[0]"
                   tal:attributes="class python: repeat['item_tuple'].index % 2 and 'row-normal' or 'row-hilite'">
                   <td class="list-item" width="16">
                      <input type="checkbox" name="ids:list" value="" tal:attributes="value item_id">
                   </td>
                   <td class="list-item" tal:define="omicons item/om_icons | nothing">
                      <a href="" tal:attributes="href string:${item_id}/manage_workspace">
                         <img tal:condition="omicons"
                              tal:repeat="icon omicons" border="0" 
                              tal:attributes="src string:${request/BASEPATH1}/${icon/path};
                                              title icon/title;
                                              alt icon/alt"
                              tal:on-error="string:"/>
                         <img tal:condition="not: omicons" border="0"
                              tal:attributes="src string:${request/BASEPATH1}/${item/icon};
                                              title item/meta_type;
                                              alt item/meta_type;"
                              tal:on-error="string:"/>
                      </a>
                   </td>
                   <td class="list-item">
                       <a href="" tal:attributes="href string:${item_id}/manage_workspace"
                          tal:on-error="string:">
                          <span tal:replace="item_id | item/getId"/>
                          <span tal:condition="item/title" tal:replace="string:(${item/title})"/>
                       </a>
                   </td>
                   <td class="list-item" 
                       tal:content="structure python: context.getSize(item) or '&nbsp;'"/>
                   <td class="list-item" tal:on-error="string:"
                       tal:content="python: item.bobobase_modification_time().strftime('%Y-%m-%d %H:%M')"/>
                   <td class="list-item">&nbsp;</td>
               </tr>
           </tal:block>
           <tr>
               <td colspan="7" class="form-element">
                  <input tal:condition="entries" type="submit"  value=" Rename "
                          name="manage_renameForm:method" class="form-element"/>
                  <span tal:condition="python: not context.dontAllowCopyAndPaste and entries">
                      <input type="submit"  value="   Cut  " name="manage_cutObjects:method" class="form-element"/>
                      <input type="submit"  value="  Copy  " name="manage_copyObjects:method" class="form-element"/>
                  </span>
                  <input tal:condition="context/cb_dataValid"
                         type="submit"  value="  Paste " name="manage_pasteObjects:method" class="form-element"/>
                  <input tal:condition="python: entries and context.SecurityCheckPermission('Delete objects',
                                                                                   here)"
                         class="form-element" type="submit"
                         name="manage_delObjects:method" value="Delete" />
                  <input tal:condition="python: context.SecurityCheckPermission('Import/Export objects',
                                                                                   here)"
                         class="form-element" type="submit"
                         name="manage_importExportForm:method" value="Import/Export" />


                  <input class="form-element" type="submit" name="selectButton" value="Select All"
                         onClick="toggleSelect(); return false" />
                  <span tal:define="additional_buttons context/additional_buttons | nothing" 
                        tal:condition="additional_buttons" tal:replace="structure additional_buttons"/>
               </td>
           </tr>
         </table>
      </form>

<script type="text/javascript" tal:condition="request/form/update_menu | nothing">
<!--
window.parent.update_menu();
//-->
</script>


    </tal:block>
<html tal:replace="structure context/manage_page_footer"/>




