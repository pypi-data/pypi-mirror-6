##parameters=account=None,args=[],kw={}
#
# This script should return a list (possibly empty) of BLEntry objects
#
from Products.BastionBanking.ZCurrency import ZCurrency
from Products.BastionLedger.BLEntry import BLEntry

order = args[0]
entries = []

account = account or order.blAccount()

receivable = account.isReceivable()

if not receivable:
    return entries

for orderitem in order.orderItemValues():
    acc = orderitem.blPart().expense_account()
    entries.append( BLEntry(acc.getId(),
                    account.prettyTitle(),
                    'Ledger/%s' % acc.getId(),
                    orderitem.calculateCost(),
                    script.getId()) )

return entries

