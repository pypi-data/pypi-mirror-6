<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>HTMLTemplate | 3. Tutorial 1</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css" media="all"><!--@import url(full.css);--></style>

</head>
<body>

<h1>3. Tutorial 1: Generating a basic links page</h1>

<!-- top navigation -->
<div class="navbar">
	<a href="02_install.html">Previous</a> | <a href="index.html">Up</a> | <a href="04_templatedesign.html">Next</a>
	
</div>

<!-- content -->
<div id="content">


<h2>Introduction</h2>

<p>This tutorial shows how to create a simple links page that'll look something like this:</p>

<p><img src="tutorial_1_result.png" title="Example links page" alt="web page containing a list of links" /></p>


<h2>1. Define the HTML template</h2>

<p>The following HTML template contains three elements (<code>&lt;title&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;a&gt;</code>) containing compiler directives (<code>node=&quot;con:title&quot;</code>, <code>node=&quot;rep:item&quot;</code>, <code>node=&quot;con:link&quot;</code>):</p>

<pre class="template">&lt;html&gt;
    &lt;head&gt;
        &lt;title node=&quot;con:title&quot;&gt;TITLE&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;ul&gt;
            &lt;li node=&quot;rep:item&quot;&gt;
                &lt;a href=&quot;&quot; node=&quot;con:link&quot;&gt;LINK&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>

<p>Note that another attribute name, e.g. <code>id</code>, may be used instead of <code>node</code> if preferred.</p>

<p>HTMLTemplate will compile this template to the following object model:</p>

<pre class="template">Template
    |
    |----title
    |
    |----item
    |      |
    |      |----link</pre>


<h2>2. Write the template controller</h2>

<p>Both the <code>Template</code> and <code>Repeater</code> (<code>rep:item</code>) nodes require callback functions to control their rendering.</p>

<p>The main <code>render_template</code> callback function inserts text into the <code>&lt;title&gt;</code> element and generates a list of <code>&lt;li&gt;</code> items:</p>

<pre><code>def render_template(tem, pagetitle, linksinfo):
    tem.title.content = pagetitle
    tem.item.repeat(render_item, linksinfo)</code></pre>

<p>This function takes a copy of the <code>Template</code> object as its first argument, followed by two user-supplied arguments containing the data to be inserted into the template:</p>

<pre><code>pagetitle : string -- the page title
linksinfo : list of tuple -- a list of form [(URI, name),...]</code></pre>


<p>The <code>repeat()</code> method call in the <code>render_template</code> function takes a second callback function, <code>render_item</code> to control the rendering of each <code>&lt;li&gt;</code> list item and its <code>&lt;a&gt;</code> element:</p>

<pre><code>def render_item(item, linkinfo):
    URI, name = linkinfo
    item.link.atts['href'] = URI
    item.link.content = name</code></pre>


<h2>3. Compile the HTML Template</h2>

<p>Compiling the template is simple. Just create a new <code>Template</code> instance, passing it the <code>render_template</code> function, HTML template string and, optionally, the name of the attribute used to define compiler directives, e.g. <code>attribute='id'</code>:</p>

<pre><code>template = HTMLTemplate.Template(render_template, html)</code></pre>


<h2>4. Render a page</h2>

<p>To render a page, call the <code>Template</code> object's <code>render()</code> method, passing it any data to be forwarded to the <code>render_template</code> function:</p>

<pre><code>title = &quot;Site Map&quot;
links = [
        ('index.html', 'Home'),
        ('products/index.html', 'Products'),
        ('about.html', 'About')]
print template.render(title, links)</code></pre>

<p>Here's the result:</p>

<pre class="template">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Site Map&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;ul&gt;
            &lt;li&gt;
                &lt;a href=&quot;index.html&quot;&gt;Home&lt;/a&gt;
            &lt;/li&gt;
&lt;li&gt;
                &lt;a href=&quot;products/index.html&quot;&gt;Products&lt;/a&gt;
            &lt;/li&gt;
&lt;li&gt;
                &lt;a href=&quot;about.html&quot;&gt;About&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>





</div>

<!-- bottom navigation -->
<div class="navbar">
	<a href="02_install.html">Previous</a> | <a href="index.html">Up</a> | <a href="04_templatedesign.html">Next</a>
	
</div>

<!--footer-->
<p class="footer">&copy; 2008 HAS</p>
</body>
</html>