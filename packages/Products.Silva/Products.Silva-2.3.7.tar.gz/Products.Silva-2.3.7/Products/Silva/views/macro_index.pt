<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html metal:define-macro="master"
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva"
  tal:define="
    message_type view/status_type | options/message_type | request/message_type | nothing;
    message      view/status | options/message | request/message | nothing;

    model   request/model;
    trigger model/security_trigger;
    mangle  modules/Products/Silva/mangle;

    type    model/meta_type;
    url     model/absolute_url;
    title   python: model.get_title_editable() or model.id;
    icon    python:here.render_icon(model);

    root_url model/get_root_url;
    global   publication model/get_publication;
    global   containing_publication publication/../get_publication | publication;

    silva_permissions   here/get_silva_permissions;
    may_approve_content silva_permissions/ApproveSilvaContent | nothing;
    may_change_content  silva_permissions/ChangeSilvaContent | nothing;
">

<head>
  <tal:block replace="structure request/model/set_content_type_and_nocache" />
<title>
  <tal:block content="title">title</tal:block> &#8211;
  <tal:block content="string:$vein" i18n:translate="">vein</tal:block>
</title>
<tal:block replace="nothing"> _______ base tag to handle Five methods with .. _______ </tal:block>
<base tal:attributes="href string:${model/absolute_url}/edit/" />
<tal:favicon replace="structure provider:favicon" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<metal:block define-slot="meta" />
<tal:resource tal:replace="structure provider:resources" />

<tal:block replace="nothing"> _______ use frontend.css in preview _______ </tal:block>
<metal:block define-slot="frontend" />
<tal:block replace="nothing"> _______ hook for local style tag _______ </tal:block>
<metal:block define-slot="style" />
<tal:block replace="nothing"> _______ hook for metatype stylesheet _______ </tal:block>
<metal:block define-slot="metatype_css" />
<tal:block replace="nothing"> _______ hook for application specific stylesheet _______ </tal:block>
<metal:block define-slot="extension_css" />
<tal:block replace="nothing"> _______ hook for refresh function _______ </tal:block>
<metal:block define-slot="refresher" />
<tal:block replace="nothing"> _______ XXX turned off, doesn't work _______ </tal:block>
<script type="text/javascript"
        tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/helperscripts.js"></script>
<script type="text/javascript"
        tal:attributes="src string:${root_url}/++resource++Products.Silva.browser.scripts/handler_registry.js"></script>
<script type="text/javascript"
        tal:attributes="src  string:${root_url}/++resource++Products.Silva.browser.scripts/reference.js"></script>
<script type="text/javascript"
        tal:attributes="src string:$root_url/globals/js/jscalendar/calendar.js"></script>
<script type="text/javascript"
        tal:attributes="src string:$root_url/globals/js/jscalendar/lang/calendar-en.js"></script>
<script type="text/javascript"
        tal:attributes="src string:$root_url/globals/js/jscalendar/calendar-setup.js"></script>
<link rel="stylesheet" type="text/css" media="all"
        tal:attributes="href string:$root_url/globals/js/jscalendar/calendar-blue.css" />
<tal:block tal:replace="nothing"> _______ script slot _______ </tal:block>
<metal:block define-slot="script" />
<tal:block tal:replace="nothing"> _______ rel navigation_______ </tal:block>
<link rel="help" href="globals/accesskeys" title="Help with access keys" i18n:attributes="title" />
<link rel="copyright" href="globals/copyright" title="Silva copyright info" i18n:attributes="title" />
</head>

<body onload="window.onload_registry.callHandlers()">
<!-- __________________________ start matrix tabs _________________________ -->
<metal:block use-macro="here/macro_tabs/macros/tabs">
  top navigation plugs in here....
</metal:block>
<!-- ___________________________ /end matrix tabs __________________________ -->
<!-- ___________________________ start workspace __________________________ -->
<div class="workspace">
<metal:plug define-slot="middleground" />

<span tal:replace="nothing">
<!-- ______________ start feedback ______________ -->
</span>
<metal:plug define-slot="notice" />
<tal:provider replace="structure provider:smimessages" />
<span tal:replace="nothing">
<!-- ______________ /end feedback ______________ -->
</span>

<!-- _____________________ start main _____________________ -->
<div metal:define-slot="main">
  Here the local content (a.k.a. "model") is inserted (this text will be replaced).
</div>
<!-- _____________________ /end main _____________________ -->

<!-- ____________________________ start footer ____________________________ -->
<span tal:replace="nothing">
<!-- _______ white space + jump to top _______ -->
</span>
<div style="float:left; clear:left; width:16px">
  <a title="jump to top: alt-t"
    tal:attributes="href string:$url/edit/${template/id}#top"
    i18n:attributes="title">
    <img alt="jump to top: alt-t"
      border="0"
      height="16"
      width="16"
      tal:attributes="src string:$root_url/globals/up_to_top_gray.gif"
      i18n:attributes="alt"
    />
  </a>
</div>
<div style="float:right; clear:right; text-align:right; width:16px">
  <a title="jump to top: alt-t"
    accesskey="t"
    tal:attributes="href string:$url/edit/${template/id}#top"
    i18n:attributes="title">
    <img alt="jump to top: alt-t"
      border="0"
      height="16"
      width="16"
      tal:attributes="src string:$root_url/globals/up_to_top_gray.gif"
      i18n:attributes="alt"
    />
  </a>
</div>

<span tal:replace="nothing">
<!-- ______________ page info ______________ -->
</span>
<div class="footer"
  tal:define="
    name  python: here.get_metadata_element('silva-extra', 'contactname');
    email python: here.get_metadata_element('silva-extra', 'contactemail');
    ">
    <div style="float: left;">
      <tal:block i18n:translate="">contact:</tal:block>
    <a shape="rect"
      tal:attributes="href string:mailto:$email">
      <tal:block tal:condition="name" tal:content="name">
      </tal:block>
      <tal:block tal:condition="python:not name">
        <tal:block tal:condition="email" tal:content="email">
        </tal:block>
        <tal:block tal:condition="python:not email" i18n:translate="">
          no name
        </tal:block>
      </tal:block>
    </a>
  </div>
  <div style="float: right;">
    <a shape="rect"
       id="smi-content-url"
      title="Leave Silva and view the public page: alt-:"
      tal:attributes="href url"
      i18n:attributes="title"
      i18n:translate="">
      view public version
    </a>
  </div>
  &nbsp;
</div>

<span tal:replace="nothing">
<!-- ______________ user tools ______________ -->
</span>
<div class="personalbar"
  tal:define="userid request/AUTHENTICATED_USER/getUserName">
  <div style="float: left;">
    <a title="Change your settings: alt-~"
       accesskey="~"
       id="user-update-info"
       class="link-popup-form"
       href="#"
       tal:attributes="href string:${model/@@absolute_url}/++rest++userinfo"
       i18n:attributes="title">
      <img border="0"
           height="9"
           width="9"
           alt="user icon"
           tal:attributes="src string:$root_url/globals/user.png"
           />
      <span i18n:translate="">user settings</span>
    </a>
  </div>
  <div style="float: right;">
    <a href="#"
       accesskey="q"
       title="Logout of Silva: alt-q"
       i18n:translate=""
       i18n:attributes="title"
       tal:attributes="href python:mangle.urlencode(model.absolute_url() + '/service_members/logout', came_from=publication.absolute_url())">
      logout
      <tal:block tal:condition="here/get_user_role"
        i18n:name="role"
        tal:content="structure string:${here/get_user_role}" />
      <tal:block i18n:name="userid" tal:content="userid" />
    </a>
  </div>
  <a tal:attributes="href string:$url/edit/${template/id}#bottom"
    accesskey="m">
  </a>
  <a name="bottom">
    &nbsp;
  </a>
</div>
<div id="remote-form-dialog">
</div>
<div id="remote-request-loading">
  <p i18n:translate="">loading ...</p>
</div>
<span tal:replace="nothing">
  <!-- ____________________________ /end footer _____________________________ -->
</span>

<span tal:replace="nothing">
<!-- ____________________________ /end workspace ____________________________ -->
</span>
</div>

</body>
</html>
